<!DOCTYPE html><html xmlns:cc="http://creativecommons.org/ns#"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Building an Android Settings Screen (Part 3) – Jakob Ulbrich – Medium</title><link rel="canonical" href="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec"><meta name="title" content="Building an Android Settings Screen (Part 3) – Jakob Ulbrich – Medium"><meta name="referrer" content="unsafe-url"><meta name="description" content="In the first part of this tutorial we already built and themed our Settings Screen and in the second part we fixed the layout and the theme of the dialogs. Now is the time to extend the the v7…"><meta property="og:title" content="Building an Android Settings Screen (Part 3) – Jakob Ulbrich – Medium"><meta property="og:url" content="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec"><meta property="og:image" content="https://cdn-images-1.medium.com/max/1200/1*JjknpvGZAZfNxjGo6Ywv9Q.png"><meta property="fb:app_id" content="542599432471018"><meta property="og:description" content="How to Create Custom Preferences"><meta name="twitter:description" content="How to Create Custom Preferences"><meta name="twitter:image:src" content="https://cdn-images-1.medium.com/max/1200/1*JjknpvGZAZfNxjGo6Ywv9Q.png"><link rel="publisher" href="https://plus.google.com/103654360130207659246"><link rel="author" href="https://medium.com/@JakobUlbrich"><meta property="author" content="Jakob Ulbrich"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta property="article:publisher" content="https://www.facebook.com/medium"><meta property="article:author" content="https://medium.com/@JakobUlbrich"><meta property="fb:smart_publish:robots" content="noauto"><meta name="robots" content="index, follow"><meta property="article:published_time" content="2016-05-31T20:09:34.464Z"><meta name="twitter:site" content="@Medium"><meta property="og:site_name" content="Medium"><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="10 min read"><script type="application/ld+json">{"@context":"http://schema.org","@type":"NewsArticle","image":{"@type":"ImageObject","width":1200,"height":901,"url":"https://cdn-images-1.medium.com/max/1200/1*JjknpvGZAZfNxjGo6Ywv9Q.png"},"datePublished":"2016-05-31T20:09:34.464Z","dateModified":"2016-10-23T00:38:54.613Z","headline":"Building an Android Settings Screen (Part 3)","name":"Building an Android Settings Screen (Part 3)","keywords":["Android","Android App Development","Android Design","Android Libraries","Android Tutorials"],"author":{"@type":"Person","name":"Jakob Ulbrich","url":"https://medium.com/@JakobUlbrich"},"creator":["Jakob Ulbrich"],"mainEntityOfPage":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec"}</script><meta name="twitter:app:name:iphone" content="Medium"><meta name="twitter:app:id:iphone" content="828256236"><meta name="twitter:app:url:iphone" content="medium://p/ae9793fd31ec"><meta property="al:ios:app_name" content="Medium"><meta property="al:ios:app_store_id" content="828256236"><meta property="al:android:package" content="com.medium.reader"><meta property="al:android:app_name" content="Medium"><meta property="al:ios:url" content="medium://p/ae9793fd31ec"><meta property="al:android:url" content="medium://p/ae9793fd31ec"><meta property="al:web:url" content="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec"><link rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml" /><link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/ae9793fd31ec" /><meta name="theme-color" content="#000000"><link rel="stylesheet" href="https://cdn-static-1.medium.com/_/fp/css/main-base.g2e09PlZK_j3Lw2AgNmbfQ.css"><script>if (window.top !== window.self) window.top.location = window.self.location.href;var OB_startTime = new Date().getTime(); var OB_loadErrors = []; function _onerror(e) { OB_loadErrors.push(e) }; if (document.addEventListener) document.addEventListener("error", _onerror, true); else if (document.attachEvent) document.attachEvent("onerror", _onerror); function _asyncScript(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = u; f.parentNode.insertBefore(s, f);}function _asyncStyles(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("link"); s.rel = "stylesheet"; s.href = u; f.parentNode.insertBefore(s, f); return s}var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-24232453-2"]); _gaq.push(["_setDomainName", window.location.hostname]); _gaq.push(["_setAllowLinker", true]); _gaq.push(["_trackPageview"]);_asyncScript(("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js");(new Image()).src = "/_/stat?event=pixel.load&origin=" + encodeURIComponent(location.origin);</script><script>(function () {var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight; var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth; document.write("<style>section.section-image--fullBleed.is-backgrounded {padding-top: " + Math.round(1.1 * height) + "px;}section.section-image--fullScreen.is-backgrounded, section.section-image--coverFade.is-backgrounded {min-height: " + height + "px; padding-top: " + Math.round(0.5 * height) + "px;}.u-sizeViewHeight100 {height: " + height + "px !important;}.u-sizeViewHeight110 {height: " + Math.round(1.1 * height) + "px !important;}.u-sizeViewHeightMin100 {min-height: " + height + "px !important;}.u-sizeViewHeightMax100 {max-height: " + height + "px !important;}section.section-image--coverFade {height: " + height + "px;}.section-aspectRatioViewportPlaceholder, .section-aspectRatioViewportCropPlaceholder {max-height: " + height + "px;}.section-aspectRatioViewportBottomSpacer, .section-aspectRatioViewportBottomPlaceholder {max-height: " + Math.round(0.5 * height) + "px;}.zoomable:before {top: " + (-1 * height) + "px; left: " + (-1 * width) + "px; padding: " + height + "px " + width + "px;}</style>");})()</script><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]--><link rel="icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-medium.TAS6uQ-Y7kcKgi0xjcYHXw.ico" class="js-favicon"><link rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/152/152/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/120/120/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/76/76/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/60/60/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg" color="#171717"></head><body itemscope class=" postShowScreen is-noJs"><script>document.body.className = document.body.className.replace(/(^|\s)is-noJs(\s|$)/, "$1is-js$2")</script><div class="site-main" id="container"><div class="butterBar butterBar--error"></div><div class="surface"><div id="prerendered" class="screenContent"><canvas class="canvas-renderer"></canvas><div class="container u-maxWidth740 u-xs-margin0 notesPositionContainer js-notesPositionContainer"></div><div class="metabar u-clearfix js-metabar"><div class="metabar-inner u-marginAuto u-maxWidth1000 u-paddingLeft20 u-paddingRight20 js-metabarMiddle"><div class="metabar-block metabar-block--left u-floatLeft u-height65 u-xs-height56"><a href="https://medium.com/" class="siteNav-logo" data-log-event="home"><span class="svgIcon svgIcon--logoNew svgIcon--45px is-flushLeft"><svg class="svgIcon-use" width="45" height="45"  viewBox="-17 18 45 45" data-multipart="true"><path d="M11.525 28.078c-.472-.225-.858.002-.858.506v20.044l8.616 4.113c.948.46 1.717.14 1.717-.7v-19.3a.22.22 0 0 0-.124-.19l-9.35-4.46v-.01z"/><path d="M.333 43.696l9.83-15.247c.278-.43.89-.6 1.36-.38l9.364 4.47c.06.03.082.1.047.15L10.666 48.63.333 43.698v-.002z"/><path d="M-8.57 28.35c-.786-.375-1.053-.096-.592.62L.333 43.696l10.333 4.932L.356 32.635a.156.156 0 0 0-.06-.054l-8.866-4.23z"/><path d="M.333 52.033c0 .84-.643 1.22-1.43.844l-8.045-3.84c-.472-.224-.858-.82-.858-1.325V28.89c0-.672.515-.976 1.145-.675l9.133 4.36a.092.092 0 0 1 .055.084v19.37z"/></svg></span><span class="u-textScreenReader">Homepage</span></a></div><div class="metabar-block u-floatRight u-xs-absolute u-xs-textAlignRight u-xs-right0 u-xs-marginRight20 u-height65 u-xs-height56"><div class="buttonSet"><a class="button button--primary button--chromeless u-accentColor--buttonNormal is-inSiteNavBar u-lineHeight30 u-height32"  href="https://medium.com/m/signin?redirect=https%3A%2F%2Fmedium.com%2F%40JakobUlbrich%2Fbuilding-a-settings-screen-for-android-part-3-ae9793fd31ec" data-action="sign-in-prompt" data-redirect="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec" data-action-source="nav_signup">Sign in / Sign up</a></div></div></div></div><div class="metabar metabar--spacer js-metabarSpacer u-height65 u-xs-height56"></div><main role="main"><article class=" u-sizeViewHeightMin100 u-overflowHidden postArticle postArticle--full u-marginBottom40"  lang="en"><header class="container u-maxWidth740"><div class="postMetaHeader u-paddingBottom10 row"><div class="col u-size12of12 js-postMetaLockup"><div class="postMetaLockup postMetaLockup--authorWithBio u-flex js-postMetaLockup"><div class="u-flex0"><a class="link avatar u-baseColor--link"  href="https://medium.com/@JakobUlbrich?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="73d0266697d8" data-action-type="hover" data-user-id="73d0266697d8" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/40/40/1*50pfRWptJGHYxe-dQX_pMg.png" class="avatar-image avatar-image--smaller" alt="Go to the profile of Jakob Ulbrich"></a></div><div class="u-flex1 u-paddingLeft15 u-overflowHidden"><a class="link link link--darken link--darker u-baseColor--link"  href="https://medium.com/@JakobUlbrich?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="73d0266697d8" data-action-type="hover" data-user-id="73d0266697d8" dir="auto">Jakob Ulbrich</a><span class="followState js-followState buttonSet-inner" data-user-id="73d0266697d8"><button class="button u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSize12 u-uiTextMedium u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-marginLeft10 u-marginTopNegative2 u-xs-hide"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="post_header_lockup"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSize12 u-uiTextMedium u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-marginLeft10 u-marginTopNegative2 u-xs-hide"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/73d0266697d8" data-action-source="post_header_lockup_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span><div class="postMetaInline js-testPostMetaInlineSupplemental"><time datetime="2016-05-31T20:09:34.464Z">May 31, 2016</time><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="10 min read"></span></div></div></div></div></div></header><div class="postArticle-content js-postField js-notesSource js-trackedPost"  data-post-id="ae9793fd31ec" data-source="post_page" data-tracking-context="postPage"><section name="7d00" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h1 name="d6ce" id="d6ce" class="graf graf--h3 graf--leading graf--title">Building an Android Settings Screen (Part 3)</h1><h2 name="8120" id="8120" class="graf graf--h4 graf-after--h3 graf--subtitle">How to Create Custom Preferences</h2></div><div class="section-inner sectionLayout--fullWidth"><figure name="6b43" id="6b43" class="graf graf--figure graf--layoutFillWidth graf-after--h4"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 32%;"></div><img class="graf-image" data-image-id="1*8dPldA5KlCFUX4u71G89lQ.png" data-width="2500" data-height="800" src="https://cdn-images-1.medium.com/max/2000/1*8dPldA5KlCFUX4u71G89lQ.png"></div><figcaption class="imageCaption">Fixing and Extending the android.support.v7.preference Library</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="9a9e" id="9a9e" class="graf graf--p graf-after--figure graf--trailing">In the <a href="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-1-5959aa49337c" data-href="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-1-5959aa49337c" class="markup--anchor markup--p-anchor" target="_blank">first part</a> of this tutorial we already built and themed our Settings Screen and in the <a href="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d" data-href="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d" class="markup--anchor markup--p-anchor" target="_blank">second part</a> we fixed the layout and the theme of the dialogs. Now is the time to <strong class="markup--strong markup--p-strong">extend</strong> the the v7.preference library to build a <strong class="markup--strong markup--p-strong">custom <em class="markup--em markup--p-em">preference</em></strong>. So let’s get started.</p></div></div></section><section name="4d8f" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="f9b0" id="f9b0" class="graf graf--h3 graf--leading">Understanding How the Library Works</h3><p name="2f55" id="2f55" class="graf graf--p graf-after--h3">Since the v7.preference library only provides four basic <em class="markup--em markup--p-em">preferences</em> (five when you include the v14.preference library), you are likely to need a custom <em class="markup--em markup--p-em">preference</em>. But you should not start coding without knowing what you have to do. So let’s take a look at the structure of the v7.preference library to understand how it works. Because the following explains the basics of what we do later, you should <strong class="markup--strong markup--p-strong">read this carefully</strong>. (If you are crazy and want to discover this by your own, you can find the source code <a href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/src/android/support/v7/preference" data-href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/src/android/support/v7/preference" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">right here</a>). I will only focus on the important things.</p><h4 name="c334" id="c334" class="graf graf--h4 graf-after--p">How the Library Is Structured</h4><figure name="d788" id="d788" class="graf graf--figure graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 525px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75%;"></div><img class="graf-image" data-image-id="1*uuP5q8sh_DTt1a-2dmZkBg.png" data-width="1200" data-height="900" data-action="zoom" data-action-value="1*uuP5q8sh_DTt1a-2dmZkBg.png" src="https://cdn-images-1.medium.com/max/800/1*uuP5q8sh_DTt1a-2dmZkBg.png"></div><figcaption class="imageCaption">The library structure (simplified)</figcaption></figure><p name="96ea" id="96ea" class="graf graf--p graf-after--figure">As you can see in the image, there are <strong class="markup--strong markup--p-strong">four important main classes</strong> we should know:</p><ul class="postList"><li name="5539" id="5539" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">PreferenceFragmentCompat</em></strong>: This is the fragment for our main Settings Screen. (Notice that this is abstract class, which means we can not instantiate it directly, but we can extend it).</li><li name="730c" id="730c" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">Preference</em></strong>: This is a basic preference which can appear on our Settings Screen. All predefined <em class="markup--em markup--li-em">preferences</em> inherit (indirectly) from this class.</li><li name="2a47" id="2a47" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">PreferenceDialogFragmentCompat</em></strong>: This is a basic dialog for a preference. All dialogs of the preferences inherit from this class. (Notice that this is abstract class, which means we can not instantiate it directly, but we can extend it. And yes, this must be the longest class name ever.)</li><li name="2894" id="2894" class="graf graf--li graf-after--li"><strong class="markup--strong markup--li-strong"><em class="markup--em markup--li-em">PreferenceManager</em></strong>: This provides the access to the <em class="markup--em markup--li-em">SharedPreferences</em>. The <em class="markup--em markup--li-em">PreferenceFragmentCompat</em> and all Preferences that belong to it, share the same <em class="markup--em markup--li-em">PreferenceManger</em>.</li></ul><p name="6ddd" id="6ddd" class="graf graf--p graf-after--li"><em class="markup--em markup--p-em">Preferences</em> are separated in two different types: The <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">TwoStatePreferences</em></strong> which can only toggle and store a boolean value and the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">DialogPreferences</em></strong> which provide a dialog, the user can interact with. (Notice that these two classes are abstract).</p><h4 name="de7c" id="de7c" class="graf graf--h4 graf-after--p">How the Dialogs Are Opened</h4><p name="9220" id="9220" class="graf graf--p graf-after--h4">The dialog classes are <strong class="markup--strong markup--p-strong">separated</strong> from their related <em class="markup--em markup--p-em">DialogPreference</em> classes. For example, we have the <em class="markup--em markup--p-em">EditTextPreference</em> and its related dialog <em class="markup--em markup--p-em">EditTextDialogFragmentCompat</em> in two separated classes. This means, that the dialog must explicitly be opened somewhere. When we read through the source of the <em class="markup--em markup--p-em">DialogPreference</em> (You can find it <a href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/src/android/support/v7/preference/DialogPreference.java" data-href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/src/android/support/v7/preference/DialogPreference.java" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">here</a>) we can discover the following piece of code.</p><pre name="57bb" id="57bb" class="graf graf--pre graf-after--p">@Override<br>protected void onClick() {<br>    getPreferenceManager().showDialog(this);<br>}</pre><p name="b4ae" id="b4ae" class="graf graf--p graf-after--pre">And in the <em class="markup--em markup--p-em">PreferenceManager</em> we can find the following pieces of code.</p><pre name="d769" id="d769" class="graf graf--pre graf-after--p">public void showDialog(Preference preference) {<br>    if (mOnDisplayPreferenceDialogListener != null) {<br>        mOnDisplayPreferenceDialogListener<br>            .onDisplayPreferenceDialog(preference);<br>    }<br>}</pre><pre name="27a0" id="27a0" class="graf graf--pre graf-after--pre">...</pre><pre name="6db6" id="6db6" class="graf graf--pre graf-after--pre">public interface OnDisplayPreferenceDialogListener {<br>    void onDisplayPreferenceDialog(Preference preference);<br>}</pre><p name="bf44" id="bf44" class="graf graf--p graf-after--pre">It says us, that if we click on a <em class="markup--em markup--p-em">DialogPreference</em>, it calls a method in the <em class="markup--em markup--p-em">PreferenceManger</em> to show the dialog for <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">this</em></strong> <em class="markup--em markup--p-em">preference</em>. The <em class="markup--em markup--p-em">PreferenceManager</em> then redirects the call to a registered Listener. The <em class="markup--em markup--p-em">PreferenceFragmentCompat</em> implements the interface provided by the PreferenceManager, so it can register itself as the Listener for the dialogs.</p><p name="0cc0" id="0cc0" class="graf graf--p graf-after--p graf--trailing"><strong class="markup--strong markup--p-strong">In summary</strong>, when we click on a DialogPreference, we end up in the <em class="markup--em markup--p-em">onDisplayPreferenceDialog(Preference preference)</em> method of the <em class="markup--em markup--p-em">PreferenceFragmentCompat</em>, which we need to override to open a custom dialog.</p></div></div></section><section name="b978" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="0644" id="0644" class="graf graf--h3 graf--leading">Building a Custom Preference</h3><p name="88de" id="88de" class="graf graf--p graf-after--h3">I have decided to create a custom <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">TimePreference</em></strong> as an example here. It will open a dialog and let the user select a specific time.</p><figure name="e7cd" id="e7cd" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 526px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75.1%;"></div><img class="graf-image" data-image-id="1*FQYSvF0GgACtrdFb4uGdvQ.png" data-width="1200" data-height="901" data-action="zoom" data-action-value="1*FQYSvF0GgACtrdFb4uGdvQ.png" src="https://cdn-images-1.medium.com/max/800/1*FQYSvF0GgACtrdFb4uGdvQ.png"></div></figure><p name="58fc" id="58fc" class="graf graf--p graf-after--figure">When you want to create a <em class="markup--em markup--p-em">preference</em> that is very similar to an existing one, you can perhaps extend and modify the existing <em class="markup--em markup--p-em">preference</em>. For example when you want a <strong class="markup--strong markup--p-strong">NumberPreference</strong>, you can extend the <em class="markup--em markup--p-em">EditTextPreference</em> and modify it, that it only allows the user to type numbers. I will directly extend the class <em class="markup--em markup--p-em">DialogPreference</em>.</p><p name="e4dd" id="e4dd" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Warning</strong>, the following will contain a lot of code and nearly no images.</p><h4 name="dab8" id="dab8" class="graf graf--h4 graf-after--p">Building Our Dialog’s Layout</h4><p name="51ae" id="51ae" class="graf graf--p graf-after--h4">To create our dialog’s layout, we crate a new layout resource file called <strong class="markup--strong markup--p-strong">pref_dialog_time.xml</strong>. The only thing we need for our dialog, is a <em class="markup--em markup--p-em">TimePicker</em>. So we add it as the root view to our layout file. We then apply the theme modifications from the second part of this tutorial (I have highlighted them).</p><pre name="a034" id="a034" class="graf graf--pre graf-after--p">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;<br>&lt;TimePicker<br>    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;<br>    android:id=&quot;@+id/edit&quot;<br>    android:layout_width=&quot;match_parent&quot;<br>    android:layout_height=&quot;match_parent&quot;<br>    <strong class="markup--strong markup--pre-strong">android:paddingTop=&quot;@dimen/alert_def_padding&quot;<br>    android:paddingBottom=&quot;@dimen/alert_def_padding&quot;<br>    android:theme=&quot;@style/AppAlertDialogContent&quot;</strong> /&gt;</pre><p name="dff9" id="dff9" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Don’t forget</strong> to add the id <em class="markup--em markup--p-em">edit</em>. If you do, your App will crash later.</p><h4 name="85e8" id="85e8" class="graf graf--h4 graf-after--p">Building Our Preference</h4><p name="6a3d" id="6a3d" class="graf graf--p graf-after--h4">Now we can create our custom p<em class="markup--em markup--p-em">reference</em>. Because we want that our p<em class="markup--em markup--p-em">reference </em>opens a dialog with the <em class="markup--em markup--p-em">TimePicker</em>, we need to create a new class called <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">TimePreference</em></strong> which extend <em class="markup--em markup--p-em">DialogPreference</em>.</p><pre name="1e4a" id="1e4a" class="graf graf--pre graf-after--p">import android.support.v7.preference.DialogPreference;</pre><pre name="8b83" id="8b83" class="graf graf--pre graf-after--pre">public class TimePreference extends DialogPreference {<br>    ...<br>}</pre><p name="97f8" id="97f8" class="graf graf--p graf-after--pre">When we have done this, we can add our p<em class="markup--em markup--p-em">reference’s</em> logic. We start with the <strong class="markup--strong markup--p-strong">global variables</strong> which we need in our <em class="markup--em markup--p-em">TimePreference:</em> The <em class="markup--em markup--p-em">TimePicker</em> in our dialog can give us the selected hour and the selected minute as integers. To store this values in a single <em class="markup--em markup--p-em">SharedPreference</em> I decided to convert the time to minutes. I also decided to store the reference to the dialog’s layout in a global variable. That makes it easier to use. Add this to your <em class="markup--em markup--p-em">TimePreference </em>class:</p><pre name="b46e" id="b46e" class="graf graf--pre graf-after--p">private int mTime;<br>private int mDialogLayoutResId = R.layout.<em class="markup--em markup--pre-em">pref_dialog_time</em>;</pre><p name="f666" id="f666" class="graf graf--p graf-after--pre">Now let’s move to the <strong class="markup--strong markup--p-strong">constructors</strong>. We start with the one with the fewest parameters and call the next higher constructor with a default value for the missing attribute. We do this until we reach the last constructor. There we can process all the things we want to do. We can for example read attributes from the <em class="markup--em markup--p-em">AttributeSet</em>. Add this to your <em class="markup--em markup--p-em">TimePreference </em>class:</p><pre name="dd24" id="dd24" class="graf graf--pre graf-after--p">public TimePreference(Context context) {<br>    this(context, null);<br>}</pre><pre name="f57e" id="f57e" class="graf graf--pre graf-after--pre">public TimePreference(Context context, AttributeSet attrs) {<br>    this(context, attrs, 0);<br>}</pre><pre name="9e07" id="9e07" class="graf graf--pre graf-after--pre">public TimePreference(Context context, AttributeSet attrs,<br>        int defStyleAttr) {<br>    this(context, attrs, defStyleAttr, defStyleAttr);<br>}</pre><pre name="93f9" id="93f9" class="graf graf--pre graf-after--pre">public TimePreference(Context context, AttributeSet attrs,<br>        int defStyleAttr, int defStyleRes) {<br>    super(context, attrs, defStyleAttr, defStyleRes);<br><br>    <strong class="markup--strong markup--pre-strong">// Do custom stuff here<br>    // ...<br>    // read attributes etc.</strong><br>}</pre><p name="ce86" id="ce86" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Quick note</strong>: When you replace the 0 in the second constructor with <em class="markup--em markup--p-em">R.attr.dialogPreferenceStyle</em> (For a <em class="markup--em markup--p-em">DialogPreference</em>) or <em class="markup--em markup--p-em">R.attr.preferenceStyle</em> (For any other <em class="markup--em markup--p-em">preference</em>) you won’t face any design issues later. Thanks <a href="https://medium.com/@ivansoriano" data-href="https://medium.com/@ivansoriano" data-anchor-type="2" data-user-id="5f9084077a41" data-action-value="5f9084077a41" data-action="show-user-card" data-action-type="hover" class="markup--user markup--p-user" target="_blank">Ivan Soriano</a></p><p name="751d" id="751d" class="graf graf--p graf-after--p">Next, we need two methods. One to <strong class="markup--strong markup--p-strong">save</strong> the time to the <em class="markup--em markup--p-em">SharedPreferences </em>and one <strong class="markup--strong markup--p-strong">read</strong> the current value. We later call these methods from our dialog. Add this to your <em class="markup--em markup--p-em">TimePreference </em>class:</p><pre name="c4de" id="c4de" class="graf graf--pre graf-after--p">public int getTime() {<br>    return mTime;<br>}</pre><pre name="cfbe" id="cfbe" class="graf graf--pre graf-after--pre">public void setTime(int time) {<br>    mTime = time;</pre><pre name="5295" id="5295" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">    // Save to Shared Preferences</strong><br>    persistInt(time);<br>}</pre><p name="c2f6" id="c2f6" class="graf graf--p graf-after--pre">Now we need to override some other methods. First we need one to <strong class="markup--strong markup--p-strong">read the default value</strong> (we can define one with the <em class="markup--em markup--p-em">android:defaultValue</em> attribute when we use our <em class="markup--em markup--p-em">Preference</em> in our <em class="markup--em markup--p-em">xml/app_preferences.xml</em>). The second method <strong class="markup--strong markup--p-strong">reads our stored value</strong> from the <em class="markup--em markup--p-em">SharedPreferences </em>and saves it to the <em class="markup--em markup--p-em">mTime </em>variable. Add this to your <em class="markup--em markup--p-em">TimePreference </em>class:</p><pre name="aaad" id="aaad" class="graf graf--pre graf-after--p">@Override<br>protected Object onGetDefaultValue(TypedArray a, int index) {<br>    <strong class="markup--strong markup--pre-strong">// Default value from attribute. Fallback value is set to 0.</strong><br>    return a.getInt(index, 0);<br>}</pre><pre name="6ca1" id="6ca1" class="graf graf--pre graf-after--pre">@Override<br>protected void onSetInitialValue(boolean restorePersistedValue,<br>        Object defaultValue) {<br>    <strong class="markup--strong markup--pre-strong">// Read the value. Use the default value if it is not possible.</strong><br>    setTime(restorePersistedValue ?<br>        getPersistedInt(mTime) : (int) defaultValue);<br>}</pre><p name="4c66" id="4c66" class="graf graf--p graf-after--pre">The last thing we need to do, is to set the layout resource for our dialog. We do this by overriding the <em class="markup--em markup--p-em">getDialogLayoutResource </em>method. Add this to your <em class="markup--em markup--p-em">TimePreference </em>class:</p><pre name="909f" id="909f" class="graf graf--pre graf-after--p">@Override<br>public int getDialogLayoutResource() {<br>    return mDialogLayoutResId;<br>}</pre><h4 name="724a" id="724a" class="graf graf--h4 graf-after--pre">Building the Dialog</h4><figure name="5575" id="5575" class="graf graf--figure graf--layoutOutsetLeft graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 525px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75.1%;"></div><img class="graf-image" data-image-id="1*FQYSvF0GgACtrdFb4uGdvQ.png" data-width="1200" data-height="901" data-action="zoom" data-action-value="1*FQYSvF0GgACtrdFb4uGdvQ.png" src="https://cdn-images-1.medium.com/max/600/1*FQYSvF0GgACtrdFb4uGdvQ.png"></div></figure><p name="120a" id="120a" class="graf graf--p graf-after--figure">A small picture to remember how our result should look. Only in case you forgot it after this endless explanation of the code.</p><p name="1c03" id="1c03" class="graf graf--p graf-after--p">Now let us create a dialog like in the picture.</p><p name="72d5" id="72d5" class="graf graf--p graf-after--p">If you have read carefully (I can understand you if you haven’t), you should know that all preference dialogs inherit from one abstract class called <em class="markup--em markup--p-em">PreferenceDialogFragmentCompat</em>. So we create a new class called <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">TimePreferenceFragmentCompat</em></strong><em class="markup--em markup--p-em"> </em>which extends this class.</p><pre name="6f82" id="6f82" class="graf graf--pre graf-after--p">import android.support.v7.preference.PreferenceDialogFragmentCompat;</pre><pre name="6b5f" id="6b5f" class="graf graf--pre graf-after--pre">public class TimePreferenceDialogFragmentCompat<br>        extends PreferenceDialogFragmentCompat {</pre><pre name="6128" id="6128" class="graf graf--pre graf-after--pre">   ...</pre><pre name="6bb5" id="6bb5" class="graf graf--pre graf-after--pre">}</pre><p name="ad40" id="ad40" class="graf graf--p graf-after--pre">We don’t need a special constructor, but we need a static method that creates a <strong class="markup--strong markup--p-strong">new instance</strong> of our <em class="markup--em markup--p-em">TimePreferenceFragmentCompat</em>. To know to which <em class="markup--em markup--p-em">preference </em>this new dialog belongs, we add a String parameter with the key of the <em class="markup--em markup--p-em">preference</em> to our method and pass it (inside a <em class="markup--em markup--p-em">Bundle</em>) to the dialog. We will use this static method later. Add this to your <em class="markup--em markup--p-em">TimePreferenceFragmentCompat</em> class:</p><pre name="94a6" id="94a6" class="graf graf--pre graf-after--p">public static TimePreferenceDialogFragmentCompat newInstance(<br>        String key) {<br>    final TimePreferenceDialogFragmentCompat<br>            fragment = new TimePreferenceDialogFragmentCompat();<br>    final Bundle b = new Bundle(1);<br>    b.putString(<em class="markup--em markup--pre-em">ARG_KEY</em>, key);<br>    fragment.setArguments(b);<br><br>    return fragment;<br>}</pre><p name="0655" id="0655" class="graf graf--p graf-after--pre">Now we need to do something with our <em class="markup--em markup--p-em">TimePicker</em>. We want that it always <strong class="markup--strong markup--p-strong">shows the time</strong> that was stored in the <em class="markup--em markup--p-em">SharedPreferences</em>. We can access the <em class="markup--em markup--p-em">TimePicker </em>from our created layout, after it was is added to the dialog. We can do this in the <em class="markup--em markup--p-em">onBindDialogView </em>method. The <em class="markup--em markup--p-em">getPreference </em>method returns the <em class="markup--em markup--p-em">preference</em> which opened the dialog. Add this to your <em class="markup--em markup--p-em">TimePreferenceFragmentCompat</em> class:</p><pre name="001d" id="001d" class="graf graf--pre graf-after--p">@Override<br>protected void onBindDialogView(View view) {<br>    super.onBindDialogView(view);<br><br>    mTimePicker = (TimePicker) view.findViewById(R.id.<em class="markup--em markup--pre-em">edit</em>);<br><br>    <strong class="markup--strong markup--pre-strong">// Exception when there is no TimePicker</strong><br>    if (mTimePicker == null) {<br>        throw new IllegalStateException(&quot;Dialog view must contain&quot; +<br>                &quot; a TimePicker with id &#39;edit&#39;&quot;);<br>    }<br><br>    <strong class="markup--strong markup--pre-strong">// Get the time from the related Preference</strong><br>    Integer minutesAfterMidnight = null;<br>    DialogPreference preference = getPreference();<br>    if (preference instanceof TimePreference) {<br>        minutesAfterMidnight =<br>                ((TimePreference) preference).getTime();<br>    }<br><br>    <strong class="markup--strong markup--pre-strong">// Set the time to the TimePicker</strong><br>    if (minutesAfterMidnight != null) {<br>        int hours = minutesAfterMidnight / 60;<br>        int minutes = minutesAfterMidnight % 60;<br>        boolean is24hour = DateFormat.<em class="markup--em markup--pre-em">is24HourFormat</em>(getContext());<br><br>        mTimePicker.setIs24HourView(is24hour);<br>        mTimePicker.setCurrentHour(hours);<br>        mTimePicker.setCurrentMinute(minutes);<br>    }<br>}</pre><p name="8192" id="8192" class="graf graf--p graf-after--pre">Every time we open the dialog, it now displays the time which is stored in the <em class="markup--em markup--p-em">SharedPreferences</em> (We still have to do something before we can actually open the dialog).</p><p name="dc72" id="dc72" class="graf graf--p graf-after--p">The last thing for our dialog is, that it should <strong class="markup--strong markup--p-strong">save the selected time</strong> when we click the OK button (positive result). For this, we override the <em class="markup--em markup--p-em">onDialogClosed </em>method. First we calculate the minutes we want to save, and after that, we get our related preference and call the <em class="markup--em markup--p-em">setTime </em>method we have defined there. Add this to your <em class="markup--em markup--p-em">TimePreferenceFragmentCompat</em> class:</p><pre name="89b9" id="89b9" class="graf graf--pre graf-after--p">@Override<br>public void onDialogClosed(boolean positiveResult) {<br>    if (positiveResult) {<br>        <strong class="markup--strong markup--pre-strong">// generate value to save</strong><br>        int hours = mTimePicker.getCurrentHour();<br>        int minutes = mTimePicker.getCurrentMinute();<br>        int minutesAfterMidnight = (hours * 60) + minutes;<br><br>        <strong class="markup--strong markup--pre-strong">// Get the related Preference and save the value</strong><br>        DialogPreference preference = getPreference();<br>        if (preference instanceof TimePreference) {<br>            TimePreference timePreference =<br>                    ((TimePreference) preference);<br>            <strong class="markup--strong markup--pre-strong">// This allows the client to ignore the user value.</strong><br>            if (timePreference.callChangeListener(<br>                    minutesAfterMidnight)) {<br>                <strong class="markup--strong markup--pre-strong">// Save the value</strong><br>                timePreference.setTime(minutesAfterMidnight);<br>            }<br>        }<br>    }<br>}</pre><p name="5edb" id="5edb" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">FINALLY</strong>, we are done with the dialog.</p><h4 name="ab76" id="ab76" class="graf graf--h4 graf-after--p">Let it Open the Dialog</h4><p name="66ca" id="66ca" class="graf graf--p graf-after--h4">There is only one thing left to make it work. If you have read the first part, you know that the dialog must explicitly be opened somewhere. The <em class="markup--em markup--p-em">onDisplayPreferenceDialog</em> method in the <em class="markup--em markup--p-em">PreferenceFragmentCompat </em>is this place. Now go to your <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">SettingsFragment</em></strong> class (it extends <em class="markup--em markup--p-em">PreferenceFragmentCompat)</em> and add the following method. We first try if the <em class="markup--em markup--p-em">Preference</em> that wants to open a dialog is one of our custom <em class="markup--em markup--p-em">preferences</em>. <strong class="markup--strong markup--p-strong">If it is one</strong>, we create a new instance of the related dialog (and pass the preference key to it) and open it. <strong class="markup--strong markup--p-strong">If it is not one</strong> of our custom <em class="markup--em markup--p-em">preferences</em>, we call the method of the super class which handles everything for the predefined <em class="markup--em markup--p-em">DialogPreferences</em>.</p><pre name="4cd1" id="4cd1" class="graf graf--pre graf-after--p">@Override<br>public void onDisplayPreferenceDialog(Preference preference) {<br>    <strong class="markup--strong markup--pre-strong">// Try if the preference is one of our custom Preferences</strong><br>    DialogFragment dialogFragment = null;<br>    if (preference instanceof TimePreference) {<br>        // Create a new instance of TimePreferenceDialogFragment with the key of the related<br>        // Preference<br>        dialogFragment = TimePreferenceDialogFragmentCompat<br>                .<em class="markup--em markup--pre-em">newInstance</em>(preference.getKey());<br>    }<br><br>    // If it was one of our cutom Preferences, show its dialog<br>    if (dialogFragment != null) {<br>        dialogFragment.setTargetFragment(this, 0);<br>        dialogFragment.show(this.getFragmentManager(),<br>                &quot;android.support.v7.preference&quot; +<br>                &quot;.PreferenceFragment.DIALOG&quot;);<br>    }<br>    // Could not be handled here. Try with the super method.<br>    else {<br>        super.onDisplayPreferenceDialog(preference);<br>    }<br>}</pre><h4 name="61d6" id="61d6" class="graf graf--h4 graf-after--pre">Adding it to the Settings Screen</h4><p name="c592" id="c592" class="graf graf--p graf-after--h4">And now, after a lot of coding, we finally have our own <em class="markup--em markup--p-em">preference</em>. We can add it to our <strong class="markup--strong markup--p-strong">xml/app_preferences.xml</strong> like this (replace your.package and the key):</p><pre name="8cc5" id="8cc5" class="graf graf--pre graf-after--p">&lt;<strong class="markup--strong markup--pre-strong">your.package</strong>.TimePreference<br>    android:key=&quot;<strong class="markup--strong markup--pre-strong">key4</strong>&quot;<br>    android:title=&quot;Time Preference&quot;<br>    android:summary=&quot;Time Summary&quot;<br>    android:defaultValue=&quot;90&quot; /&gt;</pre><p name="a2d3" id="a2d3" class="graf graf--p graf-after--pre">And when we open it, it looks like this… (If you have changed the constructors according to the note, you can skip this part)</p><figure name="4a49" id="4a49" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 525px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75%;"></div><img class="graf-image" data-image-id="1*KCNdY9_8t_FZ3HeQrqdTlQ.png" data-width="1200" data-height="900" data-action="zoom" data-action-value="1*KCNdY9_8t_FZ3HeQrqdTlQ.png" src="https://cdn-images-1.medium.com/max/800/1*KCNdY9_8t_FZ3HeQrqdTlQ.png"></div><figcaption class="imageCaption">TimePreference with layout and design issues</figcaption></figure><p name="29ca" id="29ca" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Wait, WHAT?</strong> There are still layout and design issues? Even after applying all the fixes from part 1 and part 2 of this tutorial? <strong class="markup--strong markup--p-strong">YES…</strong></p><h4 name="4a58" id="4a58" class="graf graf--h4 graf-after--p">Fixing the Layout and Design</h4><p name="8802" id="8802" class="graf graf--p graf-after--h4">Fortunately, the solution is relatively simple, when someone tells you how it works. I had to find it out by myself, but you are lucky and <strong class="markup--strong markup--p-strong">I will tell you</strong>.</p><p name="2833" id="2833" class="graf graf--p graf-after--p">Go to your your <strong class="markup--strong markup--p-strong">styles.xml</strong> and add two new styles. The first <em class="markup--em markup--p-em">AppPreference</em> will change the layout of the <em class="markup--em markup--p-em">preference </em>on the Settings Screen to material design. The second one, <em class="markup--em markup--p-em">AppPreference.DialogPreference</em>, inherits from the first and defines the text for the dialog buttons.</p><pre name="f7fd" id="f7fd" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">&lt;!-- Style for an Preference Entry --&gt;</strong><br>&lt;style name=&quot;AppPreference&quot;&gt;<br>    &lt;item name=&quot;android:layout&quot;&gt;@layout/preference_material&lt;/item&gt;<br>&lt;/style&gt;<br><br><strong class="markup--strong markup--pre-strong">&lt;!-- Style for a DialogPreference Entry --&gt;</strong><br>&lt;style name=&quot;AppPreference.DialogPreference&quot;&gt;<br>    &lt;item name=&quot;positiveButtonText&quot;&gt;@android:string/ok&lt;/item&gt;<br>    &lt;item name=&quot;negativeButtonText&quot;&gt;@android:string/cancel&lt;/item&gt;<br>&lt;/style&gt;</pre><p name="b113" id="b113" class="graf graf--p graf-after--pre">After doing this, you can add the style to your custom <em class="markup--em markup--p-em">preference</em> in <strong class="markup--strong markup--p-strong">xml/app_preferences.xml</strong>. For every custom <em class="markup--em markup--p-em">preference </em>which extends <em class="markup--em markup--p-em">DialogPreference </em>you can set <em class="markup--em markup--p-em">AppPreference.DialogPreference</em> as the style. For all others you can use <em class="markup--em markup--p-em">AppPreference</em>. Everything should then automatically be fixed.</p><pre name="9685" id="9685" class="graf graf--pre graf-after--p">&lt;<strong class="markup--strong markup--pre-strong">your.package</strong>.TimePreference<br>    android:key=&quot;<strong class="markup--strong markup--pre-strong">key4</strong>&quot;<br>    android:title=&quot;Time Preference&quot;<br>    android:summary=&quot;Time Summary&quot;<br>    android:defaultValue=&quot;90&quot;<br>    <strong class="markup--strong markup--pre-strong">style=&quot;@style/AppPreference.DialogPreference&quot;</strong> /&gt;</pre><p name="5415" id="5415" class="graf graf--p graf-after--pre">And now, our result looks like this.</p><figure name="7979" id="7979" class="graf graf--figure graf-after--p graf--trailing"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 526px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75.1%;"></div><img class="graf-image" data-image-id="1*JjknpvGZAZfNxjGo6Ywv9Q.png" data-width="1200" data-height="901" data-is-featured="true" data-action="zoom" data-action-value="1*JjknpvGZAZfNxjGo6Ywv9Q.png" src="https://cdn-images-1.medium.com/max/800/1*JjknpvGZAZfNxjGo6Ywv9Q.png"></div><figcaption class="imageCaption">Our final custom TimePreference</figcaption></figure></div></div></section><section name="84f3" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="6cc0" id="6cc0" class="graf graf--p graf--leading">Wow, this was a long and hard way to build a Settings Screen. You should now know, how to apply material design everywhere and how to build custom <em class="markup--em markup--p-em">preferences</em>. I hope I haven’t done mistakes in this part of the tutorial.</p><p name="29ad" id="29ad" class="graf graf--p graf-after--p graf--trailing">I recommend you to always have a look at the Android Developers site <a href="https://developer.android.com/reference/android/support/v7/preference/package-summary.html" data-href="https://developer.android.com/reference/android/support/v7/preference/package-summary.html" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">here</a>, and the site with the source code of the v7.preference library <a href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference" data-href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">here</a>. When you need to build your own <em class="markup--em markup--p-em">preference</em>, just look how they have build the predefined ones and which methods you can use.</p></div></div></section><section name="397d" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="fead" id="fead" class="graf graf--p graf--leading">The <strong class="markup--strong markup--p-strong">fourth Part</strong> of this tutorial series is available below.</p><div name="c7ea" id="c7ea" class="graf graf--mixtapeEmbed graf-after--p graf--trailing"><a href="https://medium.com/@JakobUlbrich/building-an-android-settings-screen-part-4-9558029827b7" data-href="https://medium.com/@JakobUlbrich/building-an-android-settings-screen-part-4-9558029827b7" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/@JakobUlbrich/building-an-android-settings-screen-part-4-9558029827b7"><strong class="markup--strong markup--mixtapeEmbed-strong">Building an Android Settings Screen (Part 4)</strong><br><em class="markup--em markup--mixtapeEmbed-em">How to use a Custom Layout For The Preference Fragment</em>medium.com</a><a href="https://medium.com/@JakobUlbrich/building-an-android-settings-screen-part-4-9558029827b7" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="377bfe6ff6af3274c0286e6f808c5777" data-thumbnail-img-id="1*VcarAKezK2qZOkxezRy5_w.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*VcarAKezK2qZOkxezRy5_w.png);"></a></div></div></div></section><section name="e7c3" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="13e1" id="13e1" class="graf graf--p graf--leading">You can have a look at the <strong class="markup--strong markup--p-strong">project files</strong> on <a href="https://github.com/jakobulbrich/preferences-demo" data-href="https://github.com/jakobulbrich/preferences-demo" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">GitHub</a>.</p><p name="98ec" id="98ec" class="graf graf--p graf-after--p graf--trailing">Thanks for reading and happy coding 💻.</p></div></div></section></div><footer class="u-paddingTop10"><div class="container u-maxWidth740"><div class="row"><div class="col u-size12of12"></div></div><div class="row"><div class="col u-size12of12 js-postTags"><div class="u-paddingBottom10"><ul class="tags tags--postTags tags--borderless"><li><a class="link u-baseColor--link"  href="https://medium.com/tag/android?source=post" data-action-source="post">Android</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/android-app-development?source=post" data-action-source="post">Android App Development</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/android-design?source=post" data-action-source="post">Android Design</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/android-libraries?source=post" data-action-source="post">Android Libraries</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/android-tutorials?source=post" data-action-source="post">Android Tutorials</a></li></ul></div></div></div><div class="row js-postActionsFooter"><div class="postActions col u-size12of12"><div class="u-floatLeft buttonSet buttonSet--withLabels"><div class="buttonSet-inner"><div class="js-actionRecommend" data-post-id="ae9793fd31ec" data-is-icon-29px="true" data-has-recommend-list="true" data-source="post_actions_footer"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/ae9793fd31ec" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"/></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal"  data-action="show-recommends" data-action-value="ae9793fd31ec">56</button></div></div><div class="buttonSet-inner"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  data-action="scroll-to-responses" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"/></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal"  data-action="scroll-to-responses">12</button></div></div><div class="u-floatRight buttonSet buttonSet--narrow"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/></svg></span></button></div></div></div></div><div class="js-postPromotionWrapper postPromotionWrapper" data-location-id="footer_above_post_attribution"></div><div class="container u-maxWidth740 js-postAttributionFooterContainer u-paddingTop20 u-paddingBottom20 u-marginTop10 u-borderTopLightest u-xs-paddingTop10 u-xs-paddingBottom10"><div class="row js-postFooterInfo"><div class="col u-size12of12"><li class="u-block u-paddingBottom18 js-cardUser"><div class="u-marginLeft20 u-floatRight"><span class="followState js-followState buttonSet-inner" data-user-id="73d0266697d8"><button class="button button--small u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/73d0266697d8" data-action-source="footer_card_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="u-tableCell "><a class="link avatar u-baseColor--link"  href="https://medium.com/@JakobUlbrich?source=footer_card" title="Go to the profile of Jakob Ulbrich" aria-label="Go to the profile of Jakob Ulbrich" data-action-source="footer_card" data-user-id="73d0266697d8" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/60/60/1*50pfRWptJGHYxe-dQX_pMg.png" class="avatar-image avatar-image--small" alt="Go to the profile of Jakob Ulbrich"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal"  href="https://medium.com/@JakobUlbrich" property="cc:attributionName" title="Go to the profile of Jakob Ulbrich" aria-label="Go to the profile of Jakob Ulbrich" rel="author cc:attributionUrl" data-user-id="73d0266697d8" dir="auto">Jakob Ulbrich</a></h3></div></li></div></div></div><div class="js-postFooterPlacements"></div><div class="u-padding0 u-clearfix u-backgroundGrayLightest u-print-hide supplementalPostContent js-responsesWrapper"></div><div class="supplementalPostContent js-readNext"></div><div class="supplementalPostContent js-heroPromo"></div></footer></article></main><div class="u-marginAuto u-maxWidth1000"><div class="js-postShareWidget u-foreground u-sm-hide u-transition--fadeOut300 u-fixed"><ul><li class="u-uiTextSemibold u-textAlignCenter u-textColorNormal u-fontSize12 u-textUppercase">Share</li><li class="u-textAlignCenter"><div class="js-actionRecommend" data-post-id="ae9793fd31ec" data-is-icon-29px="true" data-is-vertical="true" data-has-recommend-list="true" data-source="post_share_widget"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/ae9793fd31ec" data-action-source="post_share_widget"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"/></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal  u-block u-marginAuto u-marginTopNegative5"  data-action="show-recommends" data-action-value="ae9793fd31ec">56</button></div></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_share_widget"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/></svg></span></button></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_share_widget"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/></svg></span></button></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton"  title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-in-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/ae9793fd31ec"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"/></svg></span></span></button></li></ul></div></div><div class="u-fixed u-bottom0 u-sizeFullWidth u-backgroundWhite u-boxShadowTop u-borderBox u-paddingTop10 u-paddingBottom10 u-zIndexMetabar u-xs-paddingLeft10 u-xs-paddingRight10 js-stickyFooter"><div class="u-maxWidth700 u-marginAuto u-flexCenter"><div class="u-fontSize16 u-flex1 u-flexCenter"><div class="u-flex0 u-inlineBlock u-paddingRight20 u-xs-paddingRight10"><a class="link avatar u-inline u-baseColor--link"  href="https://medium.com/@JakobUlbrich" data-action="show-user-card" data-action-value="73d0266697d8" data-action-type="hover" data-user-id="73d0266697d8" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/40/40/1*50pfRWptJGHYxe-dQX_pMg.png" class="avatar-image avatar-image--smaller" alt="Go to the profile of Jakob Ulbrich"></a></div><div class="u-flex1 u-inlineBlock"><div class="u-xs-hide">Never miss a story from<strong> Jakob Ulbrich</strong>, when you sign up for Medium. <a class="link link--accent u-accentColor--textNormal u-accentColor--textDarken u-baseColor--link"  href="https://medium.com/@Medium/personalize-your-medium-experience-with-users-publications-tags-26a41ab1ee0c#.hx4zuv3mg" data-action-source="sticky_footer">Learn more</a></div><div class="u-xs-show">Never miss a story from<strong> Jakob Ulbrich</strong></div></div></div><div class="u-marginLeft50 u-xs-marginAuto"><span class="followState js-followState buttonSet-inner" data-user-id="73d0266697d8"><button class="button u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-uiTextSemibold u-textUppercase u-fontSize12"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="sticky_footer"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary is-active u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-uiTextSemibold u-textUppercase u-fontSize12"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/73d0266697d8" data-action-source="sticky_footer_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Get updates</span></button></span></div></div></div></div></div></div><div class="loadingBar"></div><script>// <![CDATA[
window["obvInit"] = function (opt_embedded) {window["obvInit"]["embedded"] = opt_embedded; window["obvInit"]["ready"] = true;}
// ]]></script><script>// <![CDATA[
var GLOBALS = {"audioUrl":"https://d1fcbxp97j4nb2.cloudfront.net","baseUrl":"https://medium.com","buildLabel":"28586-6143d83","currentUser":{"userId":"lo_3ff00feaa0a4","isVerified":false,"subscriberEmail":""},"currentUserHasUnverifiedEmail":false,"isAuthenticated":false,"isCurrentUserVerified":false,"mediumTwitterScreenName":"medium","miroUrl":"https://cdn-images-1.medium.com","moduleUrls":{"base":"https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.2nXtJ8XknWJqOjh2ZNHRVw.js","notes":"https://cdn-static-1.medium.com/_/fp/gen-js/main-notes.bundle.AouowiblLn4SBKZF6cWDtA.js","posters":"https://cdn-static-1.medium.com/_/fp/gen-js/main-posters.bundle.4rYp3nph7xNXmlmak5XWxQ.js","common-async":"https://cdn-static-1.medium.com/_/fp/gen-js/main-common-async.bundle.R35emyz9xZL7YdHbIl-SvQ.js","stats":"https://cdn-static-1.medium.com/_/fp/gen-js/main-stats.bundle.XUyD-cfC9DG2nc9iq5x7GA.js","home-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-home-screens.bundle.0oM8iNH9LgWeJY00O_ao2Q.js","misc-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-misc-screens.bundle.caQfKUCZ18Wg2IbFBoaXiA.js"},"previewConfig":{"weightThreshold":1,"weightImageParagraph":0.51,"weightIframeParagraph":0.8,"weightTextParagraph":0.08,"weightEmptyParagraph":0,"weightP":0.003,"weightH":0.005,"weightBq":0.003,"minPTextLength":60,"truncateBoundaryChars":20,"detectTitle":true,"detectTitleLevThreshold":0.15},"productName":"Medium","supportsEdit":false,"termsUrl":"//medium.com/policy/9db0094a1e0f","textshotHost":"textshot.medium.com","transactionId":"1492396369194:d4e9fe4f1eb4","useragent":{"browser":"python requests","family":"","os":"","version":2.2,"supportsDesktopEdit":false,"supportsInteract":false,"supportsView":true,"isMobile":false,"isTablet":false,"isNative":false,"supportsFileAPI":false,"isTier1":false,"clientVersion":"","unknownParagraphsBad":false,"clientChannel":"","supportsRealScrollEvents":false,"supportsVhUnits":false,"ruinsViewportSections":false,"supportsHtml5Video":false,"supportsMagicUnderlines":false,"isWebView":false,"isFacebookWebView":false,"supportsProgressiveMedia":false,"supportsPromotedPosts":true,"isBot":false,"isNativeIphone":false,"supportsCssVariables":false,"supportsScrollableMetabar":false},"variants":{"allow_access":true,"allow_signup":true,"allow_test_auth":"disallow","signin_services":"twitter,facebook,google,email,google-fastidv","signup_services":"twitter,facebook,google,email,google-fastidv","android_rating_prompt_recommend_threshold":5,"google_sign_in_android":true,"enable_onboarding":true,"ios_custom_miro_url":"https://cdn-images-1.medium.com","reengagement_notification_duration":3,"enable_adsnative_integration":true,"browsable_stream_config_bucket":"curated-topics","ios_small_post_preview_truncation_length":5.5,"ios_large_post_preview_truncation_length":5.5,"disable_ios_catalog_badging":true,"enable_series_creation":true,"enable_your_series_pages":true,"enable_productionized_series":true,"enable_dedicated_series_tab_api_ios":true,"enable_clap_milestone_notifications":true,"enable_series_stats_page":true,"enable_prepublish_share_settings":true,"enable_direct_auth_connect":true,"enable_post_import":true,"enable_sponsored_post_labelling":true,"enable_logged_in_follow_on_collection_post":true,"promoted_story_placement_locations":"POST_PAGE_FOOTER","show_topics":true,"enable_search_collection_by_tag_recency_filter":true,"search_collection_by_tag_filter_min_votes":10,"enable_sms_app_promo":true,"enable_export_members":true,"enable_series_card_background_creation":true,"enable_loyal_writers_onboarding":true,"enable_onboarding_hybrid_users":true,"enable_ios_onboarding_notifications":true,"can_see_subscription_branding":true,"enable_subscriptions_landing_page":true,"enable_partner_program_landing_page":true,"enable_hide_broken_links":true,"enable_pay_for_custom_domain":true,"enable_promos_from_dynamo":true,"enable_promos_in_placement":true,"enable_series_promo_in_email":true,"enable_sms":true,"enable_series_in_user_profiles":true,"enable_new_logged_out_bento_operation":true,"enable_topic_brief_relations":true},"xsrfToken":"","iosAppId":"828256236","supportEmail":"yourfriends@medium.com","teamName":"Team Medium","fp":{"/icons/favicon.svg":"https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg","/icons/favicon-dev-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-dev-editor.YKKRxBO8EMvIqhyCwIiJeQ.ico","/icons/favicon-hatch-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-hatch-editor.BuEyHIqlyh2s_XEk4Rl32Q.ico","/icons/favicon-medium-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrl":"https://medium.com","imageUploadSizeMb":25,"isAuthDomainRequest":true,"algoliaApiEndpoint":"https://MQ57UUUQZ2-dsn.algolia.net","algoliaAppId":"MQ57UUUQZ2","algoliaSearchOnlyApiKey":"394474ced050e3911ae2249ecc774921","iosAppStoreUrl":"https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8","iosAppLinkBaseUrl":"medium:","algoliaIndexPrefix":"medium_","androidPlayStoreUrl":"https://play.google.com/store/apps/details?id=com.medium.reader","googleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","androidPackage":"com.medium.reader","androidPlayStoreMarketScheme":"market://details?id=com.medium.reader","googleAuthUri":"https://accounts.google.com/o/oauth2/auth","androidScheme":"medium","layoutData":{"useDynamicScripts":false,"googleAnalyticsTrackingCode":"UA-24232453-2","jsShivUrl":"https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js","useDynamicCss":false,"faviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium.TAS6uQ-Y7kcKgi0xjcYHXw.ico","faviconImageId":"1*W0nmth_X8nFKjn6BZ388UQ.png","fontSets":[{"id":1,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-base.by5Oi_VbnwEIvhnWIsuUjA.css"},{"id":4,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-lazy-base.g08Jj5TZPAiuPWj5YNUsSg.css"},{"id":6,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-latin-base.141WxxXgxGxNcfeza73H7Q.css"},{"id":7,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-lazy-latin-base.jMU532QDmysQMOINr-cr2A.css"}],"editorFaviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrlRev":"moc.muidem//:sptth","isDnt":false,"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","archiveUploadSizeMb":100,"paymentData":{"currencies":{"1":{"label":"US Dollar","external":"usd"}},"countries":{"1":{"label":"United States of America","external":"US"}},"accountTypes":{"1":{"label":"Individual","external":"individual"},"2":{"label":"Company","external":"company"}}},"previewConfig2":{"weightThreshold":1,"weightImageParagraph":0.05,"raiseImage":true,"enforceHeaderHierarchy":true,"isImageInsetRight":true},"isAmp":false,"iosScheme":"medium","isSwBoot":false,"lightstep":{"accessToken":"ce5be895bef60919541332990ac9fef2","carrier":"{\"ot-tracer-spanid\":\"3a06501b5af5b62e\",\"ot-tracer-traceid\":\"0020ed6043289919\",\"ot-tracer-sampled\":\"true\"}","host":"collector-medium.lightstep.com"},"facebook":{"key":"542599432471018","secret":"c14df7146e9052a1131f3c900c1f0644","token":"542599432471018|1JqjIwxSfY9jOt_KwjWEl1R7T6I","namespace":"medium-com","scope":{"default":["public_profile","email","user_friends"],"connect":["public_profile","email","user_friends"],"login":["public_profile","email","user_friends"],"share":["public_profile","email","user_friends","publish_actions"]},"smartPublishWhitelistedPublications":["bcc38c8f6edf","f3726e2a5878","828a270689e","81c7d351c056","f30e42fd7ff8","8bf1d7d3081b","d16afa0ae7c","d8f3f6ad9c31","e74de0cedea9","15f753907972","c8c6a6b01ebd","3412b9729488","2ce4bbcf83bb","544c7006046e","7bfcdbc6b30a","a268fd916824","458a773bccd2"],"instantArticles":{"published":true,"developmentMode":false}},"mailingListArchiveUploadSizeMb":2,"availableMembershipPlans":[],"editorsPicksTopicId":"3985d2a191c5","popularOnMediumTopicId":"9d34e48ecf94","memberContentTopicId":"13d7efd82fb2","isDoNotAuth":false,"goldfinchUrl":"https://goldfinch.medium.com"}
// ]]></script><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.2nXtJ8XknWJqOjh2ZNHRVw.js" async></script><script>// <![CDATA[
window["obvInit"]({"value":{"id":"ae9793fd31ec","versionId":"9f33d39b79c7","creatorId":"73d0266697d8","creator":{"userId":"73d0266697d8","name":"Jakob Ulbrich","username":"JakobUlbrich","createdAt":1456964903375,"lastPostCreatedAt":1490290514279,"imageId":"1*50pfRWptJGHYxe-dQX_pMg.png","backgroundImageId":"","bio":"","twitterScreenName":"","socialStats":{"userId":"73d0266697d8","usersFollowedCount":15,"usersFollowedByCount":269,"type":"SocialStats"},"social":{"userId":"lo_98fc7bde6f4d","targetUserId":"73d0266697d8","type":"Social"},"facebookAccountId":"","allowNotes":1,"type":"User"},"homeCollectionId":"","title":"Building an Android Settings Screen (Part 3)","detectedLanguage":"en","latestVersion":"9f33d39b79c7","latestPublishedVersion":"9f33d39b79c7","hasUnpublishedEdits":false,"latestRev":2588,"createdAt":1464548725387,"updatedAt":1477183134613,"acceptedAt":0,"firstPublishedAt":1464725374464,"latestPublishedAt":1477183133926,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"How to Create Custom Preferences","bodyModel":{"paragraphs":[{"name":"d6ce","type":3,"text":"Building an Android Settings Screen (Part 3)","markups":[]},{"name":"8120","type":13,"text":"How to Create Custom Preferences","markups":[]},{"name":"6b43","type":4,"text":"Fixing and Extending the android.support.v7.preference Library","markups":[],"layout":5,"metadata":{"id":"1*8dPldA5KlCFUX4u71G89lQ.png","originalWidth":2500,"originalHeight":800}},{"name":"9a9e","type":1,"text":"In the first part of this tutorial we already built and themed our Settings Screen and in the second part we fixed the layout and the theme of the dialogs. Now is the time to extend the the v7.preference library to build a custom preference. So let’s get started.","markups":[{"type":3,"start":7,"end":17,"href":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-1-5959aa49337c","title":"","rel":"","anchorType":0},{"type":3,"start":94,"end":105,"href":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d","title":"","rel":"","anchorType":0},{"type":1,"start":175,"end":181},{"type":1,"start":223,"end":240},{"type":2,"start":230,"end":240}]},{"name":"f9b0","type":3,"text":"Understanding How the Library Works","markups":[]},{"name":"2f55","type":1,"text":"Since the v7.preference library only provides four basic preferences (five when you include the v14.preference library), you are likely to need a custom preference. But you should not start coding without knowing what you have to do. So let’s take a look at the structure of the v7.preference library to understand how it works. Because the following explains the basics of what we do later, you should read this carefully. (If you are crazy and want to discover this by your own, you can find the source code right here). I will only focus on the important things.","markups":[{"type":3,"start":510,"end":520,"href":"https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/src/android/support/v7/preference","title":"","rel":"","anchorType":0},{"type":1,"start":403,"end":422},{"type":2,"start":57,"end":68},{"type":2,"start":153,"end":163}]},{"name":"c334","type":13,"text":"How the Library Is Structured","markups":[]},{"name":"d788","type":4,"text":"The library structure (simplified)","markups":[],"layout":1,"metadata":{"id":"1*uuP5q8sh_DTt1a-2dmZkBg.png","originalWidth":1200,"originalHeight":900}},{"name":"96ea","type":1,"text":"As you can see in the image, there are four important main classes we should know:","markups":[{"type":1,"start":39,"end":66}]},{"name":"5539","type":9,"text":"PreferenceFragmentCompat: This is the fragment for our main Settings Screen. (Notice that this is abstract class, which means we can not instantiate it directly, but we can extend it).","markups":[{"type":1,"start":0,"end":24},{"type":2,"start":0,"end":24}]},{"name":"730c","type":9,"text":"Preference: This is a basic preference which can appear on our Settings Screen. All predefined preferences inherit (indirectly) from this class.","markups":[{"type":1,"start":0,"end":10},{"type":2,"start":0,"end":10},{"type":2,"start":95,"end":106}]},{"name":"2a47","type":9,"text":"PreferenceDialogFragmentCompat: This is a basic dialog for a preference. All dialogs of the preferences inherit from this class. (Notice that this is abstract class, which means we can not instantiate it directly, but we can extend it. And yes, this must be the longest class name ever.)","markups":[{"type":1,"start":0,"end":30},{"type":2,"start":0,"end":30}]},{"name":"2894","type":9,"text":"PreferenceManager: This provides the access to the SharedPreferences. The PreferenceFragmentCompat and all Preferences that belong to it, share the same PreferenceManger.","markups":[{"type":1,"start":0,"end":17},{"type":2,"start":0,"end":17},{"type":2,"start":51,"end":68},{"type":2,"start":74,"end":98},{"type":2,"start":153,"end":169}]},{"name":"6ddd","type":1,"text":"Preferences are separated in two different types: The TwoStatePreferences which can only toggle and store a boolean value and the DialogPreferences which provide a dialog, the user can interact with. (Notice that these two classes are abstract).","markups":[{"type":1,"start":54,"end":73},{"type":1,"start":130,"end":147},{"type":2,"start":0,"end":11},{"type":2,"start":54,"end":73},{"type":2,"start":130,"end":147}]},{"name":"de7c","type":13,"text":"How the Dialogs Are Opened","markups":[]},{"name":"9220","type":1,"text":"The dialog classes are separated from their related DialogPreference classes. For example, we have the EditTextPreference and its related dialog EditTextDialogFragmentCompat in two separated classes. This means, that the dialog must explicitly be opened somewhere. When we read through the source of the DialogPreference (You can find it here) we can discover the following piece of code.","markups":[{"type":3,"start":338,"end":342,"href":"https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/src/android/support/v7/preference/DialogPreference.java","title":"","rel":"","anchorType":0},{"type":1,"start":23,"end":32},{"type":2,"start":52,"end":68},{"type":2,"start":103,"end":121},{"type":2,"start":145,"end":173},{"type":2,"start":304,"end":320}]},{"name":"57bb","type":8,"text":"@Override\nprotected void onClick() {\n    getPreferenceManager().showDialog(this);\n}","markups":[]},{"name":"b4ae","type":1,"text":"And in the PreferenceManager we can find the following pieces of code.","markups":[{"type":2,"start":11,"end":28}]},{"name":"d769","type":8,"text":"public void showDialog(Preference preference) {\n    if (mOnDisplayPreferenceDialogListener != null) {\n        mOnDisplayPreferenceDialogListener\n            .onDisplayPreferenceDialog(preference);\n    }\n}","markups":[]},{"name":"27a0","type":8,"text":"...","markups":[]},{"name":"6db6","type":8,"text":"public interface OnDisplayPreferenceDialogListener {\n    void onDisplayPreferenceDialog(Preference preference);\n}","markups":[]},{"name":"bf44","type":1,"text":"It says us, that if we click on a DialogPreference, it calls a method in the PreferenceManger to show the dialog for this preference. The PreferenceManager then redirects the call to a registered Listener. The PreferenceFragmentCompat implements the interface provided by the PreferenceManager, so it can register itself as the Listener for the dialogs.","markups":[{"type":1,"start":117,"end":121},{"type":2,"start":34,"end":50},{"type":2,"start":77,"end":93},{"type":2,"start":117,"end":121},{"type":2,"start":122,"end":132},{"type":2,"start":138,"end":155},{"type":2,"start":210,"end":234}]},{"name":"0cc0","type":1,"text":"In summary, when we click on a DialogPreference, we end up in the onDisplayPreferenceDialog(Preference preference) method of the PreferenceFragmentCompat, which we need to override to open a custom dialog.","markups":[{"type":1,"start":0,"end":10},{"type":2,"start":66,"end":114},{"type":2,"start":129,"end":153}]},{"name":"0644","type":3,"text":"Building a Custom Preference","markups":[]},{"name":"88de","type":1,"text":"I have decided to create a custom TimePreference as an example here. It will open a dialog and let the user select a specific time.","markups":[{"type":1,"start":34,"end":48},{"type":2,"start":34,"end":48}]},{"name":"e7cd","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*FQYSvF0GgACtrdFb4uGdvQ.png","originalWidth":1200,"originalHeight":901}},{"name":"58fc","type":1,"text":"When you want to create a preference that is very similar to an existing one, you can perhaps extend and modify the existing preference. For example when you want a NumberPreference, you can extend the EditTextPreference and modify it, that it only allows the user to type numbers. I will directly extend the class DialogPreference.","markups":[{"type":1,"start":165,"end":181},{"type":2,"start":26,"end":36},{"type":2,"start":125,"end":135},{"type":2,"start":202,"end":220},{"type":2,"start":315,"end":331}]},{"name":"e4dd","type":1,"text":"Warning, the following will contain a lot of code and nearly no images.","markups":[{"type":1,"start":0,"end":7}]},{"name":"dab8","type":13,"text":"Building Our Dialog’s Layout","markups":[]},{"name":"51ae","type":1,"text":"To create our dialog’s layout, we crate a new layout resource file called pref_dialog_time.xml. The only thing we need for our dialog, is a TimePicker. So we add it as the root view to our layout file. We then apply the theme modifications from the second part of this tutorial (I have highlighted them).","markups":[{"type":1,"start":74,"end":94},{"type":2,"start":140,"end":150}]},{"name":"a034","type":8,"text":"\x3c?xml version=\"1.0\" encoding=\"utf-8\"?\x3e\n\x3cTimePicker\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:id=\"@+id/edit\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:paddingTop=\"@dimen/alert_def_padding\"\n    android:paddingBottom=\"@dimen/alert_def_padding\"\n    android:theme=\"@style/AppAlertDialogContent\" /\x3e","markups":[{"type":1,"start":226,"end":373}]},{"name":"dff9","type":1,"text":"Don’t forget to add the id edit. If you do, your App will crash later.","markups":[{"type":1,"start":0,"end":12},{"type":2,"start":27,"end":31}]},{"name":"85e8","type":13,"text":"Building Our Preference","markups":[]},{"name":"6a3d","type":1,"text":"Now we can create our custom preference. Because we want that our preference opens a dialog with the TimePicker, we need to create a new class called TimePreference which extend DialogPreference.","markups":[{"type":1,"start":150,"end":164},{"type":2,"start":30,"end":39},{"type":2,"start":67,"end":77},{"type":2,"start":101,"end":111},{"type":2,"start":150,"end":164},{"type":2,"start":178,"end":194}]},{"name":"1e4a","type":8,"text":"import android.support.v7.preference.DialogPreference;","markups":[]},{"name":"8b83","type":8,"text":"public class TimePreference extends DialogPreference {\n    ...\n}","markups":[]},{"name":"97f8","type":1,"text":"When we have done this, we can add our preference’s logic. We start with the global variables which we need in our TimePreference: The TimePicker in our dialog can give us the selected hour and the selected minute as integers. To store this values in a single SharedPreference I decided to convert the time to minutes. I also decided to store the reference to the dialog’s layout in a global variable. That makes it easier to use. Add this to your TimePreference class:","markups":[{"type":1,"start":77,"end":93},{"type":2,"start":40,"end":51},{"type":2,"start":115,"end":130},{"type":2,"start":135,"end":145},{"type":2,"start":260,"end":276},{"type":2,"start":448,"end":463}]},{"name":"b46e","type":8,"text":"private int mTime;\nprivate int mDialogLayoutResId = R.layout.pref_dialog_time;","markups":[{"type":2,"start":61,"end":77}]},{"name":"f666","type":1,"text":"Now let’s move to the constructors. We start with the one with the fewest parameters and call the next higher constructor with a default value for the missing attribute. We do this until we reach the last constructor. There we can process all the things we want to do. We can for example read attributes from the AttributeSet. Add this to your TimePreference class:","markups":[{"type":1,"start":22,"end":34},{"type":2,"start":313,"end":325},{"type":2,"start":344,"end":359}]},{"name":"dd24","type":8,"text":"public TimePreference(Context context) {\n    this(context, null);\n}","markups":[]},{"name":"f57e","type":8,"text":"public TimePreference(Context context, AttributeSet attrs) {\n    this(context, attrs, 0);\n}","markups":[]},{"name":"9e07","type":8,"text":"public TimePreference(Context context, AttributeSet attrs,\n        int defStyleAttr) {\n    this(context, attrs, defStyleAttr, defStyleAttr);\n}","markups":[]},{"name":"93f9","type":8,"text":"public TimePreference(Context context, AttributeSet attrs,\n        int defStyleAttr, int defStyleRes) {\n    super(context, attrs, defStyleAttr, defStyleRes);\n\n    // Do custom stuff here\n    // ...\n    // read attributes etc.\n}","markups":[{"type":1,"start":163,"end":225,"href":"","title":"","rel":"","name":"","anchorType":0,"creatorIds":[],"userId":""}]},{"name":"ce86","type":1,"text":"Quick note: When you replace the 0 in the second constructor with R.attr.dialogPreferenceStyle (For a DialogPreference) or R.attr.preferenceStyle (For any other preference) you won’t face any design issues later. Thanks Ivan Soriano","markups":[{"type":3,"start":220,"end":232,"anchorType":2,"userId":"5f9084077a41"},{"type":1,"start":0,"end":10},{"type":2,"start":66,"end":94},{"type":2,"start":102,"end":118},{"type":2,"start":123,"end":145},{"type":2,"start":161,"end":171}]},{"name":"751d","type":1,"text":"Next, we need two methods. One to save the time to the SharedPreferences and one read the current value. We later call these methods from our dialog. Add this to your TimePreference class:","markups":[{"type":1,"start":34,"end":38},{"type":1,"start":81,"end":85},{"type":2,"start":55,"end":73},{"type":2,"start":167,"end":182}]},{"name":"c4de","type":8,"text":"public int getTime() {\n    return mTime;\n}","markups":[]},{"name":"cfbe","type":8,"text":"public void setTime(int time) {\n    mTime = time;","markups":[]},{"name":"5295","type":8,"text":"    // Save to Shared Preferences\n    persistInt(time);\n}","markups":[{"type":1,"start":0,"end":33}]},{"name":"c2f6","type":1,"text":"Now we need to override some other methods. First we need one to read the default value (we can define one with the android:defaultValue attribute when we use our Preference in our xml/app_preferences.xml). The second method reads our stored value from the SharedPreferences and saves it to the mTime variable. Add this to your TimePreference class:","markups":[{"type":1,"start":65,"end":87},{"type":1,"start":225,"end":247},{"type":2,"start":116,"end":136},{"type":2,"start":163,"end":173},{"type":2,"start":181,"end":204},{"type":2,"start":257,"end":275},{"type":2,"start":295,"end":301},{"type":2,"start":328,"end":343}]},{"name":"aaad","type":8,"text":"@Override\nprotected Object onGetDefaultValue(TypedArray a, int index) {\n    // Default value from attribute. Fallback value is set to 0.\n    return a.getInt(index, 0);\n}","markups":[{"type":1,"start":76,"end":136}]},{"name":"6ca1","type":8,"text":"@Override\nprotected void onSetInitialValue(boolean restorePersistedValue,\n        Object defaultValue) {\n    // Read the value. Use the default value if it is not possible.\n    setTime(restorePersistedValue ?\n        getPersistedInt(mTime) : (int) defaultValue);\n}","markups":[{"type":1,"start":109,"end":172}]},{"name":"4c66","type":1,"text":"The last thing we need to do, is to set the layout resource for our dialog. We do this by overriding the getDialogLayoutResource method. Add this to your TimePreference class:","markups":[{"type":2,"start":105,"end":129},{"type":2,"start":154,"end":169}]},{"name":"909f","type":8,"text":"@Override\npublic int getDialogLayoutResource() {\n    return mDialogLayoutResId;\n}","markups":[]},{"name":"724a","type":13,"text":"Building the Dialog","markups":[]},{"name":"5575","type":4,"text":"","markups":[],"layout":4,"metadata":{"id":"1*FQYSvF0GgACtrdFb4uGdvQ.png","originalWidth":1200,"originalHeight":901}},{"name":"120a","type":1,"text":"A small picture to remember how our result should look. Only in case you forgot it after this endless explanation of the code.","markups":[]},{"name":"1c03","type":1,"text":"Now let us create a dialog like in the picture.","markups":[]},{"name":"72d5","type":1,"text":"If you have read carefully (I can understand you if you haven’t), you should know that all preference dialogs inherit from one abstract class called PreferenceDialogFragmentCompat. So we create a new class called TimePreferenceFragmentCompat which extends this class.","markups":[{"type":1,"start":213,"end":241},{"type":2,"start":149,"end":179},{"type":2,"start":213,"end":242}]},{"name":"6f82","type":8,"text":"import android.support.v7.preference.PreferenceDialogFragmentCompat;","markups":[]},{"name":"6b5f","type":8,"text":"public class TimePreferenceDialogFragmentCompat\n        extends PreferenceDialogFragmentCompat {","markups":[]},{"name":"6128","type":8,"text":"   ...","markups":[]},{"name":"6bb5","type":8,"text":"}","markups":[]},{"name":"ad40","type":1,"text":"We don’t need a special constructor, but we need a static method that creates a new instance of our TimePreferenceFragmentCompat. To know to which preference this new dialog belongs, we add a String parameter with the key of the preference to our method and pass it (inside a Bundle) to the dialog. We will use this static method later. Add this to your TimePreferenceFragmentCompat class:","markups":[{"type":1,"start":80,"end":92},{"type":2,"start":100,"end":128},{"type":2,"start":147,"end":158},{"type":2,"start":229,"end":239},{"type":2,"start":276,"end":282},{"type":2,"start":354,"end":382}]},{"name":"94a6","type":8,"text":"public static TimePreferenceDialogFragmentCompat newInstance(\n        String key) {\n    final TimePreferenceDialogFragmentCompat\n            fragment = new TimePreferenceDialogFragmentCompat();\n    final Bundle b = new Bundle(1);\n    b.putString(ARG_KEY, key);\n    fragment.setArguments(b);\n\n    return fragment;\n}","markups":[{"type":2,"start":246,"end":253}]},{"name":"0655","type":1,"text":"Now we need to do something with our TimePicker. We want that it always shows the time that was stored in the SharedPreferences. We can access the TimePicker from our created layout, after it was is added to the dialog. We can do this in the onBindDialogView method. The getPreference method returns the preference which opened the dialog. Add this to your TimePreferenceFragmentCompat class:","markups":[{"type":1,"start":72,"end":86},{"type":2,"start":37,"end":47},{"type":2,"start":110,"end":127},{"type":2,"start":147,"end":158},{"type":2,"start":242,"end":259},{"type":2,"start":271,"end":285},{"type":2,"start":304,"end":314},{"type":2,"start":357,"end":385}]},{"name":"001d","type":8,"text":"@Override\nprotected void onBindDialogView(View view) {\n    super.onBindDialogView(view);\n\n    mTimePicker = (TimePicker) view.findViewById(R.id.edit);\n\n    // Exception when there is no TimePicker\n    if (mTimePicker == null) {\n        throw new IllegalStateException(\"Dialog view must contain\" +\n                \" a TimePicker with id 'edit'\");\n    }\n\n    // Get the time from the related Preference\n    Integer minutesAfterMidnight = null;\n    DialogPreference preference = getPreference();\n    if (preference instanceof TimePreference) {\n        minutesAfterMidnight =\n                ((TimePreference) preference).getTime();\n    }\n\n    // Set the time to the TimePicker\n    if (minutesAfterMidnight != null) {\n        int hours = minutesAfterMidnight / 60;\n        int minutes = minutesAfterMidnight % 60;\n        boolean is24hour = DateFormat.is24HourFormat(getContext());\n\n        mTimePicker.setIs24HourView(is24hour);\n        mTimePicker.setCurrentHour(hours);\n        mTimePicker.setCurrentMinute(minutes);\n    }\n}","markups":[{"type":1,"start":156,"end":196},{"type":1,"start":357,"end":400},{"type":1,"start":640,"end":673},{"type":2,"start":144,"end":148},{"type":2,"start":848,"end":862}]},{"name":"8192","type":1,"text":"Every time we open the dialog, it now displays the time which is stored in the SharedPreferences (We still have to do something before we can actually open the dialog).","markups":[{"type":2,"start":79,"end":96}]},{"name":"dc72","type":1,"text":"The last thing for our dialog is, that it should save the selected time when we click the OK button (positive result). For this, we override the onDialogClosed method. First we calculate the minutes we want to save, and after that, we get our related preference and call the setTime method we have defined there. Add this to your TimePreferenceFragmentCompat class:","markups":[{"type":1,"start":49,"end":71},{"type":2,"start":145,"end":160},{"type":2,"start":275,"end":283},{"type":2,"start":330,"end":358}]},{"name":"89b9","type":8,"text":"@Override\npublic void onDialogClosed(boolean positiveResult) {\n    if (positiveResult) {\n        // generate value to save\n        int hours = mTimePicker.getCurrentHour();\n        int minutes = mTimePicker.getCurrentMinute();\n        int minutesAfterMidnight = (hours * 60) + minutes;\n\n        // Get the related Preference and save the value\n        DialogPreference preference = getPreference();\n        if (preference instanceof TimePreference) {\n            TimePreference timePreference =\n                    ((TimePreference) preference);\n            // This allows the client to ignore the user value.\n            if (timePreference.callChangeListener(\n                    minutesAfterMidnight)) {\n                // Save the value\n                timePreference.setTime(minutesAfterMidnight);\n            }\n        }\n    }\n}","markups":[{"type":1,"start":97,"end":122},{"type":1,"start":295,"end":343},{"type":1,"start":558,"end":609},{"type":1,"start":722,"end":739}]},{"name":"5edb","type":1,"text":"FINALLY, we are done with the dialog.","markups":[{"type":1,"start":0,"end":7}]},{"name":"ab76","type":13,"text":"Let it Open the Dialog","markups":[]},{"name":"66ca","type":1,"text":"There is only one thing left to make it work. If you have read the first part, you know that the dialog must explicitly be opened somewhere. The onDisplayPreferenceDialog method in the PreferenceFragmentCompat is this place. Now go to your SettingsFragment class (it extends PreferenceFragmentCompat) and add the following method. We first try if the Preference that wants to open a dialog is one of our custom preferences. If it is one, we create a new instance of the related dialog (and pass the preference key to it) and open it. If it is not one of our custom preferences, we call the method of the super class which handles everything for the predefined DialogPreferences.","markups":[{"type":1,"start":240,"end":256},{"type":1,"start":424,"end":436},{"type":1,"start":534,"end":550},{"type":2,"start":145,"end":170},{"type":2,"start":185,"end":210},{"type":2,"start":240,"end":256},{"type":2,"start":275,"end":300},{"type":2,"start":351,"end":361},{"type":2,"start":411,"end":422},{"type":2,"start":565,"end":576},{"type":2,"start":660,"end":677}]},{"name":"4cd1","type":8,"text":"@Override\npublic void onDisplayPreferenceDialog(Preference preference) {\n    // Try if the preference is one of our custom Preferences\n    DialogFragment dialogFragment = null;\n    if (preference instanceof TimePreference) {\n        // Create a new instance of TimePreferenceDialogFragment with the key of the related\n        // Preference\n        dialogFragment = TimePreferenceDialogFragmentCompat\n                .newInstance(preference.getKey());\n    }\n\n    // If it was one of our cutom Preferences, show its dialog\n    if (dialogFragment != null) {\n        dialogFragment.setTargetFragment(this, 0);\n        dialogFragment.show(this.getFragmentManager(),\n                \"android.support.v7.preference\" +\n                \".PreferenceFragment.DIALOG\");\n    }\n    // Could not be handled here. Try with the super method.\n    else {\n        super.onDisplayPreferenceDialog(preference);\n    }\n}","markups":[{"type":1,"start":77,"end":134},{"type":2,"start":417,"end":428}]},{"name":"61d6","type":13,"text":"Adding it to the Settings Screen","markups":[]},{"name":"c592","type":1,"text":"And now, after a lot of coding, we finally have our own preference. We can add it to our xml/app_preferences.xml like this (replace your.package and the key):","markups":[{"type":1,"start":89,"end":112},{"type":2,"start":56,"end":66}]},{"name":"8cc5","type":8,"text":"\x3cyour.package.TimePreference\n    android:key=\"key4\"\n    android:title=\"Time Preference\"\n    android:summary=\"Time Summary\"\n    android:defaultValue=\"90\" /\x3e","markups":[{"type":1,"start":1,"end":13},{"type":1,"start":46,"end":50}]},{"name":"a2d3","type":1,"text":"And when we open it, it looks like this… (If you have changed the constructors according to the note, you can skip this part)","markups":[]},{"name":"4a49","type":4,"text":"TimePreference with layout and design issues","markups":[],"layout":1,"metadata":{"id":"1*KCNdY9_8t_FZ3HeQrqdTlQ.png","originalWidth":1200,"originalHeight":900}},{"name":"29ca","type":1,"text":"Wait, WHAT? There are still layout and design issues? Even after applying all the fixes from part 1 and part 2 of this tutorial? YES…","markups":[{"type":1,"start":0,"end":11},{"type":1,"start":129,"end":133}]},{"name":"4a58","type":13,"text":"Fixing the Layout and Design","markups":[]},{"name":"8802","type":1,"text":"Fortunately, the solution is relatively simple, when someone tells you how it works. I had to find it out by myself, but you are lucky and I will tell you.","markups":[{"type":1,"start":139,"end":154}]},{"name":"2833","type":1,"text":"Go to your your styles.xml and add two new styles. The first AppPreference will change the layout of the preference on the Settings Screen to material design. The second one, AppPreference.DialogPreference, inherits from the first and defines the text for the dialog buttons.","markups":[{"type":1,"start":16,"end":26},{"type":2,"start":61,"end":74},{"type":2,"start":105,"end":116},{"type":2,"start":175,"end":205}]},{"name":"f7fd","type":8,"text":"\x3c!-- Style for an Preference Entry --\x3e\n\x3cstyle name=\"AppPreference\"\x3e\n    \x3citem name=\"android:layout\"\x3e@layout/preference_material\x3c/item\x3e\n\x3c/style\x3e\n\n\x3c!-- Style for a DialogPreference Entry --\x3e\n\x3cstyle name=\"AppPreference.DialogPreference\"\x3e\n    \x3citem name=\"positiveButtonText\"\x3e@android:string/ok\x3c/item\x3e\n    \x3citem name=\"negativeButtonText\"\x3e@android:string/cancel\x3c/item\x3e\n\x3c/style\x3e","markups":[{"type":1,"start":0,"end":38},{"type":1,"start":145,"end":188}]},{"name":"b113","type":1,"text":"After doing this, you can add the style to your custom preference in xml/app_preferences.xml. For every custom preference which extends DialogPreference you can set AppPreference.DialogPreference as the style. For all others you can use AppPreference. Everything should then automatically be fixed.","markups":[{"type":1,"start":69,"end":92},{"type":2,"start":55,"end":65},{"type":2,"start":111,"end":122},{"type":2,"start":136,"end":153},{"type":2,"start":165,"end":195},{"type":2,"start":237,"end":250}]},{"name":"9685","type":8,"text":"\x3cyour.package.TimePreference\n    android:key=\"key4\"\n    android:title=\"Time Preference\"\n    android:summary=\"Time Summary\"\n    android:defaultValue=\"90\"\n    style=\"@style/AppPreference.DialogPreference\" /\x3e","markups":[{"type":1,"start":1,"end":13},{"type":1,"start":46,"end":50},{"type":1,"start":157,"end":202}]},{"name":"5415","type":1,"text":"And now, our result looks like this.","markups":[]},{"name":"7979","type":4,"text":"Our final custom TimePreference","markups":[],"layout":1,"metadata":{"id":"1*JjknpvGZAZfNxjGo6Ywv9Q.png","originalWidth":1200,"originalHeight":901,"isFeatured":true}},{"name":"6cc0","type":1,"text":"Wow, this was a long and hard way to build a Settings Screen. You should now know, how to apply material design everywhere and how to build custom preferences. I hope I haven’t done mistakes in this part of the tutorial.","markups":[{"type":2,"start":147,"end":158}]},{"name":"29ad","type":1,"text":"I recommend you to always have a look at the Android Developers site here, and the site with the source code of the v7.preference library here. When you need to build your own preference, just look how they have build the predefined ones and which methods you can use.","markups":[{"type":3,"start":69,"end":73,"href":"https://developer.android.com/reference/android/support/v7/preference/package-summary.html","title":"","rel":"","anchorType":0},{"type":3,"start":138,"end":142,"href":"https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference","title":"","rel":"","anchorType":0},{"type":2,"start":176,"end":186}]},{"name":"fead","type":1,"text":"The fourth Part of this tutorial series is available below.","markups":[{"type":1,"start":4,"end":15}]},{"name":"c7ea","type":14,"text":"Building an Android Settings Screen (Part 4)\nHow to use a Custom Layout For The Preference Fragmentmedium.com","markups":[{"type":3,"start":0,"end":109,"href":"https://medium.com/@JakobUlbrich/building-an-android-settings-screen-part-4-9558029827b7","title":"https://medium.com/@JakobUlbrich/building-an-android-settings-screen-part-4-9558029827b7","rel":"","anchorType":0},{"type":1,"start":0,"end":44},{"type":2,"start":45,"end":99}],"mixtapeMetadata":{"mediaResourceId":"377bfe6ff6af3274c0286e6f808c5777","thumbnailImageId":"1*VcarAKezK2qZOkxezRy5_w.png","href":"https://medium.com/@JakobUlbrich/building-an-android-settings-screen-part-4-9558029827b7"}},{"name":"13e1","type":1,"text":"You can have a look at the project files on GitHub.","markups":[{"type":3,"start":44,"end":50,"href":"https://github.com/jakobulbrich/preferences-demo","title":"","rel":"","anchorType":0},{"type":1,"start":27,"end":40}]},{"name":"98ec","type":1,"text":"Thanks for reading and happy coding 💻.","markups":[]}],"sections":[{"name":"7d00","startIndex":0},{"name":"4d8f","startIndex":4},{"name":"b978","startIndex":23},{"name":"84f3","startIndex":87},{"name":"397d","startIndex":89},{"name":"e7c3","startIndex":91}]},"postDisplay":{"coverless":true}},"virtuals":{"allowNotes":true,"previewImage":{"imageId":"1*JjknpvGZAZfNxjGo6Ywv9Q.png","filter":"","backgroundSize":"","originalWidth":1200,"originalHeight":901,"strategy":"resample","height":0,"width":0},"wordCount":2297,"imageCount":6,"readingTime":9.617924528301886,"subtitle":"How to Create Custom Preferences","usersBySocialRecommends":[],"recommends":56,"socialRecommends":[],"isBookmarked":false,"tags":[{"slug":"android","name":"Android","postCount":25674,"virtuals":{"isFollowing":false},"metadata":{"followerCount":15521,"postCount":25674,"coverImage":{"id":"1*DtCCDMBcuFl1VqqaeLdhwg.png","originalWidth":1400,"originalHeight":769,"isFeatured":true}},"type":"Tag"},{"slug":"android-app-development","name":"Android App Development","postCount":8767,"virtuals":{"isFollowing":false},"metadata":{"followerCount":10563,"postCount":8767,"coverImage":{"id":"1*kvzV3t07oGAt-SKxqpmnhA.jpeg","originalWidth":1600,"originalHeight":1200}},"type":"Tag"},{"slug":"android-design","name":"Android Design","postCount":29,"virtuals":{"isFollowing":false},"metadata":{"followerCount":77,"postCount":29,"coverImage":{"id":"1*QMWVcBj-phqy-j_gSqVhGA.png","originalWidth":1200,"originalHeight":600}},"type":"Tag"},{"slug":"android-libraries","name":"Android Libraries","postCount":29,"virtuals":{"isFollowing":false},"metadata":{"followerCount":63,"postCount":29,"coverImage":{"id":"1*EGl3YLvaRdXYV5eZB-OkAQ.png","originalWidth":692,"originalHeight":254}},"type":"Tag"},{"slug":"android-tutorials","name":"Android Tutorials","postCount":21,"virtuals":{"isFollowing":false},"metadata":{"followerCount":111,"postCount":21,"coverImage":{"id":"1*5yKHuNTsBSMk1GpiEeJhng.jpeg","originalWidth":1280,"originalHeight":720}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":12,"links":{"entries":[{"url":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-1-5959aa49337c","alts":[{"type":3,"url":"medium://p/5959aa49337c"},{"type":2,"url":"medium://p/5959aa49337c"}]},{"url":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d","alts":[{"type":2,"url":"medium://p/2ba63e2d7d1d"},{"type":3,"url":"medium://p/2ba63e2d7d1d"}]},{"url":"https://medium.com/@JakobUlbrich/building-an-android-settings-screen-part-4-9558029827b7","alts":[{"type":2,"url":"medium://p/9558029827b7"},{"type":3,"url":"medium://p/9558029827b7"}]}],"version":"0.3","generatedAt":1477183136927},"isLockedPreviewOnly":false,"takeoverId":"","metaDescription":"","totalClapCount":0},"coverless":true,"slug":"building-a-settings-screen-for-android-part-3","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":true,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"building-a-settings-screen-for-android-part-3-ae9793fd31ec","previewContent":{"bodyModel":{"paragraphs":[{"name":"previewImage","type":4,"text":"","layout":10,"metadata":{"id":"1*JjknpvGZAZfNxjGo6Ywv9Q.png","originalWidth":1200,"originalHeight":901,"isFeatured":true}},{"name":"d6ce","type":3,"text":"Building an Android Settings Screen (Part 3)","markups":[],"alignment":1},{"name":"8120","type":13,"text":"How to Create Custom Preferences","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec","approvedHomeCollectionId":"","newsletterId":"","webCanonicalUrl":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec","mediumUrl":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"isSponsored":false,"isRequestToPubDisabled":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"type":"Post"},"mentionedUsers":[{"userId":"5f9084077a41","name":"Ivan Soriano","username":"ivansoriano","createdAt":1454417479941,"lastPostCreatedAt":1464735097587,"imageId":"0*wXwWdK99b8RJN9gf.jpg","backgroundImageId":"","bio":"","twitterScreenName":"","facebookAccountId":"","allowNotes":1,"mediumMemberAt":0,"mediumMemberWaitlistedAt":0,"type":"User"}],"collaborators":[],"membershipPlans":[],"collectionUserRelations":[],"mode":null,"references":{"User":{"73d0266697d8":{"userId":"73d0266697d8","name":"Jakob Ulbrich","username":"JakobUlbrich","createdAt":1456964903375,"lastPostCreatedAt":1490290514279,"imageId":"1*50pfRWptJGHYxe-dQX_pMg.png","backgroundImageId":"","bio":"","twitterScreenName":"","socialStats":{"userId":"73d0266697d8","usersFollowedCount":15,"usersFollowedByCount":269,"type":"SocialStats"},"social":{"userId":"lo_98fc7bde6f4d","targetUserId":"73d0266697d8","type":"Social"},"facebookAccountId":"","allowNotes":1,"type":"User"}},"Social":{"73d0266697d8":{"userId":"lo_98fc7bde6f4d","targetUserId":"73d0266697d8","type":"Social"}},"SocialStats":{"73d0266697d8":{"userId":"73d0266697d8","usersFollowedCount":15,"usersFollowedByCount":269,"type":"SocialStats"}}}})
// ]]></script></body></html>