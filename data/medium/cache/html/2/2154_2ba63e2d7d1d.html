<!DOCTYPE html><html xmlns:cc="http://creativecommons.org/ns#"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Building an Android Settings Screen (Part 2) ‚Äì Jakob Ulbrich ‚Äì Medium</title><link rel="canonical" href="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d"><meta name="title" content="Building an Android Settings Screen (Part 2) ‚Äì Jakob Ulbrich ‚Äì Medium"><meta name="referrer" content="unsafe-url"><meta name="description" content="In the first part of this tutorial we already built and themed our Settings Screen, the next step will be to fix the layout and the theme of the dialogs. Because, technically, a preference dialog is‚Ä¶"><meta property="og:title" content="Building an Android Settings Screen (Part 2) ‚Äì Jakob Ulbrich ‚Äì Medium"><meta property="og:url" content="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d"><meta property="og:image" content="https://cdn-images-1.medium.com/max/1200/1*ckj1gZVaVCjTOwjy1m2ioQ.png"><meta property="fb:app_id" content="542599432471018"><meta property="og:description" content="How to Create and Fix the Dialogs"><meta name="twitter:description" content="How to Create and Fix the Dialogs"><meta name="twitter:image:src" content="https://cdn-images-1.medium.com/max/1200/1*ckj1gZVaVCjTOwjy1m2ioQ.png"><link rel="publisher" href="https://plus.google.com/103654360130207659246"><link rel="author" href="https://medium.com/@JakobUlbrich"><meta property="author" content="Jakob Ulbrich"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta property="article:publisher" content="https://www.facebook.com/medium"><meta property="article:author" content="https://medium.com/@JakobUlbrich"><meta property="fb:smart_publish:robots" content="noauto"><meta name="robots" content="index, follow"><meta property="article:published_time" content="2016-05-29T15:51:01.952Z"><meta name="twitter:site" content="@Medium"><meta property="og:site_name" content="Medium"><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="5 min read"><script type="application/ld+json">{"@context":"http://schema.org","@type":"NewsArticle","image":{"@type":"ImageObject","width":1200,"height":900,"url":"https://cdn-images-1.medium.com/max/1200/1*ckj1gZVaVCjTOwjy1m2ioQ.png"},"datePublished":"2016-05-29T15:51:01.952Z","dateModified":"2016-08-22T19:45:59.344Z","headline":"Building an Android Settings Screen (Part 2)","name":"Building an Android Settings Screen (Part 2)","keywords":["Android","Android App Development","Android Design","Android Libraries","Android Tutorials"],"author":{"@type":"Person","name":"Jakob Ulbrich","url":"https://medium.com/@JakobUlbrich"},"creator":["Jakob Ulbrich"],"mainEntityOfPage":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d"}</script><meta name="twitter:app:name:iphone" content="Medium"><meta name="twitter:app:id:iphone" content="828256236"><meta name="twitter:app:url:iphone" content="medium://p/2ba63e2d7d1d"><meta property="al:ios:app_name" content="Medium"><meta property="al:ios:app_store_id" content="828256236"><meta property="al:android:package" content="com.medium.reader"><meta property="al:android:app_name" content="Medium"><meta property="al:ios:url" content="medium://p/2ba63e2d7d1d"><meta property="al:android:url" content="medium://p/2ba63e2d7d1d"><meta property="al:web:url" content="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d"><link rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml" /><link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/2ba63e2d7d1d" /><meta name="theme-color" content="#000000"><link rel="stylesheet" href="https://cdn-static-1.medium.com/_/fp/css/main-base.g2e09PlZK_j3Lw2AgNmbfQ.css"><script>if (window.top !== window.self) window.top.location = window.self.location.href;var OB_startTime = new Date().getTime(); var OB_loadErrors = []; function _onerror(e) { OB_loadErrors.push(e) }; if (document.addEventListener) document.addEventListener("error", _onerror, true); else if (document.attachEvent) document.attachEvent("onerror", _onerror); function _asyncScript(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = u; f.parentNode.insertBefore(s, f);}function _asyncStyles(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("link"); s.rel = "stylesheet"; s.href = u; f.parentNode.insertBefore(s, f); return s}var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-24232453-2"]); _gaq.push(["_setDomainName", window.location.hostname]); _gaq.push(["_setAllowLinker", true]); _gaq.push(["_trackPageview"]);_asyncScript(("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js");(new Image()).src = "/_/stat?event=pixel.load&origin=" + encodeURIComponent(location.origin);</script><script>(function () {var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight; var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth; document.write("<style>section.section-image--fullBleed.is-backgrounded {padding-top: " + Math.round(1.1 * height) + "px;}section.section-image--fullScreen.is-backgrounded, section.section-image--coverFade.is-backgrounded {min-height: " + height + "px; padding-top: " + Math.round(0.5 * height) + "px;}.u-sizeViewHeight100 {height: " + height + "px !important;}.u-sizeViewHeight110 {height: " + Math.round(1.1 * height) + "px !important;}.u-sizeViewHeightMin100 {min-height: " + height + "px !important;}.u-sizeViewHeightMax100 {max-height: " + height + "px !important;}section.section-image--coverFade {height: " + height + "px;}.section-aspectRatioViewportPlaceholder, .section-aspectRatioViewportCropPlaceholder {max-height: " + height + "px;}.section-aspectRatioViewportBottomSpacer, .section-aspectRatioViewportBottomPlaceholder {max-height: " + Math.round(0.5 * height) + "px;}.zoomable:before {top: " + (-1 * height) + "px; left: " + (-1 * width) + "px; padding: " + height + "px " + width + "px;}</style>");})()</script><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]--><link rel="icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-medium.TAS6uQ-Y7kcKgi0xjcYHXw.ico" class="js-favicon"><link rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/152/152/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/120/120/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/76/76/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/60/60/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg" color="#171717"></head><body itemscope class=" postShowScreen is-noJs"><script>document.body.className = document.body.className.replace(/(^|\s)is-noJs(\s|$)/, "$1is-js$2")</script><div class="site-main" id="container"><div class="butterBar butterBar--error"></div><div class="surface"><div id="prerendered" class="screenContent"><canvas class="canvas-renderer"></canvas><div class="container u-maxWidth740 u-xs-margin0 notesPositionContainer js-notesPositionContainer"></div><div class="metabar u-clearfix js-metabar"><div class="metabar-inner u-marginAuto u-maxWidth1000 u-paddingLeft20 u-paddingRight20 js-metabarMiddle"><div class="metabar-block metabar-block--left u-floatLeft u-height65 u-xs-height56"><a href="https://medium.com/" class="siteNav-logo" data-log-event="home"><span class="svgIcon svgIcon--logoNew svgIcon--45px is-flushLeft"><svg class="svgIcon-use" width="45" height="45"  viewBox="-17 18 45 45" data-multipart="true"><path d="M11.525 28.078c-.472-.225-.858.002-.858.506v20.044l8.616 4.113c.948.46 1.717.14 1.717-.7v-19.3a.22.22 0 0 0-.124-.19l-9.35-4.46v-.01z"/><path d="M.333 43.696l9.83-15.247c.278-.43.89-.6 1.36-.38l9.364 4.47c.06.03.082.1.047.15L10.666 48.63.333 43.698v-.002z"/><path d="M-8.57 28.35c-.786-.375-1.053-.096-.592.62L.333 43.696l10.333 4.932L.356 32.635a.156.156 0 0 0-.06-.054l-8.866-4.23z"/><path d="M.333 52.033c0 .84-.643 1.22-1.43.844l-8.045-3.84c-.472-.224-.858-.82-.858-1.325V28.89c0-.672.515-.976 1.145-.675l9.133 4.36a.092.092 0 0 1 .055.084v19.37z"/></svg></span><span class="u-textScreenReader">Homepage</span></a></div><div class="metabar-block u-floatRight u-xs-absolute u-xs-textAlignRight u-xs-right0 u-xs-marginRight20 u-height65 u-xs-height56"><div class="buttonSet"><a class="button button--primary button--chromeless u-accentColor--buttonNormal is-inSiteNavBar u-lineHeight30 u-height32"  href="https://medium.com/m/signin?redirect=https%3A%2F%2Fmedium.com%2F%40JakobUlbrich%2Fbuilding-a-settings-screen-for-android-part-2-2ba63e2d7d1d" data-action="sign-in-prompt" data-redirect="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d" data-action-source="nav_signup">Sign in / Sign up</a></div></div></div></div><div class="metabar metabar--spacer js-metabarSpacer u-height65 u-xs-height56"></div><main role="main"><article class=" u-sizeViewHeightMin100 u-overflowHidden postArticle postArticle--full u-marginBottom40"  lang="en"><header class="container u-maxWidth740"><div class="postMetaHeader u-paddingBottom10 row"><div class="col u-size12of12 js-postMetaLockup"><div class="postMetaLockup postMetaLockup--authorWithBio u-flex js-postMetaLockup"><div class="u-flex0"><a class="link avatar u-baseColor--link"  href="https://medium.com/@JakobUlbrich?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="73d0266697d8" data-action-type="hover" data-user-id="73d0266697d8" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/40/40/1*50pfRWptJGHYxe-dQX_pMg.png" class="avatar-image avatar-image--smaller" alt="Go to the profile of Jakob Ulbrich"></a></div><div class="u-flex1 u-paddingLeft15 u-overflowHidden"><a class="link link link--darken link--darker u-baseColor--link"  href="https://medium.com/@JakobUlbrich?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="73d0266697d8" data-action-type="hover" data-user-id="73d0266697d8" dir="auto">Jakob Ulbrich</a><span class="followState js-followState buttonSet-inner" data-user-id="73d0266697d8"><button class="button u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSize12 u-uiTextMedium u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-marginLeft10 u-marginTopNegative2 u-xs-hide"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="post_header_lockup"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSize12 u-uiTextMedium u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-marginLeft10 u-marginTopNegative2 u-xs-hide"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/73d0266697d8" data-action-source="post_header_lockup_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span><div class="postMetaInline js-testPostMetaInlineSupplemental"><time datetime="2016-05-29T15:51:01.952Z">May 29, 2016</time><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="5 min read"></span></div></div></div></div></div></header><div class="postArticle-content js-postField js-notesSource js-trackedPost"  data-post-id="2ba63e2d7d1d" data-source="post_page" data-tracking-context="postPage"><section name="45ac" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h1 name="f5c8" id="f5c8" class="graf graf--h3 graf--leading graf--title">Building an Android Settings Screen (Part¬†2)</h1><h2 name="5fec" id="5fec" class="graf graf--h4 graf-after--h3 graf--subtitle">How to Create and Fix the¬†Dialogs</h2></div><div class="section-inner sectionLayout--fullWidth"><figure name="37f0" id="37f0" class="graf graf--figure graf--layoutFillWidth graf-after--h4"><div class="aspectRatioPlaceholder is-locked"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 32%;"></div><img class="graf-image" data-image-id="1*8dPldA5KlCFUX4u71G89lQ.png" data-width="2500" data-height="800" src="https://cdn-images-1.medium.com/max/2000/1*8dPldA5KlCFUX4u71G89lQ.png"></div><figcaption class="imageCaption">Fixing and Extending the android.support.v7.preference Library</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="fd18" id="fd18" class="graf graf--p graf-after--figure graf--trailing">In the <a href="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-1-5959aa49337c" data-href="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-1-5959aa49337c" class="markup--anchor markup--p-anchor" target="_blank">first part</a> of this tutorial we already built and themed our Settings Screen, the next step will be to fix the layout and the theme of the <strong class="markup--strong markup--p-strong">dialogs</strong>.</p></div></div></section><section name="5c59" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="fa5e" id="fa5e" class="graf graf--p graf--leading">Because, technically, a preference dialog is a <em class="markup--em markup--p-em">v7.app.AlertDialog</em>, we can set their theme to <em class="markup--em markup--p-em">Theme.AppCompat.DayNight.Dialog.Alert</em> with the following entry in our <strong class="markup--strong markup--p-strong">Activity‚Äôs theme</strong>.</p><pre name="b0b1" id="b0b1" class="graf graf--pre graf-after--p">&lt;item name=&quot;alertDialogTheme&quot;&gt;<br>    @style/Theme.AppCompat.DayNight.Dialog.Alert<br>&lt;/item&gt;</pre><p name="736b" id="736b" class="graf graf--p graf-after--pre">This allows the dialogs to adapt their colors depending on if it‚Äôs day or night (You can find more information on how to use the DayNight theme <a href="https://medium.com/@chrisbanes/appcompat-v23-2-daynight-d10f90c83e94" data-href="https://medium.com/@chrisbanes/appcompat-v23-2-daynight-d10f90c83e94" class="markup--anchor markup--p-anchor" target="_blank">here</a>).</p><figure name="ec31" id="ec31" class="graf graf--figure graf--layoutOutsetLeft graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 525px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75%;"></div><img class="graf-image" data-image-id="1*ckj1gZVaVCjTOwjy1m2ioQ.png" data-width="1200" data-height="900" data-is-featured="true" data-action="zoom" data-action-value="1*ckj1gZVaVCjTOwjy1m2ioQ.png" src="https://cdn-images-1.medium.com/max/600/1*ckj1gZVaVCjTOwjy1m2ioQ.png"></div><figcaption class="imageCaption">Default look of the preference dialogs</figcaption></figure><p name="4fa1" id="4fa1" class="graf graf--p graf-after--figure">After applying the <em class="markup--em markup--p-em">DayNight</em> theme, our dialog should look like this and, as you can see, there are <strong class="markup--strong markup--p-strong">a lot of issues</strong>.</p><p name="4ef5" id="4ef5" class="graf graf--p graf-after--p">First of all, the <strong class="markup--strong markup--p-strong">text color</strong> of the dialog‚Äôs content is white on a white background.</p><p name="d4a8" id="d4a8" class="graf graf--p graf-after--p">The second thing is that the <strong class="markup--strong markup--p-strong">buttons</strong> are using the <em class="markup--em markup--p-em">AppCompat‚Äôs</em> default accentColor.</p><p name="0c37" id="0c37" class="graf graf--p graf-after--p">And the last issue is that the <em class="markup--em markup--p-em">dialogMessage</em> and the <em class="markup--em markup--p-em">EditText</em> do not have enough <strong class="markup--strong markup--p-strong">padding</strong>, so they are really close to the dialog‚Äôs edge and the <em class="markup--em markup--p-em">title</em>. Also the <em class="markup--em markup--p-em">dialogMessage</em> is straight below the <em class="markup--em markup--p-em">title</em>, which will definitely not look good, when we make the text visible.</p><p name="2828" id="2828" class="graf graf--p graf-after--p">I have enabled <em class="markup--em markup--p-em">Show layout bounds</em> in the developer options, so we can see the layout of all elements.</p><h3 name="0678" id="0678" class="graf graf--h3 graf-after--p">Fixing the Layout of the¬†Dialog</h3><p name="8f64" id="8f64" class="graf graf--p graf-after--h3">When you take a look at the layout source code of the EditTextPreference‚Äôs dialog (You can find it <a href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/res/layout/preference_dialog_edittext.xml" data-href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/res/layout/preference_dialog_edittext.xml" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">here</a>), you can see that the simply set the wrong padding for the content‚Äôs <em class="markup--em markup--p-em">LinearLayout</em>. They use <em class="markup--em markup--p-em">android:padding=‚Äù5dip&quot;</em> which is not enough. Also the space between the <em class="markup--em markup--p-em">dialogMessage</em> and the <em class="markup--em markup--p-em">EditText</em> is set to <em class="markup--em markup--p-em">48dp</em> which seems a lot to me. We better change this to another value.</p><p name="9076" id="9076" class="graf graf--p graf-after--p">We can find the proper values by looking at the <em class="markup--em markup--p-em">v7.app.AlertDialog‚Äôs</em> layout source code <a href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/appcompat/res/layout/abc_alert_dialog_material.xml" data-href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/appcompat/res/layout/abc_alert_dialog_material.xml" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">here</a>. We can see that they use¬†<em class="markup--em markup--p-em">?attr/dialogPreferredPadding</em> as the left and right <em class="markup--em markup--p-em">padding</em> and a dimension <em class="markup--em markup--p-em">abc_dialog_padding_top_material</em> (<em class="markup--em markup--p-em">18dp</em>) as the top <em class="markup--em markup--p-em">padding</em> of the dialog.</p><p name="5a9e" id="5a9e" class="graf graf--p graf-after--p">Now we can create a <strong class="markup--strong markup--p-strong">new dimension resource</strong> with the currently discovered value of <em class="markup--em markup--p-em">18dp</em>, because we will need this more than one time.</p><pre name="020a" id="020a" class="graf graf--pre graf-after--p">&lt;dimen name=&quot;alert_def_padding&quot;&gt;18dp&lt;/dimen&gt;</pre><p name="a02f" id="a02f" class="graf graf--p graf-after--pre">After that, we copy us the whole dialog layout source code of the <em class="markup--em markup--p-em">EditText</em> preference from <a href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/res/layout/preference_dialog_edittext.xml" data-href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/res/layout/preference_dialog_edittext.xml" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">here</a> to a new layout file called <strong class="markup--strong markup--p-strong">pref_dialog_edittext_fix.xml</strong> and change the <em class="markup--em markup--p-em">paddings</em> and <em class="markup--em markup--p-em">margins</em>.</p><pre name="13bd" id="13bd" class="graf graf--pre graf-after--p">&lt;ScrollView<br>    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;<br>    android:layout_width=&quot;match_parent&quot;<br>    android:layout_height=&quot;match_parent&quot;<br>    android:layout_marginTop=&quot;48dp&quot;<br>    android:layout_marginBottom=&quot;48dp&quot;<br>    android:overScrollMode=&quot;ifContentScrolls&quot;&gt;<br><br>    &lt;LinearLayout<br>        android:layout_width=&quot;match_parent&quot;<br>        android:layout_height=&quot;wrap_content&quot;<br>        <strong class="markup--strong markup--pre-strong">android:paddingTop=&quot;@dimen/alert_def_padding&quot;<br>        android:paddingBottom=&quot;@dimen/alert_def_padding&quot;<br>        android:paddingStart=&quot;?dialogPreferredPadding&quot;<br>        android:paddingLeft=&quot;?dialogPreferredPadding&quot;<br>        android:paddingEnd=&quot;?dialogPreferredPadding&quot;<br>        android:paddingRight=&quot;?dialogPreferredPadding&quot;</strong><br>        android:orientation=&quot;vertical&quot;&gt;<br>        <br>        &lt;TextView<br>            android:id=&quot;@android:id/message&quot;<br>            style=&quot;?android:attr/textAppearanceSmall&quot;<br>            <strong class="markup--strong markup--pre-strong">android:layout_marginBottom=&quot;@dimen/alert_def_padding&quot;</strong><br>            android:layout_width=&quot;match_parent&quot;<br>            android:layout_height=&quot;wrap_content&quot;<br>            android:textColor=&quot;?android:attr/textColorSecondary&quot; /&gt;<br>        <br>        &lt;EditText<br>            android:id=&quot;@android:id/edit&quot;<br>            android:layout_width=&quot;match_parent&quot;<br>            android:layout_height=&quot;wrap_content&quot; /&gt;<br>        <br>    &lt;/LinearLayout&gt;<br>&lt;/ScrollView&gt;</pre><p name="82ac" id="82ac" class="graf graf--p graf-after--pre">We can apply the modified layout to our EditTextPreference in the <strong class="markup--strong markup--p-strong">xml/app_preferences.xml</strong> by adding the <em class="markup--em markup--p-em">android:dialogLayout</em> attribute.</p><pre name="c8d8" id="c8d8" class="graf graf--pre graf-after--p">&lt;android.support.v7.preference.EditTextPreference<br>    android:key=&quot;key2&quot;<br>    android:title=&quot;EditText Preference&quot;<br>    android:summary=&quot;EditText Summary&quot;<br>    android:dialogMessage=&quot;Dialog Message&quot;<br>    android:defaultValue=&quot;Default value&quot;<br>    <strong class="markup--strong markup--pre-strong">android:dialogLayout=&quot;@layout/pref_dialog_edittext_fix&quot;</strong> /&gt;</pre><p name="810f" id="810f" class="graf graf--p graf-after--pre">You can also add an remove <em class="markup--em markup--p-em">Views</em> from this custom layout, but <strong class="markup--strong markup--p-strong">always keep</strong> the <em class="markup--em markup--p-em">EditText</em> with the id <em class="markup--em markup--p-em">@android:id/edit</em>, because the v7.preference library will crash your App with an <em class="markup--em markup--p-em">IllegalStateException</em> if it can not find it. Also, fixing the layout for the <em class="markup--em markup--p-em">ListPreference</em> should be very similar.</p><figure name="2813" id="2813" class="graf graf--figure graf--layoutOutsetLeft graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 525px; max-height: 395px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75.2%;"></div><img class="graf-image" data-image-id="1*g55zCzyYXs4mokF1b6e8kw.png" data-width="1200" data-height="902" data-action="zoom" data-action-value="1*g55zCzyYXs4mokF1b6e8kw.png" src="https://cdn-images-1.medium.com/max/600/1*g55zCzyYXs4mokF1b6e8kw.png"></div><figcaption class="imageCaption">The dialog after applying the layout¬†fix</figcaption></figure><p name="4ab8" id="4ab8" class="graf graf--p graf-after--figure">After digging through the layout source code, discovering the right dimensions and applying them to our <em class="markup--em markup--p-em">EditTextPreference</em>, everything in our dialog should now look <strong class="markup--strong markup--p-strong">perfectly aligned</strong>.</p><p name="1d21" id="1d21" class="graf graf--p graf-after--p">The <em class="markup--em markup--p-em">title</em>, the <em class="markup--em markup--p-em">dialogMessage</em> and <em class="markup--em markup--p-em">EditText</em> now have the same <em class="markup--em markup--p-em">padding</em> on the left and right. And we even increased the space between the <em class="markup--em markup--p-em">title</em> and the <em class="markup--em markup--p-em">dialogMessage</em>.</p><h3 name="4aef" id="4aef" class="graf graf--h3 graf-after--p">Fixing the Theme and¬†Colors</h3><p name="a10a" id="a10a" class="graf graf--p graf-after--h3">We still have the wrong colors for the buttons and for the text in our dialog, which we are now going to fix. If you want to look at the <em class="markup--em markup--p-em">AppCompat</em> theme inheritance, you can find the source <a href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/appcompat/res/values/themes_base.xml" data-href="https://android.googlesource.com/platform/frameworks/support/+/master/v7/appcompat/res/values/themes_base.xml" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">here</a>.</p><h4 name="147e" id="147e" class="graf graf--h4 graf-after--p">Fixing the Color of the¬†Buttons</h4><figure name="4098" id="4098" class="graf graf--figure graf--layoutOutsetLeft graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 525px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75%;"></div><img class="graf-image" data-image-id="1*6AQ7QuJamFBnJVYJOkLVbQ.png" data-width="1200" data-height="900" data-action="zoom" data-action-value="1*6AQ7QuJamFBnJVYJOkLVbQ.png" src="https://cdn-images-1.medium.com/max/600/1*6AQ7QuJamFBnJVYJOkLVbQ.png"></div><figcaption class="imageCaption">The dialog before and after changing colorAccent in the dialogs‚Äôs theme</figcaption></figure><p name="2c7a" id="2c7a" class="graf graf--p graf-after--figure">Our dialog‚Äôs theme does override <em class="markup--em markup--p-em">colorAccent</em> from our Acivity‚Äôs theme with the default greenish color which is provided in the <em class="markup--em markup--p-em">DayNight.Dialog.Alert</em> theme.</p><p name="3d02" id="3d02" class="graf graf--p graf-after--p">This is the reason why the dialog buttons do not use <em class="markup--em markup--p-em">colorAccent </em>from our Activity‚Äôs theme.</p><p name="177d" id="177d" class="graf graf--p graf-after--p">If we want to change the button color, we need to modify our dialog‚Äôs theme.</p><p name="e0fe" id="e0fe" class="graf graf--p graf-after--p">We do this with the following in our <strong class="markup--strong markup--p-strong">styles.xml</strong>. First we create a new <em class="markup--em markup--p-em">style</em> called <em class="markup--em markup--p-em">AppAlertDialog</em>, which inherits from our previous dialog‚Äôs theme. In this new <em class="markup--em markup--p-em">style</em>, we can modify our <em class="markup--em markup--p-em">colorAccent</em> as we want to. After that, we say our Activity‚Äôs theme to use our newly created <em class="markup--em markup--p-em">style</em> as the <em class="markup--em markup--p-em">alertDialogTheme</em>.</p><pre name="d772" id="d772" class="graf graf--pre graf-after--p">&lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat&quot;&gt;<br>    &lt;!-- ... other stuff ... --&gt;<br>    &lt;item name=&quot;preferenceTheme&quot;&gt;<br>        @style/PreferenceThemeOverlay.v14.Material<br>    &lt;/item&gt;<br>    <strong class="markup--strong markup--pre-strong">&lt;item name=&quot;alertDialogTheme&quot;&gt;@style/AppAlertDialog&lt;/item&gt;<br></strong>&lt;/style&gt;</pre><pre name="3470" id="3470" class="graf graf--pre graf-after--pre"><strong class="markup--strong markup--pre-strong">&lt;style name=&quot;AppAlertDialog&quot;<br>        parent=&quot;Theme.AppCompat.DayNight.Dialog.Alert&quot;&gt;<br>    &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;<br>&lt;/style&gt;</strong></pre><h4 name="607a" id="607a" class="graf graf--h4 graf-after--pre">Fixing the Color of the¬†Text</h4><figure name="392f" id="392f" class="graf graf--figure graf--layoutOutsetLeft graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 525px; max-height: 394px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 75%;"></div><img class="graf-image" data-image-id="1*YpMkWb-yqo1uA8lijDtohQ.png" data-width="1200" data-height="900" data-action="zoom" data-action-value="1*YpMkWb-yqo1uA8lijDtohQ.png" src="https://cdn-images-1.medium.com/max/600/1*YpMkWb-yqo1uA8lijDtohQ.png"></div><figcaption class="imageCaption">The dialog before and after changing the theme of the¬†content</figcaption></figure><p name="8dee" id="8dee" class="graf graf--p graf-after--figure">Since our Activity‚Äôs theme is <em class="markup--em markup--p-em">Theme.AppCompat</em>, which provides white text, and our our dialog‚Äôs theme does not override this, we also get white text in our dialog.</p><p name="0e16" id="0e16" class="graf graf--p graf-after--p">We could override all text colors in our dialog‚Äôs theme by our own, but this would require a lot of work. And if we are using the <em class="markup--em markup--p-em">DayNight</em> theme, it is even harder.</p><p name="9f2f" id="9f2f" class="graf graf--p graf-after--p">So the easiest way is to apply the theme to a <em class="markup--em markup--p-em">Layout</em> that includes the content elements of our dialog.</p><p name="699d" id="699d" class="graf graf--p graf-after--p">First we create a <strong class="markup--strong markup--p-strong">new style</strong>, which inherits from a theme that we want to use. In this case it is <em class="markup--em markup--p-em">Theme.AppCompat.DayNight</em>, because we want that the color of the text also adapts depending on if it is day or night. If we would not use the <em class="markup--em markup--p-em">DayNight</em> theme, it could result in dark text on a dark background at night. When we later apply this <em class="markup--em markup--p-em">style</em> as our dialog‚Äôs content theme, it does not inherit the <em class="markup--em markup--p-em">colorAccent</em> from our Activity‚Äôs theme anymore. That‚Äôs why we have to add it to this <em class="markup--em markup--p-em">style</em> again, to keep the current color of the <em class="markup--em markup--p-em">EditText</em>.</p><pre name="3189" id="3189" class="graf graf--pre graf-after--p">&lt;style name=&quot;AppAlertDialogContent&quot;<br>        parent=&quot;Theme.AppCompat.DayNight&quot;&gt;<br>    &lt;!-- To keep the color of EditText --&gt;<br>    &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt;<br>&lt;/style&gt;</pre><p name="cda0" id="cda0" class="graf graf--p graf-after--pre">Now we go back to the <strong class="markup--strong markup--p-strong">pref_dialog_edittext_fix.xml</strong> file, which we created to fix the layout issues of the <em class="markup--em markup--p-em">EditTextPreference</em>, search for the root <em class="markup--em markup--p-em">Layout</em> and add our theme there.</p><pre name="911d" id="911d" class="graf graf--pre graf-after--p">&lt;ScrollView<br>    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;<br>    android:layout_width=&quot;match_parent&quot;<br>    android:layout_height=&quot;match_parent&quot;<br>    android:layout_marginTop=&quot;48dp&quot;<br>    android:layout_marginBottom=&quot;48dp&quot;<br>    android:overScrollMode=&quot;ifContentScrolls&quot;<br>    <strong class="markup--strong markup--pre-strong">android:theme=&quot;@style/AppAlertDialogContent&quot;</strong>&gt;</pre><p name="eeea" id="eeea" class="graf graf--p graf-after--pre graf--trailing">You can change your dialog‚Äôs content theme as you want.</p></div></div></section><section name="076f" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="a6ca" id="a6ca" class="graf graf--p graf--leading">When we now open our dialog, you should not be able to find any layout or theme issues anymore. But if you do, you should be able to solve them by modifying the layout file or one of our recently created styles.</p><p name="606a" id="606a" class="graf graf--p graf-after--p graf--trailing">This was the second step to create a material design Settings Screen. The next part of this tutorial will be about how to build custom preferences and how to solve the design issues which occur during this process.</p></div></div></section><section name="b5c0" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="0778" id="0778" class="graf graf--p graf--leading">The <strong class="markup--strong markup--p-strong">third Part</strong> of this tutorial series is available below.</p><div name="bd75" id="bd75" class="graf graf--mixtapeEmbed graf-after--p graf--trailing"><a href="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec" data-href="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec"><strong class="markup--strong markup--mixtapeEmbed-strong">Building an Android Settings Screen (Part 3)</strong><br><em class="markup--em markup--mixtapeEmbed-em">How to Create Custom Preferences</em>medium.com</a><a href="https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="e3cddd1dbf08c4d444045de490e69a66" data-thumbnail-img-id="1*JjknpvGZAZfNxjGo6Ywv9Q.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*JjknpvGZAZfNxjGo6Ywv9Q.png);"></a></div></div></div></section><section name="9c73" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="f898" id="f898" class="graf graf--p graf--leading">You can have a look at the <strong class="markup--strong markup--p-strong">project files</strong> on <a href="https://github.com/jakobulbrich/preferences-demo" data-href="https://github.com/jakobulbrich/preferences-demo" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">GitHub</a>.</p><p name="98ec" id="98ec" class="graf graf--p graf-after--p graf--trailing">Thanks for reading and happy coding üíª.</p></div></div></section></div><footer class="u-paddingTop10"><div class="container u-maxWidth740"><div class="row"><div class="col u-size12of12"></div></div><div class="row"><div class="col u-size12of12 js-postTags"><div class="u-paddingBottom10"><ul class="tags tags--postTags tags--borderless"><li><a class="link u-baseColor--link"  href="https://medium.com/tag/android?source=post" data-action-source="post">Android</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/android-app-development?source=post" data-action-source="post">Android App Development</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/android-design?source=post" data-action-source="post">Android Design</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/android-libraries?source=post" data-action-source="post">Android Libraries</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/android-tutorials?source=post" data-action-source="post">Android Tutorials</a></li></ul></div></div></div><div class="row js-postActionsFooter"><div class="postActions col u-size12of12"><div class="u-floatLeft buttonSet buttonSet--withLabels"><div class="buttonSet-inner"><div class="js-actionRecommend" data-post-id="2ba63e2d7d1d" data-is-icon-29px="true" data-has-recommend-list="true" data-source="post_actions_footer"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/2ba63e2d7d1d" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"/></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal"  data-action="show-recommends" data-action-value="2ba63e2d7d1d">53</button></div></div><div class="buttonSet-inner"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  data-action="scroll-to-responses" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"/></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal"  data-action="scroll-to-responses">2</button></div></div><div class="u-floatRight buttonSet buttonSet--narrow"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/></svg></span></button></div></div></div></div><div class="js-postPromotionWrapper postPromotionWrapper" data-location-id="footer_above_post_attribution"></div><div class="container u-maxWidth740 js-postAttributionFooterContainer u-paddingTop20 u-paddingBottom20 u-marginTop10 u-borderTopLightest u-xs-paddingTop10 u-xs-paddingBottom10"><div class="row js-postFooterInfo"><div class="col u-size12of12"><li class="u-block u-paddingBottom18 js-cardUser"><div class="u-marginLeft20 u-floatRight"><span class="followState js-followState buttonSet-inner" data-user-id="73d0266697d8"><button class="button button--small u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/73d0266697d8" data-action-source="footer_card_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="u-tableCell "><a class="link avatar u-baseColor--link"  href="https://medium.com/@JakobUlbrich?source=footer_card" title="Go to the profile of Jakob Ulbrich" aria-label="Go to the profile of Jakob Ulbrich" data-action-source="footer_card" data-user-id="73d0266697d8" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/60/60/1*50pfRWptJGHYxe-dQX_pMg.png" class="avatar-image avatar-image--small" alt="Go to the profile of Jakob Ulbrich"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal"  href="https://medium.com/@JakobUlbrich" property="cc:attributionName" title="Go to the profile of Jakob Ulbrich" aria-label="Go to the profile of Jakob Ulbrich" rel="author cc:attributionUrl" data-user-id="73d0266697d8" dir="auto">Jakob Ulbrich</a></h3></div></li></div></div></div><div class="js-postFooterPlacements"></div><div class="u-padding0 u-clearfix u-backgroundGrayLightest u-print-hide supplementalPostContent js-responsesWrapper"></div><div class="supplementalPostContent js-readNext"></div><div class="supplementalPostContent js-heroPromo"></div></footer></article></main><div class="u-marginAuto u-maxWidth1000"><div class="js-postShareWidget u-foreground u-sm-hide u-transition--fadeOut300 u-fixed"><ul><li class="u-uiTextSemibold u-textAlignCenter u-textColorNormal u-fontSize12 u-textUppercase">Share</li><li class="u-textAlignCenter"><div class="js-actionRecommend" data-post-id="2ba63e2d7d1d" data-is-icon-29px="true" data-is-vertical="true" data-has-recommend-list="true" data-source="post_share_widget"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/2ba63e2d7d1d" data-action-source="post_share_widget"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"/></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal  u-block u-marginAuto u-marginTopNegative5"  data-action="show-recommends" data-action-value="2ba63e2d7d1d">53</button></div></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_share_widget"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/></svg></span></button></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_share_widget"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/></svg></span></button></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton"  title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-in-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/2ba63e2d7d1d"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"/></svg></span></span></button></li></ul></div></div><div class="u-fixed u-bottom0 u-sizeFullWidth u-backgroundWhite u-boxShadowTop u-borderBox u-paddingTop10 u-paddingBottom10 u-zIndexMetabar u-xs-paddingLeft10 u-xs-paddingRight10 js-stickyFooter"><div class="u-maxWidth700 u-marginAuto u-flexCenter"><div class="u-fontSize16 u-flex1 u-flexCenter"><div class="u-flex0 u-inlineBlock u-paddingRight20 u-xs-paddingRight10"><a class="link avatar u-inline u-baseColor--link"  href="https://medium.com/@JakobUlbrich" data-action="show-user-card" data-action-value="73d0266697d8" data-action-type="hover" data-user-id="73d0266697d8" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/40/40/1*50pfRWptJGHYxe-dQX_pMg.png" class="avatar-image avatar-image--smaller" alt="Go to the profile of Jakob Ulbrich"></a></div><div class="u-flex1 u-inlineBlock"><div class="u-xs-hide">Never miss a story from<strong> Jakob Ulbrich</strong>, when you sign up for Medium. <a class="link link--accent u-accentColor--textNormal u-accentColor--textDarken u-baseColor--link"  href="https://medium.com/@Medium/personalize-your-medium-experience-with-users-publications-tags-26a41ab1ee0c#.hx4zuv3mg" data-action-source="sticky_footer">Learn more</a></div><div class="u-xs-show">Never miss a story from<strong> Jakob Ulbrich</strong></div></div></div><div class="u-marginLeft50 u-xs-marginAuto"><span class="followState js-followState buttonSet-inner" data-user-id="73d0266697d8"><button class="button u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-uiTextSemibold u-textUppercase u-fontSize12"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="sticky_footer"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary is-active u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-uiTextSemibold u-textUppercase u-fontSize12"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/73d0266697d8" data-action-source="sticky_footer_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Get updates</span></button></span></div></div></div></div></div></div><div class="loadingBar"></div><script>// <![CDATA[
window["obvInit"] = function (opt_embedded) {window["obvInit"]["embedded"] = opt_embedded; window["obvInit"]["ready"] = true;}
// ]]></script><script>// <![CDATA[
var GLOBALS = {"audioUrl":"https://d1fcbxp97j4nb2.cloudfront.net","baseUrl":"https://medium.com","buildLabel":"28586-6143d83","currentUser":{"userId":"lo_3c8942b9f194","isVerified":false,"subscriberEmail":""},"currentUserHasUnverifiedEmail":false,"isAuthenticated":false,"isCurrentUserVerified":false,"mediumTwitterScreenName":"medium","miroUrl":"https://cdn-images-1.medium.com","moduleUrls":{"base":"https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.2nXtJ8XknWJqOjh2ZNHRVw.js","notes":"https://cdn-static-1.medium.com/_/fp/gen-js/main-notes.bundle.AouowiblLn4SBKZF6cWDtA.js","posters":"https://cdn-static-1.medium.com/_/fp/gen-js/main-posters.bundle.4rYp3nph7xNXmlmak5XWxQ.js","common-async":"https://cdn-static-1.medium.com/_/fp/gen-js/main-common-async.bundle.R35emyz9xZL7YdHbIl-SvQ.js","stats":"https://cdn-static-1.medium.com/_/fp/gen-js/main-stats.bundle.XUyD-cfC9DG2nc9iq5x7GA.js","home-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-home-screens.bundle.0oM8iNH9LgWeJY00O_ao2Q.js","misc-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-misc-screens.bundle.caQfKUCZ18Wg2IbFBoaXiA.js"},"previewConfig":{"weightThreshold":1,"weightImageParagraph":0.51,"weightIframeParagraph":0.8,"weightTextParagraph":0.08,"weightEmptyParagraph":0,"weightP":0.003,"weightH":0.005,"weightBq":0.003,"minPTextLength":60,"truncateBoundaryChars":20,"detectTitle":true,"detectTitleLevThreshold":0.15},"productName":"Medium","supportsEdit":false,"termsUrl":"//medium.com/policy/9db0094a1e0f","textshotHost":"textshot.medium.com","transactionId":"1492396396914:bb5139f6ef79","useragent":{"browser":"python requests","family":"","os":"","version":2.2,"supportsDesktopEdit":false,"supportsInteract":false,"supportsView":true,"isMobile":false,"isTablet":false,"isNative":false,"supportsFileAPI":false,"isTier1":false,"clientVersion":"","unknownParagraphsBad":false,"clientChannel":"","supportsRealScrollEvents":false,"supportsVhUnits":false,"ruinsViewportSections":false,"supportsHtml5Video":false,"supportsMagicUnderlines":false,"isWebView":false,"isFacebookWebView":false,"supportsProgressiveMedia":false,"supportsPromotedPosts":true,"isBot":false,"isNativeIphone":false,"supportsCssVariables":false,"supportsScrollableMetabar":false},"variants":{"allow_access":true,"allow_signup":true,"allow_test_auth":"disallow","signin_services":"twitter,facebook,google,email,google-fastidv","signup_services":"twitter,facebook,google,email,google-fastidv","android_rating_prompt_recommend_threshold":5,"google_sign_in_android":true,"enable_onboarding":true,"ios_custom_miro_url":"https://cdn-images-1.medium.com","reengagement_notification_duration":3,"enable_adsnative_integration":true,"browsable_stream_config_bucket":"curated-topics","ios_small_post_preview_truncation_length":5.5,"ios_large_post_preview_truncation_length":5.5,"disable_ios_catalog_badging":true,"enable_series_creation":true,"enable_your_series_pages":true,"enable_productionized_series":true,"enable_dedicated_series_tab_api_ios":true,"enable_clap_milestone_notifications":true,"enable_series_stats_page":true,"enable_prepublish_share_settings":true,"enable_direct_auth_connect":true,"enable_post_import":true,"enable_sponsored_post_labelling":true,"enable_logged_in_follow_on_collection_post":true,"promoted_story_placement_locations":"POST_PAGE_FOOTER","show_topics":true,"enable_search_collection_by_tag_recency_filter":true,"search_collection_by_tag_filter_min_votes":10,"enable_sms_app_promo":true,"enable_export_members":true,"enable_series_card_background_creation":true,"can_see_subscription_branding":true,"enable_subscriptions_landing_page":true,"enable_partner_program_landing_page":true,"enable_hide_broken_links":true,"enable_pay_for_custom_domain":true,"enable_promos_from_dynamo":true,"enable_promos_in_placement":true,"enable_series_promo_in_email":true,"enable_sms":true,"enable_series_in_user_profiles":true,"enable_new_logged_out_bento_operation":true,"enable_topic_brief_relations":true},"xsrfToken":"","iosAppId":"828256236","supportEmail":"yourfriends@medium.com","teamName":"Team Medium","fp":{"/icons/favicon.svg":"https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg","/icons/favicon-dev-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-dev-editor.YKKRxBO8EMvIqhyCwIiJeQ.ico","/icons/favicon-hatch-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-hatch-editor.BuEyHIqlyh2s_XEk4Rl32Q.ico","/icons/favicon-medium-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrl":"https://medium.com","imageUploadSizeMb":25,"isAuthDomainRequest":true,"algoliaApiEndpoint":"https://MQ57UUUQZ2-dsn.algolia.net","algoliaAppId":"MQ57UUUQZ2","algoliaSearchOnlyApiKey":"394474ced050e3911ae2249ecc774921","iosAppStoreUrl":"https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8","iosAppLinkBaseUrl":"medium:","algoliaIndexPrefix":"medium_","androidPlayStoreUrl":"https://play.google.com/store/apps/details?id=com.medium.reader","googleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","androidPackage":"com.medium.reader","androidPlayStoreMarketScheme":"market://details?id=com.medium.reader","googleAuthUri":"https://accounts.google.com/o/oauth2/auth","androidScheme":"medium","layoutData":{"useDynamicScripts":false,"googleAnalyticsTrackingCode":"UA-24232453-2","jsShivUrl":"https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js","useDynamicCss":false,"faviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium.TAS6uQ-Y7kcKgi0xjcYHXw.ico","faviconImageId":"1*W0nmth_X8nFKjn6BZ388UQ.png","fontSets":[{"id":1,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-base.by5Oi_VbnwEIvhnWIsuUjA.css"},{"id":4,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-lazy-base.g08Jj5TZPAiuPWj5YNUsSg.css"},{"id":6,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-latin-base.141WxxXgxGxNcfeza73H7Q.css"},{"id":7,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-lazy-latin-base.jMU532QDmysQMOINr-cr2A.css"}],"editorFaviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrlRev":"moc.muidem//:sptth","isDnt":false,"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","archiveUploadSizeMb":100,"paymentData":{"currencies":{"1":{"label":"US Dollar","external":"usd"}},"countries":{"1":{"label":"United States of America","external":"US"}},"accountTypes":{"1":{"label":"Individual","external":"individual"},"2":{"label":"Company","external":"company"}}},"previewConfig2":{"weightThreshold":1,"weightImageParagraph":0.05,"raiseImage":true,"enforceHeaderHierarchy":true,"isImageInsetRight":true},"isAmp":false,"iosScheme":"medium","isSwBoot":false,"lightstep":{"accessToken":"ce5be895bef60919541332990ac9fef2","carrier":"{\"ot-tracer-spanid\":\"077e198901ae47c5\",\"ot-tracer-traceid\":\"3f5fa5a903083e87\",\"ot-tracer-sampled\":\"true\"}","host":"collector-medium.lightstep.com"},"facebook":{"key":"542599432471018","secret":"c14df7146e9052a1131f3c900c1f0644","token":"542599432471018|1JqjIwxSfY9jOt_KwjWEl1R7T6I","namespace":"medium-com","scope":{"default":["public_profile","email","user_friends"],"connect":["public_profile","email","user_friends"],"login":["public_profile","email","user_friends"],"share":["public_profile","email","user_friends","publish_actions"]},"smartPublishWhitelistedPublications":["bcc38c8f6edf","f3726e2a5878","828a270689e","81c7d351c056","f30e42fd7ff8","8bf1d7d3081b","d16afa0ae7c","d8f3f6ad9c31","e74de0cedea9","15f753907972","c8c6a6b01ebd","3412b9729488","2ce4bbcf83bb","544c7006046e","7bfcdbc6b30a","a268fd916824","458a773bccd2"],"instantArticles":{"published":true,"developmentMode":false}},"mailingListArchiveUploadSizeMb":2,"availableMembershipPlans":[],"editorsPicksTopicId":"3985d2a191c5","popularOnMediumTopicId":"9d34e48ecf94","memberContentTopicId":"13d7efd82fb2","isDoNotAuth":false,"goldfinchUrl":"https://goldfinch.medium.com"}
// ]]></script><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.2nXtJ8XknWJqOjh2ZNHRVw.js" async></script><script>// <![CDATA[
window["obvInit"]({"value":{"id":"2ba63e2d7d1d","versionId":"26e6862d7934","creatorId":"73d0266697d8","creator":{"userId":"73d0266697d8","name":"Jakob Ulbrich","username":"JakobUlbrich","createdAt":1456964903375,"lastPostCreatedAt":1490290514279,"imageId":"1*50pfRWptJGHYxe-dQX_pMg.png","backgroundImageId":"","bio":"","twitterScreenName":"","socialStats":{"userId":"73d0266697d8","usersFollowedCount":15,"usersFollowedByCount":269,"type":"SocialStats"},"social":{"userId":"lo_661573c0bec8","targetUserId":"73d0266697d8","type":"Social"},"facebookAccountId":"","allowNotes":1,"type":"User"},"homeCollectionId":"","title":"Building an Android Settings Screen (Part 2)","detectedLanguage":"en","latestVersion":"26e6862d7934","latestPublishedVersion":"26e6862d7934","hasUnpublishedEdits":false,"latestRev":1688,"createdAt":1464469345852,"updatedAt":1471895159344,"acceptedAt":0,"firstPublishedAt":1464537061952,"latestPublishedAt":1471895159344,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"How to Create and Fix the Dialogs","bodyModel":{"paragraphs":[{"name":"f5c8","type":3,"text":"Building an Android Settings Screen (Part 2)","markups":[]},{"name":"5fec","type":13,"text":"How to Create and Fix the Dialogs","markups":[]},{"name":"37f0","type":4,"text":"Fixing and Extending the android.support.v7.preference Library","markups":[],"layout":5,"metadata":{"id":"1*8dPldA5KlCFUX4u71G89lQ.png","originalWidth":2500,"originalHeight":800}},{"name":"fd18","type":1,"text":"In the first part of this tutorial we already built and themed our Settings Screen, the next step will be to fix the layout and the theme of the dialogs.","markups":[{"type":3,"start":7,"end":17,"href":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-1-5959aa49337c","title":"","rel":"","anchorType":0},{"type":1,"start":145,"end":152}]},{"name":"fa5e","type":1,"text":"Because, technically, a preference dialog is a v7.app.AlertDialog, we can set their theme to Theme.AppCompat.DayNight.Dialog.Alert with the following entry in our Activity‚Äôs theme.","markups":[{"type":1,"start":163,"end":179},{"type":2,"start":47,"end":65},{"type":2,"start":93,"end":130}]},{"name":"b0b1","type":8,"text":"\x3citem name=\"alertDialogTheme\"\x3e\n    @style/Theme.AppCompat.DayNight.Dialog.Alert\n\x3c/item\x3e","markups":[]},{"name":"736b","type":1,"text":"This allows the dialogs to adapt their colors depending on if it‚Äôs day or night (You can find more information on how to use the DayNight theme here).","markups":[{"type":3,"start":144,"end":148,"href":"https://medium.com/@chrisbanes/appcompat-v23-2-daynight-d10f90c83e94","title":"","rel":"","anchorType":0}]},{"name":"ec31","type":4,"text":"Default look of the preference dialogs","markups":[],"layout":4,"metadata":{"id":"1*ckj1gZVaVCjTOwjy1m2ioQ.png","originalWidth":1200,"originalHeight":900,"isFeatured":true}},{"name":"4fa1","type":1,"text":"After applying the DayNight theme, our dialog should look like this and, as you can see, there are a lot of issues.","markups":[{"type":1,"start":99,"end":114},{"type":2,"start":19,"end":27}]},{"name":"4ef5","type":1,"text":"First of all, the text color of the dialog‚Äôs content is white on a white background.","markups":[{"type":1,"start":18,"end":28}]},{"name":"d4a8","type":1,"text":"The second thing is that the buttons are using the AppCompat‚Äôs default accentColor.","markups":[{"type":1,"start":29,"end":36},{"type":2,"start":51,"end":62}]},{"name":"0c37","type":1,"text":"And the last issue is that the dialogMessage and the EditText do not have enough padding, so they are really close to the dialog‚Äôs edge and the title. Also the dialogMessage is straight below the title, which will definitely not look good, when we make the text visible.","markups":[{"type":1,"start":81,"end":88},{"type":2,"start":31,"end":44},{"type":2,"start":53,"end":61},{"type":2,"start":144,"end":149},{"type":2,"start":160,"end":173},{"type":2,"start":196,"end":201}]},{"name":"2828","type":1,"text":"I have enabled Show layout bounds in the developer options, so we can see the layout of all elements.","markups":[{"type":2,"start":15,"end":33}]},{"name":"0678","type":3,"text":"Fixing the Layout of the Dialog","markups":[]},{"name":"8f64","type":1,"text":"When you take a look at the layout source code of the EditTextPreference‚Äôs dialog (You can find it here), you can see that the simply set the wrong padding for the content‚Äôs LinearLayout. They use android:padding=‚Äù5dip\" which is not enough. Also the space between the dialogMessage and the EditText is set to 48dp which seems a lot to me. We better change this to another value.","markups":[{"type":3,"start":99,"end":103,"href":"https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/res/layout/preference_dialog_edittext.xml","title":"","rel":"","anchorType":0},{"type":2,"start":174,"end":186},{"type":2,"start":197,"end":219},{"type":2,"start":268,"end":281},{"type":2,"start":290,"end":298},{"type":2,"start":309,"end":313}]},{"name":"9076","type":1,"text":"We can find the proper values by looking at the v7.app.AlertDialog‚Äôs layout source code here. We can see that they use ?attr/dialogPreferredPadding as the left and right padding and a dimension abc_dialog_padding_top_material (18dp) as the top padding of the dialog.","markups":[{"type":3,"start":88,"end":92,"href":"https://android.googlesource.com/platform/frameworks/support/+/master/v7/appcompat/res/layout/abc_alert_dialog_material.xml","title":"","rel":"","anchorType":0},{"type":2,"start":48,"end":68},{"type":2,"start":119,"end":147},{"type":2,"start":170,"end":177},{"type":2,"start":194,"end":225},{"type":2,"start":227,"end":231},{"type":2,"start":244,"end":251}]},{"name":"5a9e","type":1,"text":"Now we can create a new dimension resource with the currently discovered value of 18dp, because we will need this more than one time.","markups":[{"type":1,"start":20,"end":42},{"type":2,"start":82,"end":86}]},{"name":"020a","type":8,"text":"\x3cdimen name=\"alert_def_padding\"\x3e18dp\x3c/dimen\x3e","markups":[]},{"name":"a02f","type":1,"text":"After that, we copy us the whole dialog layout source code of the EditText preference from here to a new layout file called pref_dialog_edittext_fix.xml and change the paddings and margins.","markups":[{"type":3,"start":91,"end":95,"href":"https://android.googlesource.com/platform/frameworks/support/+/master/v7/preference/res/layout/preference_dialog_edittext.xml","title":"","rel":"","anchorType":0},{"type":1,"start":124,"end":152},{"type":2,"start":66,"end":74},{"type":2,"start":168,"end":176},{"type":2,"start":181,"end":188}]},{"name":"13bd","type":8,"text":"\x3cScrollView\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:layout_marginTop=\"48dp\"\n    android:layout_marginBottom=\"48dp\"\n    android:overScrollMode=\"ifContentScrolls\"\x3e\n\n    \x3cLinearLayout\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:paddingTop=\"@dimen/alert_def_padding\"\n        android:paddingBottom=\"@dimen/alert_def_padding\"\n        android:paddingStart=\"?dialogPreferredPadding\"\n        android:paddingLeft=\"?dialogPreferredPadding\"\n        android:paddingEnd=\"?dialogPreferredPadding\"\n        android:paddingRight=\"?dialogPreferredPadding\"\n        android:orientation=\"vertical\"\x3e\n        \n        \x3cTextView\n            android:id=\"@android:id/message\"\n            style=\"?android:attr/textAppearanceSmall\"\n            android:layout_marginBottom=\"@dimen/alert_def_padding\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:textColor=\"?android:attr/textColorSecondary\" /\x3e\n        \n        \x3cEditText\n            android:id=\"@android:id/edit\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\" /\x3e\n        \n    \x3c/LinearLayout\x3e\n\x3c/ScrollView\x3e","markups":[{"type":1,"start":394,"end":713},{"type":1,"start":892,"end":946}]},{"name":"82ac","type":1,"text":"We can apply the modified layout to our EditTextPreference in the xml/app_preferences.xml by adding the android:dialogLayout attribute.","markups":[{"type":1,"start":66,"end":89},{"type":2,"start":104,"end":124}]},{"name":"c8d8","type":8,"text":"\x3candroid.support.v7.preference.EditTextPreference\n    android:key=\"key2\"\n    android:title=\"EditText Preference\"\n    android:summary=\"EditText Summary\"\n    android:dialogMessage=\"Dialog Message\"\n    android:defaultValue=\"Default value\"\n    android:dialogLayout=\"@layout/pref_dialog_edittext_fix\" /\x3e","markups":[{"type":1,"start":240,"end":295}]},{"name":"810f","type":1,"text":"You can also add an remove Views from this custom layout, but always keep the EditText with the id @android:id/edit, because the v7.preference library will crash your App with an IllegalStateException if it can not find it. Also, fixing the layout for the ListPreference should be very similar.","markups":[{"type":1,"start":62,"end":73},{"type":2,"start":27,"end":32},{"type":2,"start":78,"end":86},{"type":2,"start":99,"end":115},{"type":2,"start":179,"end":200},{"type":2,"start":256,"end":270}]},{"name":"2813","type":4,"text":"The dialog after applying the layout fix","markups":[],"layout":4,"metadata":{"id":"1*g55zCzyYXs4mokF1b6e8kw.png","originalWidth":1200,"originalHeight":902}},{"name":"4ab8","type":1,"text":"After digging through the layout source code, discovering the right dimensions and applying them to our EditTextPreference, everything in our dialog should now look perfectly aligned.","markups":[{"type":1,"start":165,"end":182},{"type":2,"start":104,"end":122}]},{"name":"1d21","type":1,"text":"The title, the dialogMessage and EditText now have the same padding on the left and right. And we even increased the space between the title and the dialogMessage.","markups":[{"type":2,"start":4,"end":9},{"type":2,"start":15,"end":28},{"type":2,"start":33,"end":41},{"type":2,"start":60,"end":67},{"type":2,"start":135,"end":140},{"type":2,"start":149,"end":162}]},{"name":"4aef","type":3,"text":"Fixing the Theme and Colors","markups":[]},{"name":"a10a","type":1,"text":"We still have the wrong colors for the buttons and for the text in our dialog, which we are now going to fix. If you want to look at the AppCompat theme inheritance, you can find the source here.","markups":[{"type":3,"start":190,"end":194,"href":"https://android.googlesource.com/platform/frameworks/support/+/master/v7/appcompat/res/values/themes_base.xml","title":"","rel":"","anchorType":0},{"type":2,"start":137,"end":146}]},{"name":"147e","type":13,"text":"Fixing the Color of the Buttons","markups":[]},{"name":"4098","type":4,"text":"The dialog before and after changing colorAccent in the dialogs‚Äôs theme","markups":[],"layout":4,"metadata":{"id":"1*6AQ7QuJamFBnJVYJOkLVbQ.png","originalWidth":1200,"originalHeight":900}},{"name":"2c7a","type":1,"text":"Our dialog‚Äôs theme does override colorAccent from our Acivity‚Äôs theme with the default greenish color which is provided in the DayNight.Dialog.Alert theme.","markups":[{"type":2,"start":33,"end":44},{"type":2,"start":127,"end":148}]},{"name":"3d02","type":1,"text":"This is the reason why the dialog buttons do not use colorAccent from our Activity‚Äôs theme.","markups":[{"type":2,"start":53,"end":65}]},{"name":"177d","type":1,"text":"If we want to change the button color, we need to modify our dialog‚Äôs theme.","markups":[]},{"name":"e0fe","type":1,"text":"We do this with the following in our styles.xml. First we create a new style called AppAlertDialog, which inherits from our previous dialog‚Äôs theme. In this new style, we can modify our colorAccent as we want to. After that, we say our Activity‚Äôs theme to use our newly created style as the alertDialogTheme.","markups":[{"type":1,"start":37,"end":47},{"type":2,"start":71,"end":76},{"type":2,"start":84,"end":98},{"type":2,"start":161,"end":166},{"type":2,"start":186,"end":197},{"type":2,"start":278,"end":283},{"type":2,"start":291,"end":307}]},{"name":"d772","type":8,"text":"\x3cstyle name=\"AppTheme\" parent=\"Theme.AppCompat\"\x3e\n    \x3c!-- ... other stuff ... --\x3e\n    \x3citem name=\"preferenceTheme\"\x3e\n        @style/PreferenceThemeOverlay.v14.Material\n    \x3c/item\x3e\n    \x3citem name=\"alertDialogTheme\"\x3e@style/AppAlertDialog\x3c/item\x3e\n\x3c/style\x3e","markups":[{"type":1,"start":183,"end":242}]},{"name":"3470","type":8,"text":"\x3cstyle name=\"AppAlertDialog\"\n        parent=\"Theme.AppCompat.DayNight.Dialog.Alert\"\x3e\n    \x3citem name=\"colorAccent\"\x3e@color/colorAccent\x3c/item\x3e\n\x3c/style\x3e","markups":[{"type":1,"start":0,"end":148}]},{"name":"607a","type":13,"text":"Fixing the Color of the Text","markups":[]},{"name":"392f","type":4,"text":"The dialog before and after changing the theme of the content","markups":[],"layout":4,"metadata":{"id":"1*YpMkWb-yqo1uA8lijDtohQ.png","originalWidth":1200,"originalHeight":900}},{"name":"8dee","type":1,"text":"Since our Activity‚Äôs theme is Theme.AppCompat, which provides white text, and our our dialog‚Äôs theme does not override this, we also get white text in our dialog.","markups":[{"type":2,"start":30,"end":45}]},{"name":"0e16","type":1,"text":"We could override all text colors in our dialog‚Äôs theme by our own, but this would require a lot of work. And if we are using the DayNight theme, it is even harder.","markups":[{"type":2,"start":130,"end":138}]},{"name":"9f2f","type":1,"text":"So the easiest way is to apply the theme to a Layout that includes the content elements of our dialog.","markups":[{"type":2,"start":46,"end":52}]},{"name":"699d","type":1,"text":"First we create a new style, which inherits from a theme that we want to use. In this case it is Theme.AppCompat.DayNight, because we want that the color of the text also adapts depending on if it is day or night. If we would not use the DayNight theme, it could result in dark text on a dark background at night. When we later apply this style as our dialog‚Äôs content theme, it does not inherit the colorAccent from our Activity‚Äôs theme anymore. That‚Äôs why we have to add it to this style again, to keep the current color of the EditText.","markups":[{"type":1,"start":18,"end":27},{"type":2,"start":97,"end":121},{"type":2,"start":238,"end":246},{"type":2,"start":339,"end":344},{"type":2,"start":400,"end":411},{"type":2,"start":484,"end":489},{"type":2,"start":530,"end":538}]},{"name":"3189","type":8,"text":"\x3cstyle name=\"AppAlertDialogContent\"\n        parent=\"Theme.AppCompat.DayNight\"\x3e\n    \x3c!-- To keep the color of EditText --\x3e\n    \x3citem name=\"colorAccent\"\x3e@color/colorAccent\x3c/item\x3e\n\x3c/style\x3e","markups":[]},{"name":"cda0","type":1,"text":"Now we go back to the pref_dialog_edittext_fix.xml file, which we created to fix the layout issues of the EditTextPreference, search for the root Layout and add our theme there.","markups":[{"type":1,"start":22,"end":50},{"type":2,"start":106,"end":124},{"type":2,"start":146,"end":152}]},{"name":"911d","type":8,"text":"\x3cScrollView\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:layout_marginTop=\"48dp\"\n    android:layout_marginBottom=\"48dp\"\n    android:overScrollMode=\"ifContentScrolls\"\n    android:theme=\"@style/AppAlertDialogContent\"\x3e","markups":[{"type":1,"start":281,"end":325}]},{"name":"eeea","type":1,"text":"You can change your dialog‚Äôs content theme as you want.","markups":[]},{"name":"a6ca","type":1,"text":"When we now open our dialog, you should not be able to find any layout or theme issues anymore. But if you do, you should be able to solve them by modifying the layout file or one of our recently created styles.","markups":[]},{"name":"606a","type":1,"text":"This was the second step to create a material design Settings Screen. The next part of this tutorial will be about how to build custom preferences and how to solve the design issues which occur during this process.","markups":[]},{"name":"0778","type":1,"text":"The third Part of this tutorial series is available below.","markups":[{"type":1,"start":4,"end":14}]},{"name":"bd75","type":14,"text":"Building an Android Settings Screen (Part 3)\nHow to Create Custom Preferencesmedium.com","markups":[{"type":3,"start":0,"end":87,"href":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec","title":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec","rel":"","anchorType":0},{"type":1,"start":0,"end":44},{"type":2,"start":45,"end":77}],"mixtapeMetadata":{"mediaResourceId":"e3cddd1dbf08c4d444045de490e69a66","thumbnailImageId":"1*JjknpvGZAZfNxjGo6Ywv9Q.png","href":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec"}},{"name":"f898","type":1,"text":"You can have a look at the project files on GitHub.","markups":[{"type":3,"start":44,"end":50,"href":"https://github.com/jakobulbrich/preferences-demo","title":"","rel":"","anchorType":0},{"type":1,"start":27,"end":40}]},{"name":"98ec","type":1,"text":"Thanks for reading and happy coding üíª.","markups":[]}],"sections":[{"name":"45ac","startIndex":0},{"name":"5c59","startIndex":4},{"name":"076f","startIndex":46},{"name":"b5c0","startIndex":48},{"name":"9c73","startIndex":50}]},"postDisplay":{"coverless":true}},"virtuals":{"allowNotes":true,"previewImage":{"imageId":"1*ckj1gZVaVCjTOwjy1m2ioQ.png","filter":"","backgroundSize":"","originalWidth":1200,"originalHeight":900,"strategy":"resample","height":0,"width":0},"wordCount":1095,"imageCount":5,"readingTime":4.965408805031446,"subtitle":"How to Create and Fix the Dialogs","usersBySocialRecommends":[],"recommends":53,"socialRecommends":[],"isBookmarked":false,"tags":[{"slug":"android","name":"Android","postCount":25674,"virtuals":{"isFollowing":false},"metadata":{"followerCount":15521,"postCount":25674,"coverImage":{"id":"1*DtCCDMBcuFl1VqqaeLdhwg.png","originalWidth":1400,"originalHeight":769,"isFeatured":true}},"type":"Tag"},{"slug":"android-app-development","name":"Android App Development","postCount":8767,"virtuals":{"isFollowing":false},"metadata":{"followerCount":10563,"postCount":8767,"coverImage":{"id":"1*kvzV3t07oGAt-SKxqpmnhA.jpeg","originalWidth":1600,"originalHeight":1200}},"type":"Tag"},{"slug":"android-design","name":"Android Design","postCount":29,"virtuals":{"isFollowing":false},"metadata":{"followerCount":77,"postCount":29,"coverImage":{"id":"1*QMWVcBj-phqy-j_gSqVhGA.png","originalWidth":1200,"originalHeight":600}},"type":"Tag"},{"slug":"android-libraries","name":"Android Libraries","postCount":29,"virtuals":{"isFollowing":false},"metadata":{"followerCount":63,"postCount":29,"coverImage":{"id":"1*EGl3YLvaRdXYV5eZB-OkAQ.png","originalWidth":692,"originalHeight":254}},"type":"Tag"},{"slug":"android-tutorials","name":"Android Tutorials","postCount":21,"virtuals":{"isFollowing":false},"metadata":{"followerCount":111,"postCount":21,"coverImage":{"id":"1*5yKHuNTsBSMk1GpiEeJhng.jpeg","originalWidth":1280,"originalHeight":720}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":2,"links":{"entries":[{"url":"https://medium.com/@chrisbanes/appcompat-v23-2-daynight-d10f90c83e94","alts":[{"type":2,"url":"medium://p/d10f90c83e94"},{"type":3,"url":"medium://p/d10f90c83e94"}]},{"url":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-3-ae9793fd31ec","alts":[{"type":2,"url":"medium://p/ae9793fd31ec"},{"type":3,"url":"medium://p/ae9793fd31ec"}]},{"url":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-1-5959aa49337c","alts":[{"type":2,"url":"medium://p/5959aa49337c"},{"type":3,"url":"medium://p/5959aa49337c"}]}],"version":"0.3","generatedAt":1471903780687},"isLockedPreviewOnly":false,"takeoverId":"","metaDescription":"","totalClapCount":0},"coverless":true,"slug":"building-a-settings-screen-for-android-part-2","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":true,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"building-a-settings-screen-for-android-part-2-2ba63e2d7d1d","previewContent":{"bodyModel":{"paragraphs":[{"name":"previewImage","type":4,"text":"","layout":10,"metadata":{"id":"1*ckj1gZVaVCjTOwjy1m2ioQ.png","originalWidth":1200,"originalHeight":900,"isFeatured":true}},{"name":"f5c8","type":3,"text":"Building an Android Settings Screen (Part 2)","markups":[],"alignment":1},{"name":"5fec","type":13,"text":"How to Create and Fix the Dialogs","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d","approvedHomeCollectionId":"","newsletterId":"","webCanonicalUrl":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d","mediumUrl":"https://medium.com/@JakobUlbrich/building-a-settings-screen-for-android-part-2-2ba63e2d7d1d","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"isSponsored":false,"isRequestToPubDisabled":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"type":"Post"},"mentionedUsers":[],"collaborators":[],"membershipPlans":[],"collectionUserRelations":[],"mode":null,"references":{"User":{"73d0266697d8":{"userId":"73d0266697d8","name":"Jakob Ulbrich","username":"JakobUlbrich","createdAt":1456964903375,"lastPostCreatedAt":1490290514279,"imageId":"1*50pfRWptJGHYxe-dQX_pMg.png","backgroundImageId":"","bio":"","twitterScreenName":"","socialStats":{"userId":"73d0266697d8","usersFollowedCount":15,"usersFollowedByCount":269,"type":"SocialStats"},"social":{"userId":"lo_661573c0bec8","targetUserId":"73d0266697d8","type":"Social"},"facebookAccountId":"","allowNotes":1,"type":"User"}},"Social":{"73d0266697d8":{"userId":"lo_661573c0bec8","targetUserId":"73d0266697d8","type":"Social"}},"SocialStats":{"73d0266697d8":{"userId":"73d0266697d8","usersFollowedCount":15,"usersFollowedByCount":269,"type":"SocialStats"}}}})
// ]]></script></body></html>