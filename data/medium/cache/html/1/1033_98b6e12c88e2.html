<!DOCTYPE html><html xmlns:cc="http://creativecommons.org/ns#"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>ส่งความรักวันวาเลนไทน์แบบ I❤T ด้วย NETPIE – Chavee Issariyapat – Medium</title><link rel="canonical" href="https://medium.com/@chaveeissariyapat/%E0%B8%AA%E0%B9%88%E0%B8%87%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%A3%E0%B8%B1%E0%B8%81%E0%B8%A7%E0%B8%B1%E0%B8%99%E0%B8%A7%E0%B8%B2%E0%B9%80%E0%B8%A5%E0%B8%99%E0%B9%84%E0%B8%97%E0%B8%99%E0%B9%8C%E0%B9%81%E0%B8%9A%E0%B8%9A-i-t-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-netpie-98b6e12c88e2"><meta name="title" content="ส่งความรักวันวาเลนไทน์แบบ I❤T ด้วย NETPIE – Chavee Issariyapat – Medium"><meta name="referrer" content="unsafe-url"><meta name="description" content="วันวาเลนไทน์มาถึงอีกปีแล้ว ชาวโปรแกรมเมอร์ท่านใดที่กำลังอินเลิฟ ผมขอชวนมาทำโปรเจ็คสนุกๆรับต้อนวันแห่งความรักกันครับ บทความนี้เกิดจากโปรเจคส่วนตัว ที่ลองทำขึ้นมาใช้แล้วรู้สึกว่าเข้าท่ามาก จนอยากจะเอา…"><meta property="og:title" content="ส่งความรักวันวาเลนไทน์แบบ I❤T ด้วย NETPIE – Chavee Issariyapat – Medium"><meta property="og:url" content="https://medium.com/@chaveeissariyapat/%E0%B8%AA%E0%B9%88%E0%B8%87%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%A3%E0%B8%B1%E0%B8%81%E0%B8%A7%E0%B8%B1%E0%B8%99%E0%B8%A7%E0%B8%B2%E0%B9%80%E0%B8%A5%E0%B8%99%E0%B9%84%E0%B8%97%E0%B8%99%E0%B9%8C%E0%B9%81%E0%B8%9A%E0%B8%9A-i-t-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-netpie-98b6e12c88e2"><meta property="og:image" content="https://cdn-images-1.medium.com/max/1200/1*PTASR2nXGD4XwzUt5_v5UQ.png"><meta property="fb:app_id" content="542599432471018"><meta property="og:description" content="วันวาเลนไทน์มาถึงอีกปีแล้ว ชาวโปรแกรมเมอร์ท่านใดที่กำลังอินเลิฟ ผมขอชวนมาทำโปรเจ็คสนุกๆรับต้อนวันแห่งความรักกันครับ บทความนี้เกิดจากโปรเจค…"><meta name="twitter:description" content="วันวาเลนไทน์มาถึงอีกปีแล้ว ชาวโปรแกรมเมอร์ท่านใดที่กำลังอินเลิฟ ผมขอชวนมาทำโปรเจ็คสนุกๆรับต้อนวันแห่งความรักกันครับ บทความนี้เกิดจากโปรเจค…"><meta name="twitter:image:src" content="https://cdn-images-1.medium.com/max/1200/1*PTASR2nXGD4XwzUt5_v5UQ.png"><link rel="publisher" href="https://plus.google.com/103654360130207659246"><link rel="author" href="https://medium.com/@chaveeissariyapat"><meta property="author" content="Chavee Issariyapat"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta property="article:publisher" content="https://www.facebook.com/medium"><meta property="article:author" content="https://medium.com/@chaveeissariyapat"><meta property="fb:smart_publish:robots" content="noauto"><meta name="robots" content="index, follow"><meta property="article:published_time" content="2017-02-14T03:06:55.829Z"><meta name="twitter:site" content="@Medium"><meta property="og:site_name" content="Medium"><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="7 min read"><script type="application/ld+json">{"@context":"http://schema.org","@type":"NewsArticle","image":{"@type":"ImageObject","width":808,"height":394,"url":"https://cdn-images-1.medium.com/max/808/1*PTASR2nXGD4XwzUt5_v5UQ.png"},"datePublished":"2017-02-14T03:06:55.829Z","dateModified":"2017-02-15T19:33:15.255Z","headline":"ส่งความรักวันวาเลนไทน์แบบ I❤T ด้วย NETPIE","name":"ส่งความรักวันวาเลนไทน์แบบ I❤T ด้วย NETPIE","keywords":["IoT","Netpie","Valentine","Html5","JavaScript"],"author":{"@type":"Person","name":"Chavee Issariyapat","url":"https://medium.com/@chaveeissariyapat"},"creator":["Chavee Issariyapat"],"mainEntityOfPage":"https://medium.com/@chaveeissariyapat/%E0%B8%AA%E0%B9%88%E0%B8%87%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%A3%E0%B8%B1%E0%B8%81%E0%B8%A7%E0%B8%B1%E0%B8%99%E0%B8%A7%E0%B8%B2%E0%B9%80%E0%B8%A5%E0%B8%99%E0%B9%84%E0%B8%97%E0%B8%99%E0%B9%8C%E0%B9%81%E0%B8%9A%E0%B8%9A-i-t-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-netpie-98b6e12c88e2"}</script><meta name="twitter:app:name:iphone" content="Medium"><meta name="twitter:app:id:iphone" content="828256236"><meta name="twitter:app:url:iphone" content="medium://p/98b6e12c88e2"><meta property="al:ios:app_name" content="Medium"><meta property="al:ios:app_store_id" content="828256236"><meta property="al:android:package" content="com.medium.reader"><meta property="al:android:app_name" content="Medium"><meta property="al:ios:url" content="medium://p/98b6e12c88e2"><meta property="al:android:url" content="medium://p/98b6e12c88e2"><meta property="al:web:url" content="https://medium.com/@chaveeissariyapat/%E0%B8%AA%E0%B9%88%E0%B8%87%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%A3%E0%B8%B1%E0%B8%81%E0%B8%A7%E0%B8%B1%E0%B8%99%E0%B8%A7%E0%B8%B2%E0%B9%80%E0%B8%A5%E0%B8%99%E0%B9%84%E0%B8%97%E0%B8%99%E0%B9%8C%E0%B9%81%E0%B8%9A%E0%B8%9A-i-t-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-netpie-98b6e12c88e2"><link rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml" /><link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/98b6e12c88e2" /><meta name="theme-color" content="#000000"><link rel="stylesheet" href="https://cdn-static-1.medium.com/_/fp/css/main-base.g2e09PlZK_j3Lw2AgNmbfQ.css"><script>if (window.top !== window.self) window.top.location = window.self.location.href;var OB_startTime = new Date().getTime(); var OB_loadErrors = []; function _onerror(e) { OB_loadErrors.push(e) }; if (document.addEventListener) document.addEventListener("error", _onerror, true); else if (document.attachEvent) document.attachEvent("onerror", _onerror); function _asyncScript(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = u; f.parentNode.insertBefore(s, f);}function _asyncStyles(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("link"); s.rel = "stylesheet"; s.href = u; f.parentNode.insertBefore(s, f); return s}var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-24232453-2"]); _gaq.push(["_setDomainName", window.location.hostname]); _gaq.push(["_setAllowLinker", true]); _gaq.push(["_trackPageview"]);_asyncScript(("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js");(new Image()).src = "/_/stat?event=pixel.load&origin=" + encodeURIComponent(location.origin);</script><script>(function () {var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight; var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth; document.write("<style>section.section-image--fullBleed.is-backgrounded {padding-top: " + Math.round(1.1 * height) + "px;}section.section-image--fullScreen.is-backgrounded, section.section-image--coverFade.is-backgrounded {min-height: " + height + "px; padding-top: " + Math.round(0.5 * height) + "px;}.u-sizeViewHeight100 {height: " + height + "px !important;}.u-sizeViewHeight110 {height: " + Math.round(1.1 * height) + "px !important;}.u-sizeViewHeightMin100 {min-height: " + height + "px !important;}.u-sizeViewHeightMax100 {max-height: " + height + "px !important;}section.section-image--coverFade {height: " + height + "px;}.section-aspectRatioViewportPlaceholder, .section-aspectRatioViewportCropPlaceholder {max-height: " + height + "px;}.section-aspectRatioViewportBottomSpacer, .section-aspectRatioViewportBottomPlaceholder {max-height: " + Math.round(0.5 * height) + "px;}.zoomable:before {top: " + (-1 * height) + "px; left: " + (-1 * width) + "px; padding: " + height + "px " + width + "px;}</style>");})()</script><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]--><link rel="icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-medium.TAS6uQ-Y7kcKgi0xjcYHXw.ico" class="js-favicon"><link rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/152/152/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/120/120/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/76/76/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/60/60/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg" color="#171717"></head><body itemscope class=" postShowScreen is-noJs"><script>document.body.className = document.body.className.replace(/(^|\s)is-noJs(\s|$)/, "$1is-js$2")</script><div class="site-main" id="container"><div class="butterBar butterBar--error"></div><div class="surface"><div id="prerendered" class="screenContent"><canvas class="canvas-renderer"></canvas><div class="container u-maxWidth740 u-xs-margin0 notesPositionContainer js-notesPositionContainer"></div><div class="metabar u-clearfix js-metabar"><div class="metabar-inner u-marginAuto u-maxWidth1000 u-paddingLeft20 u-paddingRight20 js-metabarMiddle"><div class="metabar-block metabar-block--left u-floatLeft u-height65 u-xs-height56"><a href="https://medium.com/" class="siteNav-logo" data-log-event="home"><span class="svgIcon svgIcon--logoNew svgIcon--45px is-flushLeft"><svg class="svgIcon-use" width="45" height="45"  viewBox="-17 18 45 45" data-multipart="true"><path d="M11.525 28.078c-.472-.225-.858.002-.858.506v20.044l8.616 4.113c.948.46 1.717.14 1.717-.7v-19.3a.22.22 0 0 0-.124-.19l-9.35-4.46v-.01z"/><path d="M.333 43.696l9.83-15.247c.278-.43.89-.6 1.36-.38l9.364 4.47c.06.03.082.1.047.15L10.666 48.63.333 43.698v-.002z"/><path d="M-8.57 28.35c-.786-.375-1.053-.096-.592.62L.333 43.696l10.333 4.932L.356 32.635a.156.156 0 0 0-.06-.054l-8.866-4.23z"/><path d="M.333 52.033c0 .84-.643 1.22-1.43.844l-8.045-3.84c-.472-.224-.858-.82-.858-1.325V28.89c0-.672.515-.976 1.145-.675l9.133 4.36a.092.092 0 0 1 .055.084v19.37z"/></svg></span><span class="u-textScreenReader">Homepage</span></a></div><div class="metabar-block u-floatRight u-xs-absolute u-xs-textAlignRight u-xs-right0 u-xs-marginRight20 u-height65 u-xs-height56"><div class="buttonSet"><a class="button button--primary button--chromeless u-accentColor--buttonNormal is-inSiteNavBar u-lineHeight30 u-height32"  href="https://medium.com/m/signin?redirect=https%3A%2F%2Fmedium.com%2F%40chaveeissariyapat%2F%25E0%25B8%25AA%25E0%25B9%2588%25E0%25B8%2587%25E0%25B8%2584%25E0%25B8%25A7%25E0%25B8%25B2%25E0%25B8%25A1%25E0%25B8%25A3%25E0%25B8%25B1%25E0%25B8%2581%25E0%25B8%25A7%25E0%25B8%25B1%25E0%25B8%2599%25E0%25B8%25A7%25E0%25B8%25B2%25E0%25B9%2580%25E0%25B8%25A5%25E0%25B8%2599%25E0%25B9%2584%25E0%25B8%2597%25E0%25B8%2599%25E0%25B9%258C%25E0%25B9%2581%25E0%25B8%259A%25E0%25B8%259A-i-t-%25E0%25B8%2594%25E0%25B9%2589%25E0%25B8%25A7%25E0%25B8%25A2-netpie-98b6e12c88e2" data-action="sign-in-prompt" data-redirect="https://medium.com/@chaveeissariyapat/%E0%B8%AA%E0%B9%88%E0%B8%87%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%A3%E0%B8%B1%E0%B8%81%E0%B8%A7%E0%B8%B1%E0%B8%99%E0%B8%A7%E0%B8%B2%E0%B9%80%E0%B8%A5%E0%B8%99%E0%B9%84%E0%B8%97%E0%B8%99%E0%B9%8C%E0%B9%81%E0%B8%9A%E0%B8%9A-i-t-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-netpie-98b6e12c88e2" data-action-source="nav_signup">Sign in / Sign up</a></div></div></div></div><div class="metabar metabar--spacer js-metabarSpacer u-height65 u-xs-height56"></div><main role="main"><article class=" u-sizeViewHeightMin100 u-overflowHidden postArticle postArticle--full u-marginBottom40"  lang="th"><header class="container u-maxWidth740"><div class="postMetaHeader u-paddingBottom10 row"><div class="col u-size12of12 js-postMetaLockup"><div class="postMetaLockup postMetaLockup--authorWithBio u-flex js-postMetaLockup"><div class="u-flex0"><a class="link avatar u-baseColor--link"  href="https://medium.com/@chaveeissariyapat?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="b2c57632395c" data-action-type="hover" data-user-id="b2c57632395c" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/60/60/0*gc32sBjlliJNaB0L." class="avatar-image avatar-image--small" alt="Go to the profile of Chavee Issariyapat"></a></div><div class="u-flex1 u-paddingLeft15 u-overflowHidden"><a class="link link link--darken link--darker u-baseColor--link"  href="https://medium.com/@chaveeissariyapat?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="b2c57632395c" data-action-type="hover" data-user-id="b2c57632395c" dir="auto">Chavee Issariyapat</a><span class="followState js-followState buttonSet-inner" data-user-id="b2c57632395c"><button class="button u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSize12 u-uiTextMedium u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-marginLeft10 u-marginTopNegative2 u-xs-hide"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="post_header_lockup"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSize12 u-uiTextMedium u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-marginLeft10 u-marginTopNegative2 u-xs-hide"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/b2c57632395c" data-action-source="post_header_lockup_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span><div class="postMetaInline u-noWrapWithEllipsis u-xs-normalWrap u-xs-lineClamp2">Lead developer at NETPIE.io | Researcher at NECTEC</div><div class="postMetaInline js-testPostMetaInlineSupplemental"><time datetime="2017-02-14T03:06:55.829Z">Feb 13</time><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="7 min read"></span></div></div></div></div></div></header><div class="postArticle-content js-postField js-notesSource js-trackedPost"  data-post-id="98b6e12c88e2" data-source="post_page" data-tracking-context="postPage"><section name="2aba" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h1 name="f06e" id="f06e" class="graf graf--h3 graf--leading graf--title">ส่งความรักวันวาเลนไทน์แบบ I❤T ด้วย NETPIE</h1><figure name="72ee" id="72ee" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 341px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 48.8%;"></div><img class="graf-image" data-image-id="1*PTASR2nXGD4XwzUt5_v5UQ.png" data-width="808" data-height="394" data-action="zoom" data-action-value="1*PTASR2nXGD4XwzUt5_v5UQ.png" src="https://cdn-images-1.medium.com/max/800/1*PTASR2nXGD4XwzUt5_v5UQ.png"></div></figure><p name="50c2" id="50c2" class="graf graf--p graf-after--figure graf--trailing">วันวาเลนไทน์มาถึงอีกปีแล้ว ชาวโปรแกรมเมอร์ท่านใดที่กำลังอินเลิฟ ผมขอชวนมาทำโปรเจ็คสนุกๆรับต้อนวันแห่งความรักกันครับ บทความนี้เกิดจากโปรเจคส่วนตัว ที่ลองทำขึ้นมาใช้แล้วรู้สึกว่าเข้าท่ามาก จนอยากจะเอามาแบ่งปันกัน เผื่อใครจะเอาไปต่อยอดทำอะไรที่น่าสนุกยิ่งขึ้น สิ่งที่ผมจะเอามาแชร์คือ การสร้าง canvas ที่เชื่อมสองคนที่อยู่ห่างกันเข้าด้วยกันครับ เหมือนมีแผ่นกระดาษ ที่เราสามารถแต้มสีเติมเส้นลงไปได้ และไม่ว่าจะอยู่ที่ไหนในโลก ทุกอย่างที่ทั้งสองฝ่ายเขียนลงไป จะซิงค์ถึงกันแบบเรียลไทม์ การใช้งานก็ง่าย ไม่ต้องลง app ไม่ต้องตั้ง server กลางด้วย และโค้ดทั้งหมดจบใน HTML ไฟล์เดียว ฟังดูเหลือเชื่อใช่ไหม เดี๋ยวมาลองดูกันครับ</p></div></div></section><section name="0339" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="9410" id="9410" class="graf graf--h3 graf--leading">เริ่มต้นที่ HTML</h3><p name="8795" id="8795" class="graf graf--p graf-after--h3">เครื่องมือแรกที่เราจะใช้คือ เว็บบราวเซอร์ธรรมดาๆนี่แหละครับ ใช้ได้หมดทั้ง Chrome, Fixfox, Safari, Opera​และ Microsoft Edge ซึ่งทุกวันนี้กลายเป็นของใช้สามัญประจำบ้านไปแล้ว ทราบหรือไม่ว่าเว็บบราวเซอร์ไม่ได้มีประโยชน์แค่ใช้เปิดเว็บนะ มันทำอะไรได้มากกว่านั้นเยอะเลย ต้องขอบคุณเทคโนโลยี HTML5 ที่ผลักดันให้บราวเซอร์ต่างๆในปัจจุบันนี้มีความสามารถสูงขึ้นกว่าเมื่อก่อนมาก เราสามารถรัน application ล้ำๆเทียบเคียง native app บนไฟล์ HTML โดยไม่ต้องลงปลั๊กอินอะไรเลย ตัวอย่างชัดๆก็​ Google Docs ไง การเขียนโปรแกรมก็ใช้ภาษา Javascript ที่แสนสะดวก รันกันตรงหน้าเห็นๆ แบบไม่ต้องคอมไพล์​ มี library ตัวช่วยเยอะแยะจนนับไม่ถ้วน ถือเป็นของเล่นที่เหมาะกับขา dev ผู้มีอารมณ์ศิลปินอย่างที่สุด</p><p name="a625" id="a625" class="graf graf--p graf-after--p">โค้ดโปรแกรมในบทความนี้จะจบทุกอย่างในไฟล์ HTML ไฟล์เดียว เราจะใช้เทคโนโลยีบน HTML5 ที่เรียกกันว่า Canvas ซึ่งเป็นเหมือนผืนผ้าใบเปล่าๆ ที่อนุญาตให้เราวาดรูปลงไปเองได้ตามใจ เรียกว่าอยากได้ปุ่มก็วาดปุ่ม อยากได้กราฟก็วาดกราฟ วาดเองได้ทุกอย่างจริงๆ ในโปรเจ็คนี้ก็เหมือนกันครับ ทุกอย่างจะเป็นการวาดเองทั้งหมด การวาดจะเกิดบน canvas 2 อันที่ซ้อนทับกัน อันบนชื่อ toolCanvas ใช้สำหรับบรรจุแถบเครื่องมือ อันล่างชื่อ drawCanvas เป็นพื้นที่สำหรับลากเมาส์วาดได้อย่างอิสระ โค้ดส่วนของ HTML สำหรับประกาศ canvas จะเป็นแบบนี้</p><pre name="0066" id="0066" class="graf graf--pre graf-after--p">&lt;div style=&quot;position: relative;&quot;&gt;<br>    &lt;canvas id=&quot;toolCanvas&quot; height=&quot;36&quot; width=&quot;1280&quot;    <br>        style=&quot;background-color: white; cursor:pointer;<br>        position: absolute; left: 0; top: 0; z-index: 1;&quot;&gt;<br>    &lt;/canvas&gt;<br>    &lt;canvas id=&quot;drawCanvas&quot; height=&quot;960&quot; width=&quot;1280&quot; <br>        style=&quot;background-color: white; cursor:pointer;<br>        position: absolute; left: 0; top: 0; z-index: 0;&quot;&gt;<br>    &lt;/canvas&gt;<br> &lt;/div&gt;</pre><p name="64f4" id="64f4" class="graf graf--p graf-after--pre">ต่อไปเป็นส่วนของภาพไอคอนเครื่องมือ ผมจะใช้วิธีเขียนโค้ดวนลูปวาดรูปปุ่มด้วยคำสั่งพื้นฐานของ HTML5 อย่าง fillRect — วาดสี่เหลี่ยม, arc — วาดส่วนของวงกลม และ fill — ระบายสี วาดลงบน toolCanvas โดยกำหนดความกว้างปุ่มเท่ากันหมด เพราะตอนตรวจสอบการคลิกจะได้คำนวณได้ง่ายๆ คือแค่หารด้วยความกว้างปุ่มที่รวมช่องว่างแล้วปัดเศษลงก็รู้แล้วว่าเมาส์คลิกโดนปุ่มไหน</p><pre name="259d" id="259d" class="graf graf--pre graf-after--p">const BTNSIZE = 30; BTNGAP = 5;</pre><pre name="1d05" id="1d05" class="graf graf--pre graf-after--pre">var lineColor = 0;<br>var colorList = [&#39;#222222&#39;,&#39;#ac725e&#39;,&#39;#a06be0&#39;,&#39;#fa3a9c&#39;,<br>&#39;#f93a22&#39;,&#39;#ff7537&#39;,&#39;#ffad46&#39;,&#39;#eeee22&#39;,&#39;#42d6B2&#39;,&#39;#4677b5&#39;,<br>&#39;#1bd118&#39;,&#39;#53fc5c&#39;];</pre><pre name="ae85" id="ae85" class="graf graf--pre graf-after--pre">var tg = document.getElementById(&quot;toolCanvas&quot;).getContext(&quot;2d&quot;);</pre><pre name="9bfa" id="9bfa" class="graf graf--pre graf-after--pre">function drawColorButton(x,y,col,selected) {<br>    tg.beginPath();<br>    tg.fillStyle = col;<br>    tg.fillRect(x,y,BTNSIZE,BTNSIZE);<br>    if (selected) {<br>        tg.fillStyle = &#39;#ffffff&#39;;<br>        tg.arc(x+BTNSIZE/2,y+BTNSIZE/2,<br>            (BTNSIZE-18)/2,0,2*Math.PI,false);<br>        tg.fill();<br>     }<br>     tg.fill();<br> }</pre><pre name="fa6f" id="fa6f" class="graf graf--pre graf-after--pre">for (var i=0; i&lt;colorList.length; i++) {<br>    drawColorButton((BTNSIZE+BTNGAP)*i,<br>        BTNGAP,colorList[i],colorList[i]==lineColor);<br>}</pre><p name="5b7f" id="5b7f" class="graf graf--p graf-after--pre">เราก็จะได้ canvas พร้อมจานสีหน้าตาแบบนี้<br>&gt;&gt; <a href="https://jsfiddle.net/chavee/v1hdu23x" data-href="https://jsfiddle.net/chavee/v1hdu23x" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_blank">ดูผลการรันโค้ดตัวอย่าง #1 ได้ที่นี่</a> &lt;&lt;</p><figure name="11af" id="11af" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 669px; max-height: 180px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 26.900000000000002%;"></div><img class="graf-image" data-image-id="1*AwTC2GfZ9S_lBJ60C8julg.png" data-width="669" data-height="180" src="https://cdn-images-1.medium.com/max/800/1*AwTC2GfZ9S_lBJ60C8julg.png"></div></figure><p name="9bf1" id="9bf1" class="graf graf--p graf-after--figure">ส่วนของแถบเครื่องมือ สามารถเลือกสี และขนาดของหัวปากกาได้ การตรวจสอบสถานะของเมาส์ทำได้โดยการเรียก addEventListener เพื่อเอา callback function ไปรับ event ในส่วนของ mousedown, mousemove และ mouseup เวลาเกิด callback แต่ละครั้ง จะมีตัวแปร event ที่ระบุพิกัดของเมาส์ที่จุดเกิดเหตุติดมาด้วย เมื่อคำนวณแล้วพบว่ามีการคลิกเมาส์ที่ปุ่มสีอะไรก็จะ assign ค่าสีให้ตัวแปรที่เก็บค่าสีปัจจุบัน พร้อมทั้งแสดงสัญลักษณ์บนสีที่ถูกเลือก สำหรับขนาดหัวปากกาก็ทำแบบเดียวกัน เท่านี้ก็สามารถวาดรูปบนเว็บบราวเซอร์ได้แล้ว</p><p name="cef1" id="cef1" class="graf graf--p graf-after--p">โค้ดส่วนของการตรวจสอบการคลิกปุ่มเขียนประมาณข้างล่างนี้ เราจะเก็บโค้ดของการวาดปุ่มทั้งหมดเข้าไปอยู่ในฟังก์ชั่น drawToolBar() ให้หมด เพื่อให้สะดวกต่อการเรียกใช้ เพราะเราต้องเรียกฟังก์ชั่นนี้ซ้ำทุกครั้งที่มีการเปลี่ยนสี หรือขนาดปากกา</p><pre name="f97c" id="f97c" class="graf graf--pre graf-after--p">var drawCanvasRect = drawCanvas.getBoundingClientRect();</pre><pre name="d0e1" id="d0e1" class="graf graf--pre graf-after--pre">toolCanvas.addEventListener(&#39;mousedown&#39;, function(e){</pre><pre name="b795" id="b795" class="graf graf--pre graf-after--pre">    mX = e.pageX - drawCanvasRect.left;  <em class="markup--em markup--pre-em">//คำนวณตำแหน่งสัมพัทธ์กับ canvas</em><br>    mY = e.pageY - drawCanvasRect.top;</pre><pre name="35f2" id="35f2" class="graf graf--pre graf-after--pre">    var buttonNo = Math.floor(mX/ (BTNSIZE+BTNGAP));<br>    if (buttonNo &gt;= 0 &amp;&amp; buttonNo&lt;colorList.length) {<br>        lineColor = colorList[buttonNo];<br>        drawToolBar();<br>    }<br>});</pre><p name="8e3d" id="8e3d" class="graf graf--p graf-after--pre">ถึงตอนนี้แถบเครื่องมือเราสามารถคลิกได้แล้ว<br>&gt;&gt; <a href="https://jsfiddle.net/chavee/bnmx4fb2" data-href="https://jsfiddle.net/chavee/bnmx4fb2" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">ดูผลการรันโค้ดตัวอย่าง #2 ได้ที่นี่</a> &lt;&lt;</p><p name="96b5" id="96b5" class="graf graf--p graf-after--p">ส่วนของการลากเส้น ขั้นตอนการทำงานก็ตรงไปตรงมาเหมือนลากเส้นต่อจุดธรรมดา เมื่อไหร่ที่เมาส์ถูกคลิก ก็จะเกิด mousedown callback ของ drawCanvas พร้อมกับแจ้งพิกัดที่ถูกคลิก เราจะถือโอกาสนี้เก็บพิกัดปากกาไว้ และปรับเข้าสู่ draw mode หลังจากนั้น ถ้ามีการลากเมาส์ ก็จะเกิด mousemove callback ที่มาพร้อมพิกัดใหม่ของเมาส์ เราจะใช้คำสั่ง lineTo ลากเส้นต่อจากจุดก่อนหน้าที่เก็บไว้มายังจุดใหม่ พร้อมอัพเดตพิกัดปากกาปัจจุบัน และทำแบบนี้ไปเรื่อยๆ จนกว่าจะมีการปล่อยเมาส์ ถึงตอนนี้เราก็จะสามารถวาดรูปบน canvas ได้จริงๆแล้ว<br>&gt;&gt; <a href="https://jsfiddle.net/chavee/vn6qc3d7" data-href="https://jsfiddle.net/chavee/vn6qc3d7" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_blank">ดูผลการรันโค้ดตัวอย่าง #3 ได้ที่นี่</a> &lt;&lt;</p><figure name="20dc" id="20dc" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 669px; max-height: 180px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 26.900000000000002%;"></div><img class="graf-image" data-image-id="1*T_X0Xr6wENOQJA17I68Uhw.png" data-width="669" data-height="180" src="https://cdn-images-1.medium.com/max/800/1*T_X0Xr6wENOQJA17I68Uhw.png"></div></figure><h3 name="3015" id="3015" class="graf graf--h3 graf-after--figure"><strong class="markup--strong markup--h3-strong">การเชื่อมต่อผ่าน NETPIE</strong></h3><p name="a7a2" id="a7a2" class="graf graf--p graf-after--h3">มาถึงส่วนสำคัญของโปรแกรมแล้ว นั่นคือเราจะเชื่อมบราวเซอร์ของเราเข้ากับบราวเซอร์ของอีกฝ่ายได้อย่างไร ตรงนี้เรามีตัวช่วยครับ เราจะมาลองใช้ “<a href="https://netpie.io" data-href="https://netpie.io" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">NETPIE</a>” กัน แนะนำเบื้องต้นสำหรับคนที่ยังไม่รู้จักนะครับ <a href="https://netpie.io" data-href="https://netpie.io" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">NETPIE</a> เป็น IOT platform ที่พัฒนาขึ้นมาโดยศูนย์เทคโนโลยีอิเล็กทรอนิกส์และคอมพิวเตอร์แห่งชาติ หรือ NECTEC ที่เปิดให้บริการฟรีสำหรับนักพัฒนา เพื่อนำไปใช้สร้างสรรค์ IOT application ใหม่ๆ</p><figure name="cae3" id="cae3" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 603px; max-height: 313px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 51.9%;"></div><img class="graf-image" data-image-id="1*g8QqNnzHtVuHiV6MsS0Drg.png" data-width="603" data-height="313" src="https://cdn-images-1.medium.com/max/800/1*g8QqNnzHtVuHiV6MsS0Drg.png"></div></figure><p name="1db9" id="1db9" class="graf graf--p graf-after--figure">นักพัฒนาส่วนใหญ่มักจะมองว่า IOT platform เป็นเรื่องของการเขียนโปรแกรมบน ฮาร์ดแวร์ แต่จริงๆแล้วนักพัฒนาซอฟท์แวร์ก็สามารถใช้ประโยชน์จาก <a href="https://netpie.io" data-href="https://netpie.io" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_blank">NETPIE</a> ได้เหมือนกันนะ เพราะนอกจาก library สำหรับ hardware แล้ว <a href="https://netpie.io" data-href="https://netpie.io" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_blank">NETPIE</a> ยังมี client library ที่รองรับภาษา Python, Node.js, C#, Android Studio รวมไปถึง HTML5 Javascript ด้วย เราจึงสามารถพัฒนาซอฟท์แวร์ด้วยภาษาเหล่านี้ให้มาเชื่อมต่อกันได้อย่างง่ายๆ ซึ่งในโปรเจ็คนี้ เราจะลองใช้ HTML5 Javascript library สำหรับสร้างการเชื่อมต่อของผืนผ้าใบบนเว็บบราวเซอร์กัน สำหรับใครที่ยังไม่มี account สามารถสมัครสมาชิกได้ที่เว็บ <a href="https://netpie.io" data-href="https://netpie.io" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://netpie.io</a> เลยครับ จากนั้นทำการสร้าง AppID และ Key ให้เรียบร้อย แนะนำให้สร้าง key ชนิด “session key” เพราะ identity จะได้ไม่ฝังติดถาวรลงไปในบราวเซอร์ การใช้ NETPIE บน HTML นั้นแสนจะสะดวก เพราะไม่ต้องดาวน์โหลดอะไรเลย เพียงแค่เพิ่ม HTML tag ตามนี้ก็พอ</p><pre name="a0bd" id="a0bd" class="graf graf--pre graf-after--p">&lt;script src=&quot;<a href="https://cdn.netpie.io/microgear.js" data-href="https://cdn.netpie.io/microgear.js" class="markup--anchor markup--pre-anchor" rel="nofollow noopener" target="_blank">https://cdn.netpie.io/microgear.js</a>&quot;&gt;&lt;/script&gt;</pre><p name="cfe0" id="cfe0" class="graf graf--p graf-after--pre">โค้ด Javascript ส่วนของการเชื่อมต่อ NETPIE เป็นดังนี้</p><pre name="029a" id="029a" class="graf graf--pre graf-after--p">const APPID     = &quot;<em class="markup--em markup--pre-em">APPID</em>&quot;;<br>const APPKEY    = &quot;<em class="markup--em markup--pre-em">KEY</em>&quot;;<br>const APPSECRET = &quot;<em class="markup--em markup--pre-em">SECRET</em>&quot;;</pre><pre name="909a" id="909a" class="graf graf--pre graf-after--pre">var myID = Math.floor(Math.random()*100000).toString();<br>var member = [];</pre><pre name="fa35" id="fa35" class="graf graf--pre graf-after--pre">var microgear = Microgear.create({<br>    key: APPKEY,<br>    secret: APPSECRET,<br>    alias : myID<br>});</pre><pre name="7fbe" id="7fbe" class="graf graf--pre graf-after--pre">microgear.on(&#39;connected&#39;, function() {<br>    microgear.subscribe(&#39;/draw/+&#39;);<br>});</pre><pre name="60fa" id="60fa" class="graf graf--pre graf-after--pre">microgear.on(&#39;present&#39;, function(m) {<br>    if (m.type==&#39;online&#39; &amp;&amp; m.alias != myID) {<br>        if (member.indexOf(m.alias)==-1) member.push(m.alias);<br>    }<br>});</pre><pre name="d3cc" id="d3cc" class="graf graf--pre graf-after--pre">microgear.on(&#39;absent&#39;, function(m) {<br>    if (m.type==&#39;offline&#39;) {<br>        delete member.splice(member.indexOf(m.alias),1);<br>    }<br>});</pre><pre name="ad57" id="ad57" class="graf graf--pre graf-after--pre">microgear.connect(APPID);</pre><p name="f6cc" id="f6cc" class="graf graf--p graf-after--pre">อธิบายสั้นๆ เริ่มแรก จะทำการสร้าง microgear object ขึ้นมา ด้วย key และ secret ที่ได้มาจากเว็บ netpie.io และสุ่มค่า myID ขึ้นมา ทั้งนี้เนื่องจากการรัน application นี้ เราจะใช้ไฟล์​ html เดียวกันหมด ไม่ว่าจะเปิดกี่บราวเซอร์ กี่เครื่อง ก็จะเกิดสมาชิกใหม่ขึ้นมาตลอด แต่ทีนี้เราอยากจะแยกแยะสมาชิกให้มีความแตกต่างกันบ้าง เลยต้องใช้วิธีสุ่มค่า ID ของใครของมันขึ้นมา (ความจริง NETPIE ก็มีการออก access token ที่ unique ให้เหมือนกัน แต่เราจะไม่ใช้) โค้ดโปรแกรมจะเป็นการ handle event ต่างๆ ได้แก่</p><ul class="postList"><li name="a25e" id="a25e" class="graf graf--li graf-after--p">เมื่อมี event “<em class="markup--em markup--li-em">connected</em>” ก็จะทำการ subscribe topic “/draw/+” เป็นการบอกว่า client ทางนี้สนใจ message ที่มี topic เป็น /draw/ และตามด้วยคำอะไรก็ได้อีก 1 คำ ซึ่งจะหมายถึง message ที่เกิดจากการวาดของสมาชิกทุกคน เพราะว่าเวลาที่มีการเขียน สมาชิกแต่ละคนจะทำการ publish message ไปที่ topic /draw/<em class="markup--em markup--li-em">myID</em> โดย myID เป็น ID ของคนเขียน</li><li name="e4e7" id="e4e7" class="graf graf--li graf-after--li">เมื่อมี event “present” ก็คือ มีสมาชิกใหม่เข้ามา ก็จะเพิ่มเข้าไปในรายชื่อสมาชิก</li><li name="2285" id="2285" class="graf graf--li graf-after--li">เมื่อมี event “absent” ก็คือ มีสมาชิก offline หายไป ก็จะลบออกจากลิสต์ เราต้องเก็บรายชื่อสมาชิก เพราะจะได้เอาจำนวนสมาชิกที่เชื่อมต่อเข้ามาไปใช้แสดงสภานะ</li></ul><p name="8e40" id="8e40" class="graf graf--p graf-after--li">สุดท้ายก็เรียกฟังก์ชั่น microgear.connect(APPID) เพื่อเชื่อมต่อไปยัง cloud service ของ NETPIE ไปที่ APPID ของเรา ในส่วนของการส่งลายมือจากฝั่งหนึ่งไปยังอีกฝั่งหนึ่ง เราจะใช้การเก็บพิกัดจุดที่เมาส์ถูกลากไปตลอดทางต่อๆกันเป็น string ทุกๆ 200 มิลลิวินาที จะทำการส่งออกไปครั้งหนึ่ง เนื่องจาก NETPIE มี rate limit อยู่ ถ้าส่ง message ออกไปถี่ๆและนานเกินไป client จะถูกเตะออกมาได้ ตัวอย่างข้อความที่ส่งออกไปในแต่ละครั้ง เป็นดังนี้</p><p name="54f8" id="54f8" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">#4677b5;8;391,222;390,235;388,249;388,260;389,265;392,270;397,276;403,281;411,286;420,293;425,294;426,294;427,294</em></p><p name="d977" id="d977" class="graf graf--p graf-after--p">ค่าแรกเป็นค่าสีของปากกา คั่นด้วย ; ตามด้วยขนาดของหัวปากกา จากนั้นจะเป็นค่าพิกัดในรูปของ <em class="markup--em markup--p-em">X</em>,<em class="markup--em markup--p-em">Y</em> ที่คั่นด้วย ; เมื่ออีกฝ่ายได้รับข้อความ จะเอาไปลากเส้นตาม ก็จะเกิดเป็นลายเส้นที่เหมือนกันทุกประการ โค้ดในส่วนของการจัดการกับ message การเขียน เป็นดังนี้</p><pre name="85cf" id="85cf" class="graf graf--pre graf-after--p">microgear.on(&#39;message&#39;, function(topic,msg) {<br>    if (topic == &#39;/&#39;+APPID+&#39;/draw/&#39;+myID) return;</pre><pre name="e08f" id="e08f" class="graf graf--pre graf-after--pre">var dlist = msg.split(&#39;;&#39;);<br>    dg.strokeStyle = dlist[0];<br>    dg.lineWidth = dlist[1];<br>    dg.lineJoin = dg.lineCap = &#39;round&#39;;</pre><pre name="8444" id="8444" class="graf graf--pre graf-after--pre">for (var i=2; i &lt;dlist.length-1; i++) {<br>        var a = dlist[i].split(&#39;,&#39;);<br>        if (i&gt;2) dg.lineTo(a[0],a[1]);<br>        else {<br>            dg.beginPath();<br>            dg.moveTo(a[0],a[1]);<br>        }<br>    }<br>    dg.stroke();<br>});</pre><p name="86cb" id="86cb" class="graf graf--p graf-after--pre">ขั้นตอนการทำงานก็คือ​เมื่อมี message ใหม่เข้ามา จะนำ message มาตัดเป็น array ด้วยตัวคั่น ; ค่าจากช่องที่ 0 ของ array จะนำมาเซ็ตเป็นสี ค่าจากช่องที่ 1 จะเซตเป็นขนาดปากกา ที่เหลือจะใช้เป็นพิกัด <em class="markup--em markup--p-em">x</em>,<em class="markup--em markup--p-em">y</em> สำหรับลากเส้นต่อๆกันไป</p><p name="cb21" id="cb21" class="graf graf--p graf-after--p">เราต้องไปแก้ฟังก์ชั่นในส่วนของ mousemove callback แทนที่จะลากเส้นบนหน้าจอเฉยๆ ก็เก็บพิกัดลงในตัวแปร drawBuffer ไปด้วย เพื่อรอส่งออกไปที่ฝั่งหนึ่ง</p><pre name="20de" id="20de" class="graf graf--pre graf-after--p">drawCanvas.addEventListener(&#39;mousemove&#39;, function(e){<br>    if (drawMode == 1) {<br>        dg.beginPath();    <br>        dg.lineWidth = lineWidth;<br>        dg.lineTo(mX,mY);<br>        if (!drawBuffer) drawBuffer = mX+&#39;,&#39;+mY+&#39;;&#39;;<br>        mX = e.pageX;<br>        mY = e.pageY;</pre><pre name="7fd8" id="7fd8" class="graf graf--pre graf-after--pre">        dg.lineJoin = dg.lineCap = &#39;round&#39;;<br>        dg.strokeStyle = lineColor;<br>        dg.lineTo(mX,mY);<br>        dg.stroke();<br>        drawBuffer += mX+&#39;,&#39;+mY+&#39;;&#39;;<br>    }<br>});</pre><p name="da72" id="da72" class="graf graf--p graf-after--pre">ในส่วนของการส่งลายมือ เราจะใช้การตั้งเวลาทุก 200 มิลลิวินาทีเพื่อเช็ค drawBuffer ว่ามีค่าหรือเปล่า ถ้ามีก็แปะหัวด้วยสีและขนาดปากกาและทำการ publish ออกไปที่ topic “/draw/<em class="markup--em markup--p-em">myID</em>” และรีเซ็ตตัวแปร drawBuffer</p><pre name="6bfb" id="6bfb" class="graf graf--pre graf-after--p">setInterval(function() {<br>    if (drawBuffer) {<br>        var data = lineColor+&#39;;&#39;+lineWidth+&#39;;&#39;+drawBuffer;<br>        microgear.publish(&#39;/draw/&#39;+myID, data);<br>    }<br>    drawBuffer = &#39;&#39;;<br>},200);</pre><p name="f3e0" id="f3e0" class="graf graf--p graf-after--pre">เมื่อประกอบเข้าด้วยกันเราก็จะได้ผืนผ้าใบที่เชื่อมลายมือถึงกัน เพียงแค่เปิดไฟล์​HTML นี้ในบราวเซอร์เท่านั้น เปิดหลายคนก็ยังได้</p><h3 name="9b24" id="9b24" class="graf graf--h3 graf-after--p">Mobile Device</h3><p name="dff9" id="dff9" class="graf graf--p graf-after--h3">ที่ผ่านมาโปรแกรมถูกเขียนให้ทำงานกับ mouse event มาโดยตลอด นั่นก็หมายความว่า เอาเอาไปใช้บนอุปกรณ์แบบ touch screen ที่ต้องใช้นิ้วลากแทน mouse โปรแกรมจะไม่มีการตอบสนอง เพราะ event ที่เกิดขึ้นแทน ที่จะเป็น mousedown, mousemove, mouseup กลับเป็น touchstart, touchmove และ touchend เพื่อจะให้โปรแกรมทำงานได้ทั้งบน desktop pc และ mobile device เราจึงต้องจับ event ทั้งสองประเภท นอกจากนี้ การใช้งานบนบราวเซอร์ของอุปกรณ์ touch screen นั้น การเลื่อนนิ้วอาจจะเป็นมีผลอย่างอื่นด้วย เช่นอาจจะเป็นการเลื่อนหน้าจอเพื่อ refresh เพื่อป้องกันไม่ให้หน้าจอเลื่อนขณะที่เราวาดรูป เราจึงต้องหยุด event ไว้ที่นี่ ไม่ให้ลอยออกไปข้างนอกให้บราวเซอร์เห็น ด้วยการเรียกฟังก์ชั่น e.preventDefault() ตามโค้ดตัวอย่างข้างล่างนี้ครับ</p><pre name="e26a" id="e26a" class="graf graf--pre graf-after--p">function onPenMove(e) {<br>    if (drawMode == 1) {<br>        dg.beginPath();    <br>        dg.lineWidth = lineWidth;<br>        dg.lineTo(mX,mY);<br>        if (!drawBuffer) drawBuffer = mX+&#39;,&#39;+mY+&#39;;&#39;;<br>        mX = e.pageX - drawCanvasRect.left;<br>        mY = e.pageY - drawCanvasRect.top;</pre><pre name="9d00" id="9d00" class="graf graf--pre graf-after--pre">        dg.lineJoin = dg.lineCap = &#39;round&#39;;<br>        dg.strokeStyle = lineColor;<br>        dg.lineTo(mX,mY);<br>        dg.stroke();<br>        drawBuffer += mX+&#39;,&#39;+mY+&#39;;&#39;;<br>    }<br>    if (e.target == drawCanvas) {<br>        e.preventDefault();<br>    }<br>}</pre><pre name="94bd" id="94bd" class="graf graf--pre graf-after--pre">drawCanvas.addEventListener(&#39;touchmove&#39;, onPenMove);<br>drawCanvas.addEventListener(&#39;mousemove&#39;, onPenMove);</pre><h3 name="669e" id="669e" class="graf graf--h3 graf-after--pre">เพิ่มลูกเล่นให้หัวใจเต้น</h3><p name="4ac3" id="4ac3" class="graf graf--p graf-after--h3">ก่อนจะให้ดูตัวอย่าง ผมขอเพิ่มลูกเล่นอีกเล็กน้อย เพื่อให้มีบรรยากาศของวันวาเลนไทน์ ผมเลยอยากจะสร้างไอคอนเล็กๆรูปหัวใจ​ ซึ่งจะปรากฎขึ้นมาเมื่อบราวเซอร์ของเราเชื่อมต่อ NETPIE สำเร็จ เป็นรูปหัวใจสีเทา แต่เมื่ออีกฝ่ายเปิดไฟล์ html นี้เหมือนกัน ​รูปหัวใจจะเปลี่ยนเป็นสีแดง เราสามารถใช้ไอคอนนี้ตรวจสอบสถานะการออนไลน์ของอีกฝั่งได้</p><p name="a8ac" id="a8ac" class="graf graf--p graf-after--p">รูปหัวใจจะไม่ใช้ gif animation แต่จะเป็นการวาดสดบน canvas โดยอาศัยสมการ parametric ชุดนี้</p><p name="3e10" id="3e10" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">x(t) = 16sin³(t)<br>y(t) = 13cos(t) - 5cos(2t) - 2cos(3t) - cos(4t)<br>where 0 ≤ t &lt;2π</em></p><figure name="d643" id="d643" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 432px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 61.8%;"></div><img class="graf-image" data-image-id="1*eG-uM5bk51T6VQB73y6WEg.png" data-width="850" data-height="525" data-action="zoom" data-action-value="1*eG-uM5bk51T6VQB73y6WEg.png" src="https://cdn-images-1.medium.com/max/800/1*eG-uM5bk51T6VQB73y6WEg.png"></div></figure><p name="cafd" id="cafd" class="graf graf--p graf-after--figure">ที่มา : <a href="http://mathworld.wolfram.com/HeartCurve.html" data-href="http://mathworld.wolfram.com/HeartCurve.html" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">http://mathworld.wolfram.com/HeartCurve.html</a></p><p name="0da2" id="0da2" class="graf graf--p graf-after--p">ยังครับยังไม่พอ เราจะใส่ลูกเล่นน่ารักๆ ให้หัวใจเต้นดึ๋งๆ แสดงอาการตื่นเต้นเหมือนเวลาบอกรักใคร…. วิธีง่ายๆคือใส่ scaling factor ลงไปทั้งสองแกน ให้เปลี่ยนตามเวลา ต้องแบบกลับทิศทางกันด้วยนะ มันจะได้ผลัดกันยืดผลัดกันหด และน่าจะต้องเป็นฟังก์ชั่นแบบ non-linear ด้วย เพราะถ้าเป็น linear การเคลื่อนไหวจะดูแข็งเหมือนหุ่นยนต์เกินไป นอกจากนั้นฟังก์ชั่นน่าจะต้องเป็นเส้นโค้งที่​ smooth ป่องตรงกลางแบบสมมาตรด้วย การวนลูปของอนิเมชั่นจะได้เด้งดึ๋งแบบ smooth ไม่มีเฟรมสะดุด พูดจบก็เห็นกราฟของ Gaussian distribution ลอยมาเลย ว่าแล้วก็ขอยืมฟังก์ชั่นมาใช้หน่อย​ ไม่ต้องเป๊ะมากก็ได้ ค่า mean, variance ไม่สน เอาแค่ประมาณ e ยกกำลังลบของฟังก์ชั่นกำลังสองของเวลา ลองปรับตัวคูณเล็กน้อย เอาไปบวกทางแกน y ด้วยให้มันกระโดดนิดๆ รันดูก็โอเคเลย ผลการมั่วสำเร็จ ผมอัพโหลดโค้ดเฉพาะส่วนของการวาดอนิเมชั่นรูปหัวใจไว้ <a href="https://jsfiddle.net/chavee/ux5cknbj" data-href="https://jsfiddle.net/chavee/ux5cknbj" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">ลองเข้าไปดูของจริงได้ที่นี่ครับ</a></p><figure name="646e" id="646e" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 140px; max-height: 108px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 77.10000000000001%;"></div><img class="graf-image" data-image-id="1*Q8ZQchRw5WAWqAkSO3-98w.gif" data-width="140" data-height="108" src="https://cdn-images-1.medium.com/max/800/1*Q8ZQchRw5WAWqAkSO3-98w.gif"></div></figure><pre name="a6d2" id="a6d2" class="graf graf--pre graf-after--figure">function drawHeart(x,y,phase,style) {<br>    tg.beginPath();<br>    tg.fillStyle = &#39;#ffffff&#39;;<br>    tg.fillRect(x-25,y-25,50,50);<br>    if (style==0) return;<br>        tg.beginPath();<br>        tg.lineWidth = 2;<br>        tg.strokeStyle = &#39;#cccccc&#39;;<br>        tg.fillStyle = &#39;#ff6644&#39;;<br>        for (var t=0; t&lt;2*Math.PI; t+=0.2) {<br>           var k = 1.5*Math.exp(-10*Math.pow(0.5-phase,2));<br>           var px = (17-k)*Math.pow(Math.sin(t),3);<br>           var py = 3*k+(10+k)*Math.cos(t)-5*Math.cos(2*t)<br>                    -2*Math.cos(3*t)-Math.cos(4*t);<br>           tg.lineTo(x+px, y-py);<br>    }<br>    style==2?tg.fill():tg.stroke();<br>}</pre><pre name="0074" id="0074" class="graf graf--pre graf-after--pre">var phase = 0;<br>setInterval(function() {<br>    if (member.length &gt; 0) phase = phase&gt;1?0:phase+0.1;<br>    drawHeart(toolOffset3+3*(BTNSIZE+BTNGAP)+30,20,phase,         <br>        microgear.connected()?member.length&gt;0?2:1:0 );<br>},50);</pre><p name="1cbe" id="1cbe" class="graf graf--p graf-after--pre">อธิบายโค้ดเพิ่มเติมหน่อย ตัวแปร style ในโค้ดข้างบนเป็นโหมดของการวาดหัวใจ ค่าเป็น 0 จะไม่วาด ค่าเป็น 1 จะวาดหัวใจเป็นเส้นสีเทา ใช้ตอนที่เชื่อมต่อ netpie ได้แล้ว (microgear.connected() return ค่า true) ส่วน style เป็น 2 จะวาดหัวใจสีแดง ฟังก์ชั่น setInterval ข้างล่างจะเป็นการรันคำสั่งทุก 50 มิลลิวินาที โดยจะขยับค่า phase และสั่งวาดหัวใจ phase ใหม่เป็นลูปไม่รู้จบ แต่ละครั้งหัวใจก็จะขยับไปเล็กน้อย ตามสมการที่โปรแกรมไว้ ส่วนเงื่อนไขในการเข้าแต่ละโหมดก็คือ ถ้าเชื่อมต่อ NETPIE ได้แล้ว (microgear.connected() ให้ค่า true) ก็จะเข้าโหมด 1 แต่ถ่ามีสมาชิก online อย่างน้อย 1 (member.length&gt;0) ​ก็ให้เข้าโหมด 2</p><h3 name="d77d" id="d77d" class="graf graf--h3 graf-after--p">การเก็บบันทึกลายเส้น</h3><p name="a24b" id="a24b" class="graf graf--p graf-after--h3">การใช้เมาส์วาดรูปสำหรับผมเป็นอะไรที่ลำบากมาก คือกว่าจะวาดรูปให้ดูเป็นรูปซักชิ้น อาจจะต้องวาดซ้ำอยู่หลายรอบ และไม่รู้ว่ารอบไหนถึงจะดูโอเค ผมเลยสร้างตัวช่วยที่เป็นปุ่มบันทึก stroke การวาด สามารถกดอัดได้เหมือนอัดเทป กด play back เพื่อเอาออกมาวาดซ้ำทีหลังเมื่อไหร่ก็ได้ ที่นี้เราก็สามารถซ้อมวาดจนกว่าจะพอใจ โอเคเมื่อไหร่ก็รออีกฝ่ายออนไลน์แล้วกด play เล่น stroke ที่บันทึกไว้ มันจะเล่นซ้ำให้เหมือนกับเรานั่งวาดเองสดๆตอนนั้นเลย</p><p name="2767" id="2767" class="graf graf--p graf-after--p">หลักการทำงานก็ไม่ยากครับ ทำปุ่ม record และปุ่ม play เพิ่มขึ้นมา ถ้ากดปุ่ม record ก็จะพาเข้าสู่โหมดการบันทึกในโหมดนี้ หากมีการวาดเส้น นอกจากจะเกิดการ publish ลายมือออกไปแล้ว string ที่ถูก publish จะถูกเก็บสะสมเข้าไปในตัวแปร recBuffer โดยจะถูกแปะหัวด้วย timestamp เพื่อที่เวลาเอามา play back จะได้ทิ้งช่วงจังหวะเวลาให้เหมือนกับตอนที่วาดได้ ถ้าจะออกจากโหมดบันทึกก็แค่กด record อีกครั้ง สำหรับการ​ play back ก็แค่กดปุ่ม play (ต้อง clear หน้าจอก่อน ถึงจะเห็นผล) ฟังก์ชั่นใน loop ก็จะทำการดึง string ในอาเรย์ recBuffer กลับมา publish ออกไปโดยเว้นระยะเวลาตาม timestamp ที่แปะหัวไว้ message ที่ publish ออกไป จะวนกลับเข้ามาทาง event “message” ซึ่งจะเข้าตรรกะเดิมของฟังก์ชั่นรับ message คือทำเหมือนกับว่าที่มี message ลายมือจากอีกฝ่ายเข้ามา เอามาวาดลงบนจอแบบเดียวกัน เราก็จะเห็นลายมือของเราที่บันทึกไว้ ค่อยๆปรากฏขึ้นทีละเส้นเหมือนมีใครกำลังวาดอยู่</p><p name="59cd" id="59cd" class="graf graf--p graf-after--p">จากโค้ดเดิม เราต้องเขียนโค้ดเพิ่มในส่วนของ loop การส่ง แทนที่จะส่งออกไปเฉยๆ ก็เช็คว่ากำลังอยู่ในโหมดบันทึกอยู่หรือเปล่า ถ้ากบันทึกอยู่ก็จะเก็บค่าเข้าไปไว้ในอาเรย์ recBuffer แต่ถ้าอยู่ในโหมด play ก็ดึงค่าออกมา publish โค้ดจะมีหน้าตาประมาณนี้</p><pre name="9b1e" id="9b1e" class="graf graf--pre graf-after--p">setInterval(function() {<br>    if (recMode != 2) {<br>        if (drawBuffer) {<br>            var data = lineColor+&#39;;&#39;+lineWidth+&#39;;&#39;+drawBuffer;<br>            microgear.publish(&#39;/draw/&#39;+myID, data);<br>            if (recMode == 1) {<br>                if (recBuffer.length==0) recStartTime = Date.now();<br>                recBuffer.push(Date.now()-recStartTime+&#39;&gt;&#39;+data);<br>            }<br>            drawBuffer = &#39;&#39;;<br>        }<br>    }<br>    else {<br>        if (playTick &lt; recBuffer.length) {<br>            var d = recBuffer[playTick].split(&#39;&gt;&#39;);<br>            if (Date.now() &gt;= recStartTime+parseInt(d[0])) {<br>                microgear.publish(&#39;/draw/play_&#39;+myID, d[1]);<br>                playTick++;<br>            }<br>        }<br>        else {<br>            recMode = 0;<br>            drawToolBar();<br>        }<br>    }<br>},200);</pre><h3 name="7f1f" id="7f1f" class="graf graf--h3 graf-after--pre">จับทั้งหมดมารวมกัน</h3><p name="a776" id="a776" class="graf graf--p graf-after--h3">เมื่อทุกอย่างครบ เราก็เอามาประกอบเป็นชิ้นเดียวกัน โค้ดที่สมบูรณ์ผมได้ push ขึ้น github ไว้ที่นี่ <a href="https://github.com/chavee/piecanvas" data-href="https://github.com/chavee/piecanvas" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://github.com/chavee/piecanvas</a> สามารถ download หรือ clone ได้เลย หรือจะเปิดจาก <a href="https://jsfiddle.net/chavee/ux404epk" data-href="https://jsfiddle.net/chavee/ux404epk" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">JSFiddle อันนี้ก็ได้</a></p><p name="c3f6" id="c3f6" class="graf graf--p graf-after--p">ต้องบอกก่อนว่าโค้ดในตัวอย่างนี้ไม่ใช่แบบแผนการเขียนโปรแกรมที่ดีนักนะครับ เพราะตั้งใจจะเขียนแบบตรงไปตรงมาที่สุด ให้ทำตามได้ง่ายๆ และจบได้ในไฟล์เดียว โค้ดทุกอย่างเลยพันกันหมด อยากวาดอะไรก็วาดกันตรงนั้นเลย ปุ่มก็เป็นการวาดบน canvas คำนวณพิกัดการคลิกเองสดๆ ไม่ได้แยกส่วนไปเป็น UI component ที่ต้องมีระบบ event เพราะไม่งั้นจะยาวกว่านี้</p><p name="da5e" id="da5e" class="graf graf--p graf-after--p">อย่าลืม ก่อนจะรันให้แก้ค่า config ในส่วนของบรรทัดที่เป็น APPID, KEY และ SECRET ด้วยนะครับ จะต้องใช้ค่าที่ได้จาก netpie.io มาแทนที่ 3 บรรทัดนี้</p><pre name="00f0" id="00f0" class="graf graf--pre graf-after--p">&lt;script&gt;<br>    const APPID     = &quot;_<em class="markup--em markup--pre-em">APPID_</em>&quot;;<br>    const APPKEY    = &quot;_<em class="markup--em markup--pre-em">KEY_</em>&quot;;<br>    const APPSECRET = &quot;_<em class="markup--em markup--pre-em">SECRET_</em>&quot;;<br>&lt;/script&gt;</pre><p name="007b" id="007b" class="graf graf--p graf-after--pre">หลังจากแก้แล้วก็สามารถคลิกขวาเปิดไฟล์โดยตรงในเว็บเบราเซอร์ได้เลย โดยไม่ต้องไปวางไฟล์ใน webserver ลองเปิดไฟล์เดียวกันหลายๆหน้าต่าง (สำคัญมาก : key ที่ใช้ต้องเป็นชนิด session key ไม่อย่างนั้นจะเปิดพร้อมกันหลายหน้าต่างไม่ได้)​ หรือหลายๆเบราเซอร์ดูนะ จะเห็นว่าเราสามารถขีดเขียนหน้าต่างไหนก็ได้ ลายเส้นจะส่งต่อถึงกันหมด วิธีใช้งานโปรเจ็คนี้ อาจจะส่งไฟล์​ HTML ทางอีเมลไปให้อีกฝ่าย หรือจะอัพโหลดไว้ที่ Google Drive แล้วส่งไปแต่ URL หรือ QR code ก็ได้แล้วแต่สะดวกเลยครับ</p><p name="5bb1" id="5bb1" class="graf graf--p graf-after--p">ผมลองเปิดบน Chrome กับ FIrefox สองหน้าต่างพร้อมกัน ก็จะเห็นหัวใจสีแดงเต้น เวลาลากเมาส์​ลายเส้นก็จะไปปรากฏอีกบราวเซอร์ด้วย</p><figure name="7ba9" id="7ba9" class="graf graf--figure graf-after--p"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 613px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 87.5%;"></div><img class="graf-image" data-image-id="1*Vv63hDhPfbiToxqMy6I8vA.png" data-width="954" data-height="835" data-action="zoom" data-action-value="1*Vv63hDhPfbiToxqMy6I8vA.png" src="https://cdn-images-1.medium.com/max/800/1*Vv63hDhPfbiToxqMy6I8vA.png"></div></figure><h3 name="e745" id="e745" class="graf graf--h3 graf-after--figure"><strong class="markup--strong markup--h3-strong">ส่งท้าย</strong></h3><p name="ca87" id="ca87" class="graf graf--p graf-after--h3">หวังว่าคงจะถูกใจกับไอเดียนี้นะครับ อยากให้เอาไปลองเล่นกันดู สำหรับคนโสดก็ไม่ต้องเสียใจไป โปรเจ็คนี้ยังเอาไปต่อยอดได้อีกเยอะนะครับ จะเอาไปใช้เป็นกิจกรรมช่วยสอน วาดรูปขึ้นกระดานหน้าห้องเรียน หรือทำกระดานฝากข้อความเก๋ๆบนจอโทรทัศน์ในร้านอาหาร หรือเล่นเกมแบบ Hangman, Draw Something​ ก็ยังไหว อาจจะอัพโหลไฟล์​ HTML ไปวางที่ไหนสักแห่ง แล้วทำเป็น QR code ขึ้นหน้าจอหรือแปะไว้ให้คนที่เดินผ่านไปมา สแกนแล้วมาทำกิจกรรมร่วมกันก็ยังได้ แต่ไม่ว่าจะเอาไปทำอะไร อย่าลืมเอามาเล่าให้ฟังกันหน่อยนะครับ</p><h3 name="24be" id="24be" class="graf graf--h3 graf-after--p">แนะนำลิงค์สำหรับศึกษาเพิ่มเติม</h3><ul class="postList"><li name="16c5" id="16c5" class="graf graf--li graf-after--h3">เว็บ NETPIE สำหรับเข้าไปสร้าง Key สำหรับเชื่อมต่อ : <a href="https://netpie.io" data-href="https://netpie.io" class="markup--anchor markup--li-anchor" rel="nofollow noopener" target="_blank">https://netpie.io</a></li><li name="f1e6" id="f1e6" class="graf graf--li graf-after--li">บล็อก NETPIE รวม DIY project น่าสนใจหลายอย่าง : <a href="https://blog.netpie.io" data-href="https://blog.netpie.io" class="markup--anchor markup--li-anchor" rel="nofollow noopener" target="_blank">https://blog.netpie.io</a></li><li name="e7a3" id="e7a3" class="graf graf--li graf-after--li">Facebook group : <a href="https://www.facebook.com/groups/netpie/" data-href="https://www.facebook.com/groups/netpie/" class="markup--anchor markup--li-anchor" rel="nofollow noopener" target="_blank">https://www.facebook.com/groups/netpie/</a></li><li name="5bf7" id="5bf7" class="graf graf--li graf-after--li">หน้า Github สำหรับโหลด library : <a href="https://github.com/netpieio" data-href="https://github.com/netpieio" class="markup--anchor markup--li-anchor" rel="nofollow noopener" target="_blank">https://github.com/netpieio</a></li><li name="5445" id="5445" class="graf graf--li graf-after--li graf--trailing">เว็บสอนการใช้งาน HTML5 Canvas : <a href="http://www.html5canvastutorials.com/" data-href="http://www.html5canvastutorials.com/" class="markup--anchor markup--li-anchor" rel="nofollow noopener" target="_blank">http://www.html5canvastutorials.com</a></li></ul></div></div></section></div><footer class="u-paddingTop10"><div class="container u-maxWidth740"><div class="row"><div class="col u-size12of12"></div></div><div class="row"><div class="col u-size12of12 js-postTags"><div class="u-paddingBottom10"><ul class="tags tags--postTags tags--borderless"><li><a class="link u-baseColor--link"  href="https://medium.com/tag/iot?source=post" data-action-source="post">IoT</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/netpie?source=post" data-action-source="post">Netpie</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/valentines?source=post" data-action-source="post">Valentine</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/html5?source=post" data-action-source="post">Html5</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/javascript?source=post" data-action-source="post">JavaScript</a></li></ul></div></div></div><div class="row js-postActionsFooter"><div class="postActions col u-size12of12"><div class="u-floatLeft buttonSet buttonSet--withLabels"><div class="buttonSet-inner"><div class="js-actionRecommend" data-post-id="98b6e12c88e2" data-is-icon-29px="true" data-has-recommend-list="true" data-source="post_actions_footer"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/98b6e12c88e2" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"/></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal"  data-action="show-recommends" data-action-value="98b6e12c88e2">4</button></div></div><div class="buttonSet-inner"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  data-action="scroll-to-responses" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"/></svg></span></button></div></div><div class="u-floatRight buttonSet buttonSet--narrow"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/></svg></span></button></div></div></div></div><div class="js-postPromotionWrapper postPromotionWrapper" data-location-id="footer_above_post_attribution"></div><div class="container u-maxWidth740 js-postAttributionFooterContainer u-paddingTop20 u-paddingBottom20 u-marginTop10 u-borderTopLightest u-xs-paddingTop10 u-xs-paddingBottom10"><div class="row js-postFooterInfo"><div class="col u-size12of12"><li class="u-block u-paddingBottom18 js-cardUser"><div class="u-marginLeft20 u-floatRight"><span class="followState js-followState buttonSet-inner" data-user-id="b2c57632395c"><button class="button button--small u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/b2c57632395c" data-action-source="footer_card_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="u-tableCell "><a class="link avatar u-baseColor--link"  href="https://medium.com/@chaveeissariyapat?source=footer_card" title="Go to the profile of Chavee Issariyapat" aria-label="Go to the profile of Chavee Issariyapat" data-action-source="footer_card" data-user-id="b2c57632395c" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/60/60/0*gc32sBjlliJNaB0L." class="avatar-image avatar-image--small" alt="Go to the profile of Chavee Issariyapat"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal"  href="https://medium.com/@chaveeissariyapat" property="cc:attributionName" title="Go to the profile of Chavee Issariyapat" aria-label="Go to the profile of Chavee Issariyapat" rel="author cc:attributionUrl" data-user-id="b2c57632395c" dir="auto">Chavee Issariyapat</a></h3><p class="u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">Lead developer at NETPIE.io | Researcher at NECTEC</p></div></li></div></div></div><div class="js-postFooterPlacements"></div><div class="u-padding0 u-clearfix u-backgroundGrayLightest u-print-hide supplementalPostContent js-responsesWrapper"></div><div class="supplementalPostContent js-readNext"></div><div class="supplementalPostContent js-heroPromo"></div></footer></article></main><div class="u-marginAuto u-maxWidth1000"><div class="js-postShareWidget u-foreground u-sm-hide u-transition--fadeOut300 u-fixed"><ul><li class="u-uiTextSemibold u-textAlignCenter u-textColorNormal u-fontSize12 u-textUppercase">Share</li><li class="u-textAlignCenter"><div class="js-actionRecommend" data-post-id="98b6e12c88e2" data-is-icon-29px="true" data-is-vertical="true" data-has-recommend-list="true" data-source="post_share_widget"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/98b6e12c88e2" data-action-source="post_share_widget"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"/></svg></span></span></button><button class="button button--chromeless u-baseColor--buttonNormal  u-block u-marginAuto u-marginTopNegative5"  data-action="show-recommends" data-action-value="98b6e12c88e2">4</button></div></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_share_widget"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/></svg></span></button></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_share_widget"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/></svg></span></button></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton"  title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-in-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/98b6e12c88e2"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"/></svg></span></span></button></li></ul></div></div><div class="u-fixed u-bottom0 u-sizeFullWidth u-backgroundWhite u-boxShadowTop u-borderBox u-paddingTop10 u-paddingBottom10 u-zIndexMetabar u-xs-paddingLeft10 u-xs-paddingRight10 js-stickyFooter"><div class="u-maxWidth700 u-marginAuto u-flexCenter"><div class="u-fontSize16 u-flex1 u-flexCenter"><div class="u-flex0 u-inlineBlock u-paddingRight20 u-xs-paddingRight10"><a class="link avatar u-inline u-baseColor--link"  href="https://medium.com/@chaveeissariyapat" data-action="show-user-card" data-action-value="b2c57632395c" data-action-type="hover" data-user-id="b2c57632395c" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/40/40/0*gc32sBjlliJNaB0L." class="avatar-image avatar-image--smaller" alt="Go to the profile of Chavee Issariyapat"></a></div><div class="u-flex1 u-inlineBlock"><div class="u-xs-hide">Never miss a story from<strong> Chavee Issariyapat</strong>, when you sign up for Medium. <a class="link link--accent u-accentColor--textNormal u-accentColor--textDarken u-baseColor--link"  href="https://medium.com/@Medium/personalize-your-medium-experience-with-users-publications-tags-26a41ab1ee0c#.hx4zuv3mg" data-action-source="sticky_footer">Learn more</a></div><div class="u-xs-show">Never miss a story from<strong> Chavee Issariyapat</strong></div></div></div><div class="u-marginLeft50 u-xs-marginAuto"><span class="followState js-followState buttonSet-inner" data-user-id="b2c57632395c"><button class="button u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-uiTextSemibold u-textUppercase u-fontSize12"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="sticky_footer"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary is-active u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-uiTextSemibold u-textUppercase u-fontSize12"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/b2c57632395c" data-action-source="sticky_footer_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Get updates</span></button></span></div></div></div></div></div></div><div class="loadingBar"></div><script>// <![CDATA[
window["obvInit"] = function (opt_embedded) {window["obvInit"]["embedded"] = opt_embedded; window["obvInit"]["ready"] = true;}
// ]]></script><script>// <![CDATA[
var GLOBALS = {"audioUrl":"https://d1fcbxp97j4nb2.cloudfront.net","baseUrl":"https://medium.com","buildLabel":"28586-6143d83","currentUser":{"userId":"lo_b8965efd1a3c","isVerified":false,"subscriberEmail":""},"currentUserHasUnverifiedEmail":false,"isAuthenticated":false,"isCurrentUserVerified":false,"mediumTwitterScreenName":"medium","miroUrl":"https://cdn-images-1.medium.com","moduleUrls":{"base":"https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.2nXtJ8XknWJqOjh2ZNHRVw.js","notes":"https://cdn-static-1.medium.com/_/fp/gen-js/main-notes.bundle.AouowiblLn4SBKZF6cWDtA.js","posters":"https://cdn-static-1.medium.com/_/fp/gen-js/main-posters.bundle.4rYp3nph7xNXmlmak5XWxQ.js","common-async":"https://cdn-static-1.medium.com/_/fp/gen-js/main-common-async.bundle.R35emyz9xZL7YdHbIl-SvQ.js","stats":"https://cdn-static-1.medium.com/_/fp/gen-js/main-stats.bundle.XUyD-cfC9DG2nc9iq5x7GA.js","home-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-home-screens.bundle.0oM8iNH9LgWeJY00O_ao2Q.js","misc-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-misc-screens.bundle.caQfKUCZ18Wg2IbFBoaXiA.js"},"previewConfig":{"weightThreshold":1,"weightImageParagraph":0.51,"weightIframeParagraph":0.8,"weightTextParagraph":0.08,"weightEmptyParagraph":0,"weightP":0.003,"weightH":0.005,"weightBq":0.003,"minPTextLength":60,"truncateBoundaryChars":20,"detectTitle":true,"detectTitleLevThreshold":0.15},"productName":"Medium","supportsEdit":false,"termsUrl":"//medium.com/policy/9db0094a1e0f","textshotHost":"textshot.medium.com","transactionId":"1492373313159:3fcc3aa66655","useragent":{"browser":"python requests","family":"","os":"","version":2.2,"supportsDesktopEdit":false,"supportsInteract":false,"supportsView":true,"isMobile":false,"isTablet":false,"isNative":false,"supportsFileAPI":false,"isTier1":false,"clientVersion":"","unknownParagraphsBad":false,"clientChannel":"","supportsRealScrollEvents":false,"supportsVhUnits":false,"ruinsViewportSections":false,"supportsHtml5Video":false,"supportsMagicUnderlines":false,"isWebView":false,"isFacebookWebView":false,"supportsProgressiveMedia":false,"supportsPromotedPosts":true,"isBot":false,"isNativeIphone":false,"supportsCssVariables":false,"supportsScrollableMetabar":false},"variants":{"allow_access":true,"allow_signup":true,"allow_test_auth":"disallow","signin_services":"twitter,facebook,google,email,google-fastidv","signup_services":"twitter,facebook,google,email,google-fastidv","android_rating_prompt_recommend_threshold":5,"google_sign_in_android":true,"enable_onboarding":true,"ios_custom_miro_url":"https://cdn-images-1.medium.com","reengagement_notification_duration":3,"enable_adsnative_integration":true,"browsable_stream_config_bucket":"curated-topics","ios_small_post_preview_truncation_length":5.5,"ios_large_post_preview_truncation_length":5.5,"disable_ios_catalog_badging":true,"enable_series_creation":true,"enable_your_series_pages":true,"enable_productionized_series":true,"enable_dedicated_series_tab_api_ios":true,"enable_clap_milestone_notifications":true,"enable_series_stats_page":true,"should_receive_daily_push_notification":true,"should_receive_daily_push_notification_actual":true,"enable_prepublish_share_settings":true,"enable_direct_auth_connect":true,"enable_post_import":true,"enable_sponsored_post_labelling":true,"enable_logged_in_follow_on_collection_post":true,"promoted_story_placement_locations":"POST_PAGE_FOOTER,POST_PAGE_BELOW_POST_ACTIONS","show_topics":true,"enable_search_collection_by_tag_recency_filter":true,"search_collection_by_tag_filter_min_votes":10,"enable_sms_app_promo":true,"enable_export_members":true,"enable_series_card_background_creation":true,"enable_loyal_writers_onboarding":true,"enable_onboarding_hybrid_users":true,"enable_onboarding_users_by_tag":true,"enable_ios_onboarding_notifications":true,"can_see_subscription_branding":true,"enable_subscriptions_landing_page":true,"enable_partner_program_landing_page":true,"enable_hide_broken_links":true,"enable_pay_for_custom_domain":true,"enable_promos_from_dynamo":true,"enable_promos_in_placement":true,"enable_series_promo_in_email":true,"enable_sms":true,"enable_series_in_user_profiles":true,"enable_new_logged_out_bento_operation":true,"enable_topic_brief_relations":true},"xsrfToken":"","iosAppId":"828256236","supportEmail":"yourfriends@medium.com","teamName":"Team Medium","fp":{"/icons/favicon.svg":"https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg","/icons/favicon-dev-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-dev-editor.YKKRxBO8EMvIqhyCwIiJeQ.ico","/icons/favicon-hatch-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-hatch-editor.BuEyHIqlyh2s_XEk4Rl32Q.ico","/icons/favicon-medium-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrl":"https://medium.com","imageUploadSizeMb":25,"isAuthDomainRequest":true,"algoliaApiEndpoint":"https://MQ57UUUQZ2-dsn.algolia.net","algoliaAppId":"MQ57UUUQZ2","algoliaSearchOnlyApiKey":"394474ced050e3911ae2249ecc774921","iosAppStoreUrl":"https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8","iosAppLinkBaseUrl":"medium:","algoliaIndexPrefix":"medium_","androidPlayStoreUrl":"https://play.google.com/store/apps/details?id=com.medium.reader","googleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","androidPackage":"com.medium.reader","androidPlayStoreMarketScheme":"market://details?id=com.medium.reader","googleAuthUri":"https://accounts.google.com/o/oauth2/auth","androidScheme":"medium","layoutData":{"useDynamicScripts":false,"googleAnalyticsTrackingCode":"UA-24232453-2","jsShivUrl":"https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js","useDynamicCss":false,"faviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium.TAS6uQ-Y7kcKgi0xjcYHXw.ico","faviconImageId":"1*W0nmth_X8nFKjn6BZ388UQ.png","fontSets":[{"id":1,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-base.by5Oi_VbnwEIvhnWIsuUjA.css"},{"id":4,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-lazy-base.g08Jj5TZPAiuPWj5YNUsSg.css"},{"id":6,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-latin-base.141WxxXgxGxNcfeza73H7Q.css"},{"id":7,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-lazy-latin-base.jMU532QDmysQMOINr-cr2A.css"}],"editorFaviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrlRev":"moc.muidem//:sptth","isDnt":false,"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","archiveUploadSizeMb":100,"paymentData":{"currencies":{"1":{"label":"US Dollar","external":"usd"}},"countries":{"1":{"label":"United States of America","external":"US"}},"accountTypes":{"1":{"label":"Individual","external":"individual"},"2":{"label":"Company","external":"company"}}},"previewConfig2":{"weightThreshold":1,"weightImageParagraph":0.05,"raiseImage":true,"enforceHeaderHierarchy":true,"isImageInsetRight":true},"isAmp":false,"iosScheme":"medium","isSwBoot":false,"lightstep":{"accessToken":"ce5be895bef60919541332990ac9fef2","carrier":"{\"ot-tracer-spanid\":\"674647ee1ba9458d\",\"ot-tracer-traceid\":\"6915ba093d79283a\",\"ot-tracer-sampled\":\"true\"}","host":"collector-medium.lightstep.com"},"facebook":{"key":"542599432471018","secret":"c14df7146e9052a1131f3c900c1f0644","token":"542599432471018|1JqjIwxSfY9jOt_KwjWEl1R7T6I","namespace":"medium-com","scope":{"default":["public_profile","email","user_friends"],"connect":["public_profile","email","user_friends"],"login":["public_profile","email","user_friends"],"share":["public_profile","email","user_friends","publish_actions"]},"smartPublishWhitelistedPublications":["bcc38c8f6edf","f3726e2a5878","828a270689e","81c7d351c056","f30e42fd7ff8","8bf1d7d3081b","d16afa0ae7c","d8f3f6ad9c31","e74de0cedea9","15f753907972","c8c6a6b01ebd","3412b9729488","2ce4bbcf83bb","544c7006046e","7bfcdbc6b30a","a268fd916824","458a773bccd2"],"instantArticles":{"published":true,"developmentMode":false}},"mailingListArchiveUploadSizeMb":2,"availableMembershipPlans":[],"editorsPicksTopicId":"3985d2a191c5","popularOnMediumTopicId":"9d34e48ecf94","memberContentTopicId":"13d7efd82fb2","isDoNotAuth":false,"goldfinchUrl":"https://goldfinch.medium.com"}
// ]]></script><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.2nXtJ8XknWJqOjh2ZNHRVw.js" async></script><script>// <![CDATA[
window["obvInit"]({"value":{"id":"98b6e12c88e2","versionId":"7ecea9a34ba3","creatorId":"b2c57632395c","creator":{"userId":"b2c57632395c","name":"Chavee Issariyapat","username":"chaveeissariyapat","createdAt":1459119038639,"lastPostCreatedAt":1486611529325,"imageId":"0*gc32sBjlliJNaB0L.","backgroundImageId":"","bio":"Lead developer at NETPIE.io | Researcher at NECTEC","twitterScreenName":"","socialStats":{"userId":"b2c57632395c","usersFollowedCount":33,"usersFollowedByCount":28,"type":"SocialStats"},"social":{"userId":"lo_5810fdf63690","targetUserId":"b2c57632395c","type":"Social"},"facebookAccountId":"10154024413449717","allowNotes":1,"type":"User"},"homeCollectionId":"","title":"ส่งความรักวันวาเลนไทน์แบบ I❤T ด้วย NETPIE","detectedLanguage":"th","latestVersion":"7ecea9a34ba3","latestPublishedVersion":"7ecea9a34ba3","hasUnpublishedEdits":false,"latestRev":5063,"createdAt":1486611529325,"updatedAt":1487187195255,"acceptedAt":0,"firstPublishedAt":1487041615829,"latestPublishedAt":1487187195255,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"วันวาเลนไทน์มาถึงอีกปีแล้ว ชาวโปรแกรมเมอร์ท่านใดที่กำลังอินเลิฟ ผมขอชวนมาทำโปรเจ็คสนุกๆรับต้อนวันแห่งความรักกันครับ บทความนี้เกิดจากโปรเจค…","bodyModel":{"paragraphs":[{"name":"f06e","type":3,"text":"ส่งความรักวันวาเลนไทน์แบบ I❤T ด้วย NETPIE","markups":[]},{"name":"72ee","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*PTASR2nXGD4XwzUt5_v5UQ.png","originalWidth":808,"originalHeight":394}},{"name":"50c2","type":1,"text":"วันวาเลนไทน์มาถึงอีกปีแล้ว ชาวโปรแกรมเมอร์ท่านใดที่กำลังอินเลิฟ ผมขอชวนมาทำโปรเจ็คสนุกๆรับต้อนวันแห่งความรักกันครับ บทความนี้เกิดจากโปรเจคส่วนตัว ที่ลองทำขึ้นมาใช้แล้วรู้สึกว่าเข้าท่ามาก จนอยากจะเอามาแบ่งปันกัน เผื่อใครจะเอาไปต่อยอดทำอะไรที่น่าสนุกยิ่งขึ้น สิ่งที่ผมจะเอามาแชร์คือ การสร้าง canvas ที่เชื่อมสองคนที่อยู่ห่างกันเข้าด้วยกันครับ เหมือนมีแผ่นกระดาษ ที่เราสามารถแต้มสีเติมเส้นลงไปได้ และไม่ว่าจะอยู่ที่ไหนในโลก ทุกอย่างที่ทั้งสองฝ่ายเขียนลงไป จะซิงค์ถึงกันแบบเรียลไทม์ การใช้งานก็ง่าย ไม่ต้องลง app ไม่ต้องตั้ง server กลางด้วย และโค้ดทั้งหมดจบใน HTML ไฟล์เดียว ฟังดูเหลือเชื่อใช่ไหม เดี๋ยวมาลองดูกันครับ","markups":[]},{"name":"9410","type":3,"text":"เริ่มต้นที่ HTML","markups":[]},{"name":"8795","type":1,"text":"เครื่องมือแรกที่เราจะใช้คือ เว็บบราวเซอร์ธรรมดาๆนี่แหละครับ ใช้ได้หมดทั้ง Chrome, Fixfox, Safari, Opera​และ Microsoft Edge ซึ่งทุกวันนี้กลายเป็นของใช้สามัญประจำบ้านไปแล้ว ทราบหรือไม่ว่าเว็บบราวเซอร์ไม่ได้มีประโยชน์แค่ใช้เปิดเว็บนะ มันทำอะไรได้มากกว่านั้นเยอะเลย ต้องขอบคุณเทคโนโลยี HTML5 ที่ผลักดันให้บราวเซอร์ต่างๆในปัจจุบันนี้มีความสามารถสูงขึ้นกว่าเมื่อก่อนมาก เราสามารถรัน application ล้ำๆเทียบเคียง native app บนไฟล์ HTML โดยไม่ต้องลงปลั๊กอินอะไรเลย ตัวอย่างชัดๆก็​ Google Docs ไง การเขียนโปรแกรมก็ใช้ภาษา Javascript ที่แสนสะดวก รันกันตรงหน้าเห็นๆ แบบไม่ต้องคอมไพล์​ มี library ตัวช่วยเยอะแยะจนนับไม่ถ้วน ถือเป็นของเล่นที่เหมาะกับขา dev ผู้มีอารมณ์ศิลปินอย่างที่สุด","markups":[]},{"name":"a625","type":1,"text":"โค้ดโปรแกรมในบทความนี้จะจบทุกอย่างในไฟล์ HTML ไฟล์เดียว เราจะใช้เทคโนโลยีบน HTML5 ที่เรียกกันว่า Canvas ซึ่งเป็นเหมือนผืนผ้าใบเปล่าๆ ที่อนุญาตให้เราวาดรูปลงไปเองได้ตามใจ เรียกว่าอยากได้ปุ่มก็วาดปุ่ม อยากได้กราฟก็วาดกราฟ วาดเองได้ทุกอย่างจริงๆ ในโปรเจ็คนี้ก็เหมือนกันครับ ทุกอย่างจะเป็นการวาดเองทั้งหมด การวาดจะเกิดบน canvas 2 อันที่ซ้อนทับกัน อันบนชื่อ toolCanvas ใช้สำหรับบรรจุแถบเครื่องมือ อันล่างชื่อ drawCanvas เป็นพื้นที่สำหรับลากเมาส์วาดได้อย่างอิสระ โค้ดส่วนของ HTML สำหรับประกาศ canvas จะเป็นแบบนี้","markups":[]},{"name":"0066","type":8,"text":"\x3cdiv style=\"position: relative;\"\x3e\n    \x3ccanvas id=\"toolCanvas\" height=\"36\" width=\"1280\"    \n        style=\"background-color: white; cursor:pointer;\n        position: absolute; left: 0; top: 0; z-index: 1;\"\x3e\n    \x3c/canvas\x3e\n    \x3ccanvas id=\"drawCanvas\" height=\"960\" width=\"1280\" \n        style=\"background-color: white; cursor:pointer;\n        position: absolute; left: 0; top: 0; z-index: 0;\"\x3e\n    \x3c/canvas\x3e\n \x3c/div\x3e","markups":[]},{"name":"64f4","type":1,"text":"ต่อไปเป็นส่วนของภาพไอคอนเครื่องมือ ผมจะใช้วิธีเขียนโค้ดวนลูปวาดรูปปุ่มด้วยคำสั่งพื้นฐานของ HTML5 อย่าง fillRect — วาดสี่เหลี่ยม, arc — วาดส่วนของวงกลม และ fill — ระบายสี วาดลงบน toolCanvas โดยกำหนดความกว้างปุ่มเท่ากันหมด เพราะตอนตรวจสอบการคลิกจะได้คำนวณได้ง่ายๆ คือแค่หารด้วยความกว้างปุ่มที่รวมช่องว่างแล้วปัดเศษลงก็รู้แล้วว่าเมาส์คลิกโดนปุ่มไหน","markups":[]},{"name":"259d","type":8,"text":"const BTNSIZE = 30; BTNGAP = 5;","markups":[]},{"name":"1d05","type":8,"text":"var lineColor = 0;\nvar colorList = ['#222222','#ac725e','#a06be0','#fa3a9c',\n'#f93a22','#ff7537','#ffad46','#eeee22','#42d6B2','#4677b5',\n'#1bd118','#53fc5c'];","markups":[]},{"name":"ae85","type":8,"text":"var tg = document.getElementById(\"toolCanvas\").getContext(\"2d\");","markups":[]},{"name":"9bfa","type":8,"text":"function drawColorButton(x,y,col,selected) {\n    tg.beginPath();\n    tg.fillStyle = col;\n    tg.fillRect(x,y,BTNSIZE,BTNSIZE);\n    if (selected) {\n        tg.fillStyle = '#ffffff';\n        tg.arc(x+BTNSIZE/2,y+BTNSIZE/2,\n            (BTNSIZE-18)/2,0,2*Math.PI,false);\n        tg.fill();\n     }\n     tg.fill();\n }","markups":[]},{"name":"fa6f","type":8,"text":"for (var i=0; i\x3ccolorList.length; i++) {\n    drawColorButton((BTNSIZE+BTNGAP)*i,\n        BTNGAP,colorList[i],colorList[i]==lineColor);\n}","markups":[]},{"name":"5b7f","type":1,"text":"เราก็จะได้ canvas พร้อมจานสีหน้าตาแบบนี้\n\x3e\x3e ดูผลการรันโค้ดตัวอย่าง #1 ได้ที่นี่ \x3c\x3c","markups":[{"type":3,"start":44,"end":79,"href":"https://jsfiddle.net/chavee/v1hdu23x","title":"","rel":"noopener","anchorType":0}]},{"name":"11af","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*AwTC2GfZ9S_lBJ60C8julg.png","originalWidth":669,"originalHeight":180}},{"name":"9bf1","type":1,"text":"ส่วนของแถบเครื่องมือ สามารถเลือกสี และขนาดของหัวปากกาได้ การตรวจสอบสถานะของเมาส์ทำได้โดยการเรียก addEventListener เพื่อเอา callback function ไปรับ event ในส่วนของ mousedown, mousemove และ mouseup เวลาเกิด callback แต่ละครั้ง จะมีตัวแปร event ที่ระบุพิกัดของเมาส์ที่จุดเกิดเหตุติดมาด้วย เมื่อคำนวณแล้วพบว่ามีการคลิกเมาส์ที่ปุ่มสีอะไรก็จะ assign ค่าสีให้ตัวแปรที่เก็บค่าสีปัจจุบัน พร้อมทั้งแสดงสัญลักษณ์บนสีที่ถูกเลือก สำหรับขนาดหัวปากกาก็ทำแบบเดียวกัน เท่านี้ก็สามารถวาดรูปบนเว็บบราวเซอร์ได้แล้ว","markups":[]},{"name":"cef1","type":1,"text":"โค้ดส่วนของการตรวจสอบการคลิกปุ่มเขียนประมาณข้างล่างนี้ เราจะเก็บโค้ดของการวาดปุ่มทั้งหมดเข้าไปอยู่ในฟังก์ชั่น drawToolBar() ให้หมด เพื่อให้สะดวกต่อการเรียกใช้ เพราะเราต้องเรียกฟังก์ชั่นนี้ซ้ำทุกครั้งที่มีการเปลี่ยนสี หรือขนาดปากกา","markups":[]},{"name":"f97c","type":8,"text":"var drawCanvasRect = drawCanvas.getBoundingClientRect();","markups":[]},{"name":"d0e1","type":8,"text":"toolCanvas.addEventListener('mousedown', function(e){","markups":[]},{"name":"b795","type":8,"text":"    mX = e.pageX - drawCanvasRect.left;  //คำนวณตำแหน่งสัมพัทธ์กับ canvas\n    mY = e.pageY - drawCanvasRect.top;","markups":[{"type":2,"start":41,"end":73}]},{"name":"35f2","type":8,"text":"    var buttonNo = Math.floor(mX/ (BTNSIZE+BTNGAP));\n    if (buttonNo \x3e= 0 && buttonNo\x3ccolorList.length) {\n        lineColor = colorList[buttonNo];\n        drawToolBar();\n    }\n});","markups":[]},{"name":"8e3d","type":1,"text":"ถึงตอนนี้แถบเครื่องมือเราสามารถคลิกได้แล้ว\n\x3e\x3e ดูผลการรันโค้ดตัวอย่าง #2 ได้ที่นี่ \x3c\x3c","markups":[{"type":3,"start":46,"end":81,"href":"https://jsfiddle.net/chavee/bnmx4fb2","title":"","rel":"","anchorType":0}]},{"name":"96b5","type":1,"text":"ส่วนของการลากเส้น ขั้นตอนการทำงานก็ตรงไปตรงมาเหมือนลากเส้นต่อจุดธรรมดา เมื่อไหร่ที่เมาส์ถูกคลิก ก็จะเกิด mousedown callback ของ drawCanvas พร้อมกับแจ้งพิกัดที่ถูกคลิก เราจะถือโอกาสนี้เก็บพิกัดปากกาไว้ และปรับเข้าสู่ draw mode หลังจากนั้น ถ้ามีการลากเมาส์ ก็จะเกิด mousemove callback ที่มาพร้อมพิกัดใหม่ของเมาส์ เราจะใช้คำสั่ง lineTo ลากเส้นต่อจากจุดก่อนหน้าที่เก็บไว้มายังจุดใหม่ พร้อมอัพเดตพิกัดปากกาปัจจุบัน และทำแบบนี้ไปเรื่อยๆ จนกว่าจะมีการปล่อยเมาส์ ถึงตอนนี้เราก็จะสามารถวาดรูปบน canvas ได้จริงๆแล้ว\n\x3e\x3e ดูผลการรันโค้ดตัวอย่าง #3 ได้ที่นี่ \x3c\x3c","markups":[{"type":3,"start":509,"end":544,"href":"https://jsfiddle.net/chavee/vn6qc3d7","title":"","rel":"noopener","anchorType":0}]},{"name":"20dc","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*T_X0Xr6wENOQJA17I68Uhw.png","originalWidth":669,"originalHeight":180}},{"name":"3015","type":3,"text":"การเชื่อมต่อผ่าน NETPIE","markups":[{"type":1,"start":0,"end":23}]},{"name":"a7a2","type":1,"text":"มาถึงส่วนสำคัญของโปรแกรมแล้ว นั่นคือเราจะเชื่อมบราวเซอร์ของเราเข้ากับบราวเซอร์ของอีกฝ่ายได้อย่างไร ตรงนี้เรามีตัวช่วยครับ เราจะมาลองใช้ “NETPIE” กัน แนะนำเบื้องต้นสำหรับคนที่ยังไม่รู้จักนะครับ NETPIE เป็น IOT platform ที่พัฒนาขึ้นมาโดยศูนย์เทคโนโลยีอิเล็กทรอนิกส์และคอมพิวเตอร์แห่งชาติ หรือ NECTEC ที่เปิดให้บริการฟรีสำหรับนักพัฒนา เพื่อนำไปใช้สร้างสรรค์ IOT application ใหม่ๆ","markups":[{"type":3,"start":137,"end":143,"href":"https://netpie.io","title":"","rel":"","anchorType":0},{"type":3,"start":193,"end":199,"href":"https://netpie.io","title":"","rel":"","anchorType":0}]},{"name":"cae3","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*g8QqNnzHtVuHiV6MsS0Drg.png","originalWidth":603,"originalHeight":313}},{"name":"1db9","type":1,"text":"นักพัฒนาส่วนใหญ่มักจะมองว่า IOT platform เป็นเรื่องของการเขียนโปรแกรมบน ฮาร์ดแวร์ แต่จริงๆแล้วนักพัฒนาซอฟท์แวร์ก็สามารถใช้ประโยชน์จาก NETPIE ได้เหมือนกันนะ เพราะนอกจาก library สำหรับ hardware แล้ว NETPIE ยังมี client library ที่รองรับภาษา Python, Node.js, C#, Android Studio รวมไปถึง HTML5 Javascript ด้วย เราจึงสามารถพัฒนาซอฟท์แวร์ด้วยภาษาเหล่านี้ให้มาเชื่อมต่อกันได้อย่างง่ายๆ ซึ่งในโปรเจ็คนี้ เราจะลองใช้ HTML5 Javascript library สำหรับสร้างการเชื่อมต่อของผืนผ้าใบบนเว็บบราวเซอร์กัน สำหรับใครที่ยังไม่มี account สามารถสมัครสมาชิกได้ที่เว็บ https://netpie.io เลยครับ จากนั้นทำการสร้าง AppID และ Key ให้เรียบร้อย แนะนำให้สร้าง key ชนิด “session key” เพราะ identity จะได้ไม่ฝังติดถาวรลงไปในบราวเซอร์ การใช้ NETPIE บน HTML นั้นแสนจะสะดวก เพราะไม่ต้องดาวน์โหลดอะไรเลย เพียงแค่เพิ่ม HTML tag ตามนี้ก็พอ","markups":[{"type":3,"start":134,"end":140,"href":"https://netpie.io","title":"","rel":"noopener","anchorType":0},{"type":3,"start":197,"end":203,"href":"https://netpie.io","title":"","rel":"noopener","anchorType":0},{"type":3,"start":543,"end":560,"href":"https://netpie.io","title":"","rel":"","anchorType":0}]},{"name":"a0bd","type":8,"text":"\x3cscript src=\"https://cdn.netpie.io/microgear.js\"\x3e\x3c/script\x3e","markups":[{"type":3,"start":13,"end":47,"href":"https://cdn.netpie.io/microgear.js","title":"","rel":"nofollow","anchorType":0}]},{"name":"cfe0","type":1,"text":"โค้ด Javascript ส่วนของการเชื่อมต่อ NETPIE เป็นดังนี้","markups":[]},{"name":"029a","type":8,"text":"const APPID     = \"APPID\";\nconst APPKEY    = \"KEY\";\nconst APPSECRET = \"SECRET\";","markups":[{"type":2,"start":19,"end":24},{"type":2,"start":46,"end":49},{"type":2,"start":71,"end":77}]},{"name":"909a","type":8,"text":"var myID = Math.floor(Math.random()*100000).toString();\nvar member = [];","markups":[]},{"name":"fa35","type":8,"text":"var microgear = Microgear.create({\n    key: APPKEY,\n    secret: APPSECRET,\n    alias : myID\n});","markups":[]},{"name":"7fbe","type":8,"text":"microgear.on('connected', function() {\n    microgear.subscribe('/draw/+');\n});","markups":[]},{"name":"60fa","type":8,"text":"microgear.on('present', function(m) {\n    if (m.type=='online' && m.alias != myID) {\n        if (member.indexOf(m.alias)==-1) member.push(m.alias);\n    }\n});","markups":[]},{"name":"d3cc","type":8,"text":"microgear.on('absent', function(m) {\n    if (m.type=='offline') {\n        delete member.splice(member.indexOf(m.alias),1);\n    }\n});","markups":[]},{"name":"ad57","type":8,"text":"microgear.connect(APPID);","markups":[]},{"name":"f6cc","type":1,"text":"อธิบายสั้นๆ เริ่มแรก จะทำการสร้าง microgear object ขึ้นมา ด้วย key และ secret ที่ได้มาจากเว็บ netpie.io และสุ่มค่า myID ขึ้นมา ทั้งนี้เนื่องจากการรัน application นี้ เราจะใช้ไฟล์​ html เดียวกันหมด ไม่ว่าจะเปิดกี่บราวเซอร์ กี่เครื่อง ก็จะเกิดสมาชิกใหม่ขึ้นมาตลอด แต่ทีนี้เราอยากจะแยกแยะสมาชิกให้มีความแตกต่างกันบ้าง เลยต้องใช้วิธีสุ่มค่า ID ของใครของมันขึ้นมา (ความจริง NETPIE ก็มีการออก access token ที่ unique ให้เหมือนกัน แต่เราจะไม่ใช้) โค้ดโปรแกรมจะเป็นการ handle event ต่างๆ ได้แก่","markups":[]},{"name":"a25e","type":9,"text":"เมื่อมี event “connected” ก็จะทำการ subscribe topic “/draw/+” เป็นการบอกว่า client ทางนี้สนใจ message ที่มี topic เป็น /draw/ และตามด้วยคำอะไรก็ได้อีก 1 คำ ซึ่งจะหมายถึง message ที่เกิดจากการวาดของสมาชิกทุกคน เพราะว่าเวลาที่มีการเขียน สมาชิกแต่ละคนจะทำการ publish message ไปที่ topic /draw/myID โดย myID เป็น ID ของคนเขียน","markups":[{"type":2,"start":15,"end":24},{"type":2,"start":290,"end":294}]},{"name":"e4e7","type":9,"text":"เมื่อมี event “present” ก็คือ มีสมาชิกใหม่เข้ามา ก็จะเพิ่มเข้าไปในรายชื่อสมาชิก","markups":[]},{"name":"2285","type":9,"text":"เมื่อมี event “absent” ก็คือ มีสมาชิก offline หายไป ก็จะลบออกจากลิสต์ เราต้องเก็บรายชื่อสมาชิก เพราะจะได้เอาจำนวนสมาชิกที่เชื่อมต่อเข้ามาไปใช้แสดงสภานะ","markups":[]},{"name":"8e40","type":1,"text":"สุดท้ายก็เรียกฟังก์ชั่น microgear.connect(APPID) เพื่อเชื่อมต่อไปยัง cloud service ของ NETPIE ไปที่ APPID ของเรา ในส่วนของการส่งลายมือจากฝั่งหนึ่งไปยังอีกฝั่งหนึ่ง เราจะใช้การเก็บพิกัดจุดที่เมาส์ถูกลากไปตลอดทางต่อๆกันเป็น string ทุกๆ 200 มิลลิวินาที จะทำการส่งออกไปครั้งหนึ่ง เนื่องจาก NETPIE มี rate limit อยู่ ถ้าส่ง message ออกไปถี่ๆและนานเกินไป client จะถูกเตะออกมาได้ ตัวอย่างข้อความที่ส่งออกไปในแต่ละครั้ง เป็นดังนี้","markups":[]},{"name":"54f8","type":1,"text":"#4677b5;8;391,222;390,235;388,249;388,260;389,265;392,270;397,276;403,281;411,286;420,293;425,294;426,294;427,294","markups":[{"type":2,"start":0,"end":113}]},{"name":"d977","type":1,"text":"ค่าแรกเป็นค่าสีของปากกา คั่นด้วย ; ตามด้วยขนาดของหัวปากกา จากนั้นจะเป็นค่าพิกัดในรูปของ X,Y ที่คั่นด้วย ; เมื่ออีกฝ่ายได้รับข้อความ จะเอาไปลากเส้นตาม ก็จะเกิดเป็นลายเส้นที่เหมือนกันทุกประการ โค้ดในส่วนของการจัดการกับ message การเขียน เป็นดังนี้","markups":[{"type":2,"start":88,"end":89},{"type":2,"start":90,"end":91}]},{"name":"85cf","type":8,"text":"microgear.on('message', function(topic,msg) {\n    if (topic == '/'+APPID+'/draw/'+myID) return;","markups":[]},{"name":"e08f","type":8,"text":"var dlist = msg.split(';');\n    dg.strokeStyle = dlist[0];\n    dg.lineWidth = dlist[1];\n    dg.lineJoin = dg.lineCap = 'round';","markups":[]},{"name":"8444","type":8,"text":"for (var i=2; i \x3cdlist.length-1; i++) {\n        var a = dlist[i].split(',');\n        if (i\x3e2) dg.lineTo(a[0],a[1]);\n        else {\n            dg.beginPath();\n            dg.moveTo(a[0],a[1]);\n        }\n    }\n    dg.stroke();\n});","markups":[]},{"name":"86cb","type":1,"text":"ขั้นตอนการทำงานก็คือ​เมื่อมี message ใหม่เข้ามา จะนำ message มาตัดเป็น array ด้วยตัวคั่น ; ค่าจากช่องที่ 0 ของ array จะนำมาเซ็ตเป็นสี ค่าจากช่องที่ 1 จะเซตเป็นขนาดปากกา ที่เหลือจะใช้เป็นพิกัด x,y สำหรับลากเส้นต่อๆกันไป","markups":[{"type":2,"start":192,"end":193},{"type":2,"start":194,"end":195}]},{"name":"cb21","type":1,"text":"เราต้องไปแก้ฟังก์ชั่นในส่วนของ mousemove callback แทนที่จะลากเส้นบนหน้าจอเฉยๆ ก็เก็บพิกัดลงในตัวแปร drawBuffer ไปด้วย เพื่อรอส่งออกไปที่ฝั่งหนึ่ง","markups":[]},{"name":"20de","type":8,"text":"drawCanvas.addEventListener('mousemove', function(e){\n    if (drawMode == 1) {\n        dg.beginPath();    \n        dg.lineWidth = lineWidth;\n        dg.lineTo(mX,mY);\n        if (!drawBuffer) drawBuffer = mX+','+mY+';';\n        mX = e.pageX;\n        mY = e.pageY;","markups":[]},{"name":"7fd8","type":8,"text":"        dg.lineJoin = dg.lineCap = 'round';\n        dg.strokeStyle = lineColor;\n        dg.lineTo(mX,mY);\n        dg.stroke();\n        drawBuffer += mX+','+mY+';';\n    }\n});","markups":[]},{"name":"da72","type":1,"text":"ในส่วนของการส่งลายมือ เราจะใช้การตั้งเวลาทุก 200 มิลลิวินาทีเพื่อเช็ค drawBuffer ว่ามีค่าหรือเปล่า ถ้ามีก็แปะหัวด้วยสีและขนาดปากกาและทำการ publish ออกไปที่ topic “/draw/myID” และรีเซ็ตตัวแปร drawBuffer","markups":[{"type":2,"start":169,"end":173}]},{"name":"6bfb","type":8,"text":"setInterval(function() {\n    if (drawBuffer) {\n        var data = lineColor+';'+lineWidth+';'+drawBuffer;\n        microgear.publish('/draw/'+myID, data);\n    }\n    drawBuffer = '';\n},200);","markups":[]},{"name":"f3e0","type":1,"text":"เมื่อประกอบเข้าด้วยกันเราก็จะได้ผืนผ้าใบที่เชื่อมลายมือถึงกัน เพียงแค่เปิดไฟล์​HTML นี้ในบราวเซอร์เท่านั้น เปิดหลายคนก็ยังได้","markups":[]},{"name":"9b24","type":3,"text":"Mobile Device","markups":[]},{"name":"dff9","type":1,"text":"ที่ผ่านมาโปรแกรมถูกเขียนให้ทำงานกับ mouse event มาโดยตลอด นั่นก็หมายความว่า เอาเอาไปใช้บนอุปกรณ์แบบ touch screen ที่ต้องใช้นิ้วลากแทน mouse โปรแกรมจะไม่มีการตอบสนอง เพราะ event ที่เกิดขึ้นแทน ที่จะเป็น mousedown, mousemove, mouseup กลับเป็น touchstart, touchmove และ touchend เพื่อจะให้โปรแกรมทำงานได้ทั้งบน desktop pc และ mobile device เราจึงต้องจับ event ทั้งสองประเภท นอกจากนี้ การใช้งานบนบราวเซอร์ของอุปกรณ์ touch screen นั้น การเลื่อนนิ้วอาจจะเป็นมีผลอย่างอื่นด้วย เช่นอาจจะเป็นการเลื่อนหน้าจอเพื่อ refresh เพื่อป้องกันไม่ให้หน้าจอเลื่อนขณะที่เราวาดรูป เราจึงต้องหยุด event ไว้ที่นี่ ไม่ให้ลอยออกไปข้างนอกให้บราวเซอร์เห็น ด้วยการเรียกฟังก์ชั่น e.preventDefault() ตามโค้ดตัวอย่างข้างล่างนี้ครับ","markups":[]},{"name":"e26a","type":8,"text":"function onPenMove(e) {\n    if (drawMode == 1) {\n        dg.beginPath();    \n        dg.lineWidth = lineWidth;\n        dg.lineTo(mX,mY);\n        if (!drawBuffer) drawBuffer = mX+','+mY+';';\n        mX = e.pageX - drawCanvasRect.left;\n        mY = e.pageY - drawCanvasRect.top;","markups":[]},{"name":"9d00","type":8,"text":"        dg.lineJoin = dg.lineCap = 'round';\n        dg.strokeStyle = lineColor;\n        dg.lineTo(mX,mY);\n        dg.stroke();\n        drawBuffer += mX+','+mY+';';\n    }\n    if (e.target == drawCanvas) {\n        e.preventDefault();\n    }\n}","markups":[]},{"name":"94bd","type":8,"text":"drawCanvas.addEventListener('touchmove', onPenMove);\ndrawCanvas.addEventListener('mousemove', onPenMove);","markups":[]},{"name":"669e","type":3,"text":"เพิ่มลูกเล่นให้หัวใจเต้น","markups":[]},{"name":"4ac3","type":1,"text":"ก่อนจะให้ดูตัวอย่าง ผมขอเพิ่มลูกเล่นอีกเล็กน้อย เพื่อให้มีบรรยากาศของวันวาเลนไทน์ ผมเลยอยากจะสร้างไอคอนเล็กๆรูปหัวใจ​ ซึ่งจะปรากฎขึ้นมาเมื่อบราวเซอร์ของเราเชื่อมต่อ NETPIE สำเร็จ เป็นรูปหัวใจสีเทา แต่เมื่ออีกฝ่ายเปิดไฟล์ html นี้เหมือนกัน ​รูปหัวใจจะเปลี่ยนเป็นสีแดง เราสามารถใช้ไอคอนนี้ตรวจสอบสถานะการออนไลน์ของอีกฝั่งได้","markups":[]},{"name":"a8ac","type":1,"text":"รูปหัวใจจะไม่ใช้ gif animation แต่จะเป็นการวาดสดบน canvas โดยอาศัยสมการ parametric ชุดนี้","markups":[]},{"name":"3e10","type":1,"text":"x(t) = 16sin³(t)\ny(t) = 13cos(t) - 5cos(2t) - 2cos(3t) - cos(4t)\nwhere 0 ≤ t \x3c2π","markups":[{"type":2,"start":0,"end":80}]},{"name":"d643","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*eG-uM5bk51T6VQB73y6WEg.png","originalWidth":850,"originalHeight":525}},{"name":"cafd","type":1,"text":"ที่มา : http://mathworld.wolfram.com/HeartCurve.html","markups":[{"type":3,"start":8,"end":52,"href":"http://mathworld.wolfram.com/HeartCurve.html","title":"","rel":"nofollow","anchorType":0}]},{"name":"0da2","type":1,"text":"ยังครับยังไม่พอ เราจะใส่ลูกเล่นน่ารักๆ ให้หัวใจเต้นดึ๋งๆ แสดงอาการตื่นเต้นเหมือนเวลาบอกรักใคร…. วิธีง่ายๆคือใส่ scaling factor ลงไปทั้งสองแกน ให้เปลี่ยนตามเวลา ต้องแบบกลับทิศทางกันด้วยนะ มันจะได้ผลัดกันยืดผลัดกันหด และน่าจะต้องเป็นฟังก์ชั่นแบบ non-linear ด้วย เพราะถ้าเป็น linear การเคลื่อนไหวจะดูแข็งเหมือนหุ่นยนต์เกินไป นอกจากนั้นฟังก์ชั่นน่าจะต้องเป็นเส้นโค้งที่​ smooth ป่องตรงกลางแบบสมมาตรด้วย การวนลูปของอนิเมชั่นจะได้เด้งดึ๋งแบบ smooth ไม่มีเฟรมสะดุด พูดจบก็เห็นกราฟของ Gaussian distribution ลอยมาเลย ว่าแล้วก็ขอยืมฟังก์ชั่นมาใช้หน่อย​ ไม่ต้องเป๊ะมากก็ได้ ค่า mean, variance ไม่สน เอาแค่ประมาณ e ยกกำลังลบของฟังก์ชั่นกำลังสองของเวลา ลองปรับตัวคูณเล็กน้อย เอาไปบวกทางแกน y ด้วยให้มันกระโดดนิดๆ รันดูก็โอเคเลย ผลการมั่วสำเร็จ ผมอัพโหลดโค้ดเฉพาะส่วนของการวาดอนิเมชั่นรูปหัวใจไว้ ลองเข้าไปดูของจริงได้ที่นี่ครับ","markups":[{"type":3,"start":783,"end":814,"href":"https://jsfiddle.net/chavee/ux5cknbj","title":"","rel":"","anchorType":0}]},{"name":"646e","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*Q8ZQchRw5WAWqAkSO3-98w.gif","originalWidth":140,"originalHeight":108}},{"name":"a6d2","type":8,"text":"function drawHeart(x,y,phase,style) {\n    tg.beginPath();\n    tg.fillStyle = '#ffffff';\n    tg.fillRect(x-25,y-25,50,50);\n    if (style==0) return;\n        tg.beginPath();\n        tg.lineWidth = 2;\n        tg.strokeStyle = '#cccccc';\n        tg.fillStyle = '#ff6644';\n        for (var t=0; t\x3c2*Math.PI; t+=0.2) {\n           var k = 1.5*Math.exp(-10*Math.pow(0.5-phase,2));\n           var px = (17-k)*Math.pow(Math.sin(t),3);\n           var py = 3*k+(10+k)*Math.cos(t)-5*Math.cos(2*t)\n                    -2*Math.cos(3*t)-Math.cos(4*t);\n           tg.lineTo(x+px, y-py);\n    }\n    style==2?tg.fill():tg.stroke();\n}","markups":[]},{"name":"0074","type":8,"text":"var phase = 0;\nsetInterval(function() {\n    if (member.length \x3e 0) phase = phase\x3e1?0:phase+0.1;\n    drawHeart(toolOffset3+3*(BTNSIZE+BTNGAP)+30,20,phase,         \n        microgear.connected()?member.length\x3e0?2:1:0 );\n},50);","markups":[]},{"name":"1cbe","type":1,"text":"อธิบายโค้ดเพิ่มเติมหน่อย ตัวแปร style ในโค้ดข้างบนเป็นโหมดของการวาดหัวใจ ค่าเป็น 0 จะไม่วาด ค่าเป็น 1 จะวาดหัวใจเป็นเส้นสีเทา ใช้ตอนที่เชื่อมต่อ netpie ได้แล้ว (microgear.connected() return ค่า true) ส่วน style เป็น 2 จะวาดหัวใจสีแดง ฟังก์ชั่น setInterval ข้างล่างจะเป็นการรันคำสั่งทุก 50 มิลลิวินาที โดยจะขยับค่า phase และสั่งวาดหัวใจ phase ใหม่เป็นลูปไม่รู้จบ แต่ละครั้งหัวใจก็จะขยับไปเล็กน้อย ตามสมการที่โปรแกรมไว้ ส่วนเงื่อนไขในการเข้าแต่ละโหมดก็คือ ถ้าเชื่อมต่อ NETPIE ได้แล้ว (microgear.connected() ให้ค่า true) ก็จะเข้าโหมด 1 แต่ถ่ามีสมาชิก online อย่างน้อย 1 (member.length\x3e0) ​ก็ให้เข้าโหมด 2","markups":[]},{"name":"d77d","type":3,"text":"การเก็บบันทึกลายเส้น","markups":[]},{"name":"a24b","type":1,"text":"การใช้เมาส์วาดรูปสำหรับผมเป็นอะไรที่ลำบากมาก คือกว่าจะวาดรูปให้ดูเป็นรูปซักชิ้น อาจจะต้องวาดซ้ำอยู่หลายรอบ และไม่รู้ว่ารอบไหนถึงจะดูโอเค ผมเลยสร้างตัวช่วยที่เป็นปุ่มบันทึก stroke การวาด สามารถกดอัดได้เหมือนอัดเทป กด play back เพื่อเอาออกมาวาดซ้ำทีหลังเมื่อไหร่ก็ได้ ที่นี้เราก็สามารถซ้อมวาดจนกว่าจะพอใจ โอเคเมื่อไหร่ก็รออีกฝ่ายออนไลน์แล้วกด play เล่น stroke ที่บันทึกไว้ มันจะเล่นซ้ำให้เหมือนกับเรานั่งวาดเองสดๆตอนนั้นเลย","markups":[]},{"name":"2767","type":1,"text":"หลักการทำงานก็ไม่ยากครับ ทำปุ่ม record และปุ่ม play เพิ่มขึ้นมา ถ้ากดปุ่ม record ก็จะพาเข้าสู่โหมดการบันทึกในโหมดนี้ หากมีการวาดเส้น นอกจากจะเกิดการ publish ลายมือออกไปแล้ว string ที่ถูก publish จะถูกเก็บสะสมเข้าไปในตัวแปร recBuffer โดยจะถูกแปะหัวด้วย timestamp เพื่อที่เวลาเอามา play back จะได้ทิ้งช่วงจังหวะเวลาให้เหมือนกับตอนที่วาดได้ ถ้าจะออกจากโหมดบันทึกก็แค่กด record อีกครั้ง สำหรับการ​ play back ก็แค่กดปุ่ม play (ต้อง clear หน้าจอก่อน ถึงจะเห็นผล) ฟังก์ชั่นใน loop ก็จะทำการดึง string ในอาเรย์ recBuffer กลับมา publish ออกไปโดยเว้นระยะเวลาตาม timestamp ที่แปะหัวไว้ message ที่ publish ออกไป จะวนกลับเข้ามาทาง event “message” ซึ่งจะเข้าตรรกะเดิมของฟังก์ชั่นรับ message คือทำเหมือนกับว่าที่มี message ลายมือจากอีกฝ่ายเข้ามา เอามาวาดลงบนจอแบบเดียวกัน เราก็จะเห็นลายมือของเราที่บันทึกไว้ ค่อยๆปรากฏขึ้นทีละเส้นเหมือนมีใครกำลังวาดอยู่","markups":[]},{"name":"59cd","type":1,"text":"จากโค้ดเดิม เราต้องเขียนโค้ดเพิ่มในส่วนของ loop การส่ง แทนที่จะส่งออกไปเฉยๆ ก็เช็คว่ากำลังอยู่ในโหมดบันทึกอยู่หรือเปล่า ถ้ากบันทึกอยู่ก็จะเก็บค่าเข้าไปไว้ในอาเรย์ recBuffer แต่ถ้าอยู่ในโหมด play ก็ดึงค่าออกมา publish โค้ดจะมีหน้าตาประมาณนี้","markups":[]},{"name":"9b1e","type":8,"text":"setInterval(function() {\n    if (recMode != 2) {\n        if (drawBuffer) {\n            var data = lineColor+';'+lineWidth+';'+drawBuffer;\n            microgear.publish('/draw/'+myID, data);\n            if (recMode == 1) {\n                if (recBuffer.length==0) recStartTime = Date.now();\n                recBuffer.push(Date.now()-recStartTime+'\x3e'+data);\n            }\n            drawBuffer = '';\n        }\n    }\n    else {\n        if (playTick \x3c recBuffer.length) {\n            var d = recBuffer[playTick].split('\x3e');\n            if (Date.now() \x3e= recStartTime+parseInt(d[0])) {\n                microgear.publish('/draw/play_'+myID, d[1]);\n                playTick++;\n            }\n        }\n        else {\n            recMode = 0;\n            drawToolBar();\n        }\n    }\n},200);","markups":[]},{"name":"7f1f","type":3,"text":"จับทั้งหมดมารวมกัน","markups":[]},{"name":"a776","type":1,"text":"เมื่อทุกอย่างครบ เราก็เอามาประกอบเป็นชิ้นเดียวกัน โค้ดที่สมบูรณ์ผมได้ push ขึ้น github ไว้ที่นี่ https://github.com/chavee/piecanvas สามารถ download หรือ clone ได้เลย หรือจะเปิดจาก JSFiddle อันนี้ก็ได้","markups":[{"type":3,"start":97,"end":132,"href":"https://github.com/chavee/piecanvas","title":"","rel":"nofollow","anchorType":0},{"type":3,"start":181,"end":201,"href":"https://jsfiddle.net/chavee/ux404epk","title":"","rel":"","anchorType":0}]},{"name":"c3f6","type":1,"text":"ต้องบอกก่อนว่าโค้ดในตัวอย่างนี้ไม่ใช่แบบแผนการเขียนโปรแกรมที่ดีนักนะครับ เพราะตั้งใจจะเขียนแบบตรงไปตรงมาที่สุด ให้ทำตามได้ง่ายๆ และจบได้ในไฟล์เดียว โค้ดทุกอย่างเลยพันกันหมด อยากวาดอะไรก็วาดกันตรงนั้นเลย ปุ่มก็เป็นการวาดบน canvas คำนวณพิกัดการคลิกเองสดๆ ไม่ได้แยกส่วนไปเป็น UI component ที่ต้องมีระบบ event เพราะไม่งั้นจะยาวกว่านี้","markups":[]},{"name":"da5e","type":1,"text":"อย่าลืม ก่อนจะรันให้แก้ค่า config ในส่วนของบรรทัดที่เป็น APPID, KEY และ SECRET ด้วยนะครับ จะต้องใช้ค่าที่ได้จาก netpie.io มาแทนที่ 3 บรรทัดนี้","markups":[]},{"name":"00f0","type":8,"text":"\x3cscript\x3e\n    const APPID     = \"_APPID_\";\n    const APPKEY    = \"_KEY_\";\n    const APPSECRET = \"_SECRET_\";\n\x3c/script\x3e","markups":[{"type":2,"start":33,"end":39},{"type":2,"start":66,"end":70},{"type":2,"start":97,"end":104}]},{"name":"007b","type":1,"text":"หลังจากแก้แล้วก็สามารถคลิกขวาเปิดไฟล์โดยตรงในเว็บเบราเซอร์ได้เลย โดยไม่ต้องไปวางไฟล์ใน webserver ลองเปิดไฟล์เดียวกันหลายๆหน้าต่าง (สำคัญมาก : key ที่ใช้ต้องเป็นชนิด session key ไม่อย่างนั้นจะเปิดพร้อมกันหลายหน้าต่างไม่ได้)​ หรือหลายๆเบราเซอร์ดูนะ จะเห็นว่าเราสามารถขีดเขียนหน้าต่างไหนก็ได้ ลายเส้นจะส่งต่อถึงกันหมด วิธีใช้งานโปรเจ็คนี้ อาจจะส่งไฟล์​ HTML ทางอีเมลไปให้อีกฝ่าย หรือจะอัพโหลดไว้ที่ Google Drive แล้วส่งไปแต่ URL หรือ QR code ก็ได้แล้วแต่สะดวกเลยครับ","markups":[]},{"name":"5bb1","type":1,"text":"ผมลองเปิดบน Chrome กับ FIrefox สองหน้าต่างพร้อมกัน ก็จะเห็นหัวใจสีแดงเต้น เวลาลากเมาส์​ลายเส้นก็จะไปปรากฏอีกบราวเซอร์ด้วย","markups":[]},{"name":"7ba9","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*Vv63hDhPfbiToxqMy6I8vA.png","originalWidth":954,"originalHeight":835}},{"name":"e745","type":3,"text":"ส่งท้าย","markups":[{"type":1,"start":0,"end":7}]},{"name":"ca87","type":1,"text":"หวังว่าคงจะถูกใจกับไอเดียนี้นะครับ อยากให้เอาไปลองเล่นกันดู สำหรับคนโสดก็ไม่ต้องเสียใจไป โปรเจ็คนี้ยังเอาไปต่อยอดได้อีกเยอะนะครับ จะเอาไปใช้เป็นกิจกรรมช่วยสอน วาดรูปขึ้นกระดานหน้าห้องเรียน หรือทำกระดานฝากข้อความเก๋ๆบนจอโทรทัศน์ในร้านอาหาร หรือเล่นเกมแบบ Hangman, Draw Something​ ก็ยังไหว อาจจะอัพโหลไฟล์​ HTML ไปวางที่ไหนสักแห่ง แล้วทำเป็น QR code ขึ้นหน้าจอหรือแปะไว้ให้คนที่เดินผ่านไปมา สแกนแล้วมาทำกิจกรรมร่วมกันก็ยังได้ แต่ไม่ว่าจะเอาไปทำอะไร อย่าลืมเอามาเล่าให้ฟังกันหน่อยนะครับ","markups":[]},{"name":"24be","type":3,"text":"แนะนำลิงค์สำหรับศึกษาเพิ่มเติม","markups":[]},{"name":"16c5","type":9,"text":"เว็บ NETPIE สำหรับเข้าไปสร้าง Key สำหรับเชื่อมต่อ : https://netpie.io","markups":[{"type":3,"start":52,"end":69,"href":"https://netpie.io","title":"","rel":"","anchorType":0}]},{"name":"f1e6","type":9,"text":"บล็อก NETPIE รวม DIY project น่าสนใจหลายอย่าง : https://blog.netpie.io","markups":[{"type":3,"start":48,"end":70,"href":"https://blog.netpie.io","title":"","rel":"","anchorType":0}]},{"name":"e7a3","type":9,"text":"Facebook group : https://www.facebook.com/groups/netpie/","markups":[{"type":3,"start":17,"end":56,"href":"https://www.facebook.com/groups/netpie/","title":"","rel":"nofollow","anchorType":0}]},{"name":"5bf7","type":9,"text":"หน้า Github สำหรับโหลด library : https://github.com/netpieio","markups":[{"type":3,"start":33,"end":60,"href":"https://github.com/netpieio","title":"","rel":"nofollow","anchorType":0}]},{"name":"5445","type":9,"text":"เว็บสอนการใช้งาน HTML5 Canvas : http://www.html5canvastutorials.com","markups":[{"type":3,"start":32,"end":67,"href":"http://www.html5canvastutorials.com/","title":"","rel":"nofollow","anchorType":0}]}],"sections":[{"name":"2aba","startIndex":0},{"name":"0339","startIndex":3}]},"postDisplay":{"coverless":true}},"virtuals":{"allowNotes":true,"previewImage":{"imageId":"1*PTASR2nXGD4XwzUt5_v5UQ.png","filter":"","backgroundSize":"","originalWidth":808,"originalHeight":394,"strategy":"resample","height":0,"width":0},"wordCount":1374,"imageCount":7,"readingTime":6.2349056603773585,"subtitle":"วันวาเลนไทน์มาถึงอีกปีแล้ว ชาวโปรแกรมเมอร์ท่านใดที่กำลังอินเลิฟ ผมขอชวนมาทำโปรเจ็คสนุกๆรับต้อนวันแห่งความรักกันครับ บทความนี้เกิดจากโปรเจค…","usersBySocialRecommends":[],"recommends":4,"socialRecommends":[],"isBookmarked":false,"tags":[{"slug":"iot","name":"IoT","postCount":9199,"virtuals":{"isFollowing":false},"metadata":{"followerCount":2476,"postCount":9199,"coverImage":{"id":"1*f1Jww7zKLqLWpJnPn-ydng.png","originalWidth":900,"originalHeight":600}},"type":"Tag"},{"slug":"netpie","name":"Netpie","postCount":8,"virtuals":{"isFollowing":false},"metadata":{"followerCount":0,"postCount":8,"coverImage":{"id":"1*PTASR2nXGD4XwzUt5_v5UQ.png","originalWidth":808,"originalHeight":394}},"type":"Tag"},{"slug":"valentines","name":"Valentine","postCount":0,"virtuals":{"isFollowing":false},"metadata":{"followerCount":0,"postCount":0,"coverImage":{"id":"1*PTASR2nXGD4XwzUt5_v5UQ.png","originalWidth":808,"originalHeight":394}},"type":"Tag"},{"slug":"html5","name":"Html5","postCount":1484,"virtuals":{"isFollowing":false},"metadata":{"followerCount":1590,"postCount":1484,"coverImage":{"id":"1*Xnvr06lfQB2PhgFYuipuOQ.png","originalWidth":1711,"originalHeight":1148,"isFeatured":true}},"type":"Tag"},{"slug":"javascript","name":"JavaScript","postCount":29556,"virtuals":{"isFollowing":false},"metadata":{"followerCount":32187,"postCount":29556,"coverImage":{"id":"1*mR7_k1mHMlsfc01qz-ZPiQ.png","originalWidth":8844,"originalHeight":4235}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":0,"links":{"entries":[],"version":"0.3","generatedAt":1487187197089},"isLockedPreviewOnly":false,"takeoverId":"","metaDescription":"","totalClapCount":0},"coverless":true,"slug":"ส่งความรักวันวาเลนไทน์แบบ-i-t-ด้วย-netpie","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":true,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"ส่งความรักวันวาเลนไทน์แบบ-i-t-ด้วย-netpie-98b6e12c88e2","previewContent":{"bodyModel":{"paragraphs":[{"name":"f06e","type":3,"text":"ส่งความรักวันวาเลนไทน์แบบ I❤T ด้วย NETPIE","markups":[],"alignment":1},{"name":"72ee","type":4,"text":"","markups":[],"layout":9,"metadata":{"id":"1*PTASR2nXGD4XwzUt5_v5UQ.png","originalWidth":808,"originalHeight":394}},{"name":"50c2","type":1,"text":"วันวาเลนไทน์มาถึงอีกปีแล้ว ชาวโปรแกรมเมอร์ท่านใดที่กำลังอินเลิฟ ผมขอชวนมาทำโปรเจ็คสนุก…","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://medium.com/@chaveeissariyapat/%E0%B8%AA%E0%B9%88%E0%B8%87%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%A3%E0%B8%B1%E0%B8%81%E0%B8%A7%E0%B8%B1%E0%B8%99%E0%B8%A7%E0%B8%B2%E0%B9%80%E0%B8%A5%E0%B8%99%E0%B9%84%E0%B8%97%E0%B8%99%E0%B9%8C%E0%B9%81%E0%B8%9A%E0%B8%9A-i-t-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-netpie-98b6e12c88e2","approvedHomeCollectionId":"","newsletterId":"","webCanonicalUrl":"https://medium.com/@chaveeissariyapat/%E0%B8%AA%E0%B9%88%E0%B8%87%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%A3%E0%B8%B1%E0%B8%81%E0%B8%A7%E0%B8%B1%E0%B8%99%E0%B8%A7%E0%B8%B2%E0%B9%80%E0%B8%A5%E0%B8%99%E0%B9%84%E0%B8%97%E0%B8%99%E0%B9%8C%E0%B9%81%E0%B8%9A%E0%B8%9A-i-t-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-netpie-98b6e12c88e2","mediumUrl":"https://medium.com/@chaveeissariyapat/%E0%B8%AA%E0%B9%88%E0%B8%87%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%A3%E0%B8%B1%E0%B8%81%E0%B8%A7%E0%B8%B1%E0%B8%99%E0%B8%A7%E0%B8%B2%E0%B9%80%E0%B8%A5%E0%B8%99%E0%B9%84%E0%B8%97%E0%B8%99%E0%B9%8C%E0%B9%81%E0%B8%9A%E0%B8%9A-i-t-%E0%B8%94%E0%B9%89%E0%B8%A7%E0%B8%A2-netpie-98b6e12c88e2","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"isSponsored":false,"isRequestToPubDisabled":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"type":"Post"},"mentionedUsers":[],"collaborators":[],"membershipPlans":[],"collectionUserRelations":[],"mode":null,"references":{"User":{"b2c57632395c":{"userId":"b2c57632395c","name":"Chavee Issariyapat","username":"chaveeissariyapat","createdAt":1459119038639,"lastPostCreatedAt":1486611529325,"imageId":"0*gc32sBjlliJNaB0L.","backgroundImageId":"","bio":"Lead developer at NETPIE.io | Researcher at NECTEC","twitterScreenName":"","socialStats":{"userId":"b2c57632395c","usersFollowedCount":33,"usersFollowedByCount":28,"type":"SocialStats"},"social":{"userId":"lo_5810fdf63690","targetUserId":"b2c57632395c","type":"Social"},"facebookAccountId":"10154024413449717","allowNotes":1,"type":"User"}},"Social":{"b2c57632395c":{"userId":"lo_5810fdf63690","targetUserId":"b2c57632395c","type":"Social"}},"SocialStats":{"b2c57632395c":{"userId":"b2c57632395c","usersFollowedCount":33,"usersFollowedByCount":28,"type":"SocialStats"}}}})
// ]]></script></body></html>