<!DOCTYPE html><html xmlns:cc="http://creativecommons.org/ns#"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>There’s a synthesizer in your browser… – Patrick Hardy – Medium</title><link rel="canonical" href="https://medium.com/@patrickwhardy/theres-a-synthesizer-in-your-browser-5070a42681c7"><meta name="title" content="There’s a synthesizer in your browser… – Patrick Hardy – Medium"><meta name="referrer" content="unsafe-url"><meta name="description" content="With the release of the Web Audio API and the Web MIDI API, building musical instruments in the browser can be relatively simple and elegant. &quot;The Web Audio API involves handling audio operations…"><meta property="og:title" content="There’s a synthesizer in your browser… – Patrick Hardy – Medium"><meta property="og:url" content="https://medium.com/@patrickwhardy/theres-a-synthesizer-in-your-browser-5070a42681c7"><meta property="fb:app_id" content="542599432471018"><meta property="og:description" content="With the release of the Web Audio API and the Web MIDI API, building musical instruments in the browser can be relatively simple and…"><meta name="twitter:description" content="With the release of the Web Audio API and the Web MIDI API, building musical instruments in the browser can be relatively simple and…"><link rel="publisher" href="https://plus.google.com/103654360130207659246"><link rel="author" href="https://medium.com/@patrickwhardy"><meta property="author" content="Patrick Hardy"><meta property="og:type" content="article"><meta name="twitter:card" content="summary"><meta property="article:publisher" content="https://www.facebook.com/medium"><meta property="article:author" content="https://medium.com/@patrickwhardy"><meta property="fb:smart_publish:robots" content="noauto"><meta name="robots" content="index, follow"><meta property="article:published_time" content="2016-07-29T05:14:37.934Z"><meta name="twitter:site" content="@Medium"><meta property="og:site_name" content="Medium"><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="2 min read"><script type="application/ld+json">{"@context":"http://schema.org","@type":"NewsArticle","image":{"@type":"ImageObject","width":1920,"height":534,"url":"https://cdn-images-1.medium.com/max/1920/1*5ztbgEt4NqpVaxTc64C-XA.png"},"datePublished":"2016-07-29T05:14:37.934Z","dateModified":"2016-07-29T05:14:37.934Z","headline":"There’s a synthesizer in your browser…","name":"There’s a synthesizer in your browser…","keywords":["Programming","Electronics","Synthesizers","JavaScript","API"],"author":{"@type":"Person","name":"Patrick Hardy","url":"https://medium.com/@patrickwhardy"},"creator":["Patrick Hardy"],"mainEntityOfPage":"https://medium.com/@patrickwhardy/theres-a-synthesizer-in-your-browser-5070a42681c7"}</script><meta name="twitter:app:name:iphone" content="Medium"><meta name="twitter:app:id:iphone" content="828256236"><meta name="twitter:app:url:iphone" content="medium://p/5070a42681c7"><meta property="al:ios:app_name" content="Medium"><meta property="al:ios:app_store_id" content="828256236"><meta property="al:android:package" content="com.medium.reader"><meta property="al:android:app_name" content="Medium"><meta property="al:ios:url" content="medium://p/5070a42681c7"><meta property="al:android:url" content="medium://p/5070a42681c7"><meta property="al:web:url" content="https://medium.com/@patrickwhardy/theres-a-synthesizer-in-your-browser-5070a42681c7"><link rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml" /><link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/5070a42681c7" /><meta name="theme-color" content="#000000"><link rel="stylesheet" href="https://cdn-static-1.medium.com/_/fp/css/main-base.g2e09PlZK_j3Lw2AgNmbfQ.css"><script>if (window.top !== window.self) window.top.location = window.self.location.href;var OB_startTime = new Date().getTime(); var OB_loadErrors = []; function _onerror(e) { OB_loadErrors.push(e) }; if (document.addEventListener) document.addEventListener("error", _onerror, true); else if (document.attachEvent) document.attachEvent("onerror", _onerror); function _asyncScript(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = u; f.parentNode.insertBefore(s, f);}function _asyncStyles(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("link"); s.rel = "stylesheet"; s.href = u; f.parentNode.insertBefore(s, f); return s}var _gaq = _gaq || [];_gaq.push(["_setAccount", "UA-24232453-2"]); _gaq.push(["_setDomainName", window.location.hostname]); _gaq.push(["_setAllowLinker", true]); _gaq.push(["_trackPageview"]);_asyncScript(("https:" == document.location.protocol ? "https://ssl" : "http://www") + ".google-analytics.com/ga.js");(new Image()).src = "/_/stat?event=pixel.load&origin=" + encodeURIComponent(location.origin);</script><script>(function () {var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight; var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth; document.write("<style>section.section-image--fullBleed.is-backgrounded {padding-top: " + Math.round(1.1 * height) + "px;}section.section-image--fullScreen.is-backgrounded, section.section-image--coverFade.is-backgrounded {min-height: " + height + "px; padding-top: " + Math.round(0.5 * height) + "px;}.u-sizeViewHeight100 {height: " + height + "px !important;}.u-sizeViewHeight110 {height: " + Math.round(1.1 * height) + "px !important;}.u-sizeViewHeightMin100 {min-height: " + height + "px !important;}.u-sizeViewHeightMax100 {max-height: " + height + "px !important;}section.section-image--coverFade {height: " + height + "px;}.section-aspectRatioViewportPlaceholder, .section-aspectRatioViewportCropPlaceholder {max-height: " + height + "px;}.section-aspectRatioViewportBottomSpacer, .section-aspectRatioViewportBottomPlaceholder {max-height: " + Math.round(0.5 * height) + "px;}.zoomable:before {top: " + (-1 * height) + "px; left: " + (-1 * width) + "px; padding: " + height + "px " + width + "px;}</style>");})()</script><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]--><link rel="icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-medium.TAS6uQ-Y7kcKgi0xjcYHXw.ico" class="js-favicon"><link rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/152/152/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/120/120/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/76/76/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/60/60/1*W0nmth_X8nFKjn6BZ388UQ.png"><link rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg" color="#171717"></head><body itemscope class=" postShowScreen is-noJs"><script>document.body.className = document.body.className.replace(/(^|\s)is-noJs(\s|$)/, "$1is-js$2")</script><div class="site-main" id="container"><div class="butterBar butterBar--error"></div><div class="surface"><div id="prerendered" class="screenContent"><canvas class="canvas-renderer"></canvas><div class="container u-maxWidth740 u-xs-margin0 notesPositionContainer js-notesPositionContainer"></div><div class="metabar u-clearfix js-metabar"><div class="metabar-inner u-marginAuto u-maxWidth1000 u-paddingLeft20 u-paddingRight20 js-metabarMiddle"><div class="metabar-block metabar-block--left u-floatLeft u-height65 u-xs-height56"><a href="https://medium.com/" class="siteNav-logo" data-log-event="home"><span class="svgIcon svgIcon--logoNew svgIcon--45px is-flushLeft"><svg class="svgIcon-use" width="45" height="45"  viewBox="-17 18 45 45" data-multipart="true"><path d="M11.525 28.078c-.472-.225-.858.002-.858.506v20.044l8.616 4.113c.948.46 1.717.14 1.717-.7v-19.3a.22.22 0 0 0-.124-.19l-9.35-4.46v-.01z"/><path d="M.333 43.696l9.83-15.247c.278-.43.89-.6 1.36-.38l9.364 4.47c.06.03.082.1.047.15L10.666 48.63.333 43.698v-.002z"/><path d="M-8.57 28.35c-.786-.375-1.053-.096-.592.62L.333 43.696l10.333 4.932L.356 32.635a.156.156 0 0 0-.06-.054l-8.866-4.23z"/><path d="M.333 52.033c0 .84-.643 1.22-1.43.844l-8.045-3.84c-.472-.224-.858-.82-.858-1.325V28.89c0-.672.515-.976 1.145-.675l9.133 4.36a.092.092 0 0 1 .055.084v19.37z"/></svg></span><span class="u-textScreenReader">Homepage</span></a></div><div class="metabar-block u-floatRight u-xs-absolute u-xs-textAlignRight u-xs-right0 u-xs-marginRight20 u-height65 u-xs-height56"><div class="buttonSet"><a class="button button--primary button--chromeless u-accentColor--buttonNormal is-inSiteNavBar u-lineHeight30 u-height32"  href="https://medium.com/m/signin?redirect=https%3A%2F%2Fmedium.com%2F%40patrickwhardy%2Ftheres-a-synthesizer-in-your-browser-5070a42681c7" data-action="sign-in-prompt" data-redirect="https://medium.com/@patrickwhardy/theres-a-synthesizer-in-your-browser-5070a42681c7" data-action-source="nav_signup">Sign in / Sign up</a></div></div></div></div><div class="metabar metabar--spacer js-metabarSpacer u-height65 u-xs-height56"></div><main role="main"><article class=" u-sizeViewHeightMin100 u-overflowHidden postArticle postArticle--full u-marginBottom40"  lang="en"><header class="container u-maxWidth740"><div class="postMetaHeader u-paddingBottom10 row"><div class="col u-size12of12 js-postMetaLockup"><div class="postMetaLockup postMetaLockup--authorWithBio u-flex js-postMetaLockup"><div class="u-flex0"><a class="link avatar u-baseColor--link"  href="https://medium.com/@patrickwhardy?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="7d6689fb0cf9" data-action-type="hover" data-user-id="7d6689fb0cf9" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/40/40/0*Ub1zw_39Iy4oYVBL." class="avatar-image avatar-image--smaller" alt="Go to the profile of Patrick Hardy"></a></div><div class="u-flex1 u-paddingLeft15 u-overflowHidden"><a class="link link link--darken link--darker u-baseColor--link"  href="https://medium.com/@patrickwhardy?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="7d6689fb0cf9" data-action-type="hover" data-user-id="7d6689fb0cf9" dir="auto">Patrick Hardy</a><span class="followState js-followState buttonSet-inner" data-user-id="7d6689fb0cf9"><button class="button u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSize12 u-uiTextMedium u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-marginLeft10 u-marginTopNegative2 u-xs-hide"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="post_header_lockup"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary u-paddingLeft10 u-paddingRight10 u-height19 u-lineHeight13 u-verticalAlignMiddle u-fontSize12 u-uiTextMedium u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-marginLeft10 u-marginTopNegative2 u-xs-hide"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/7d6689fb0cf9" data-action-source="post_header_lockup_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span><div class="postMetaInline js-testPostMetaInlineSupplemental"><time datetime="2016-07-29T05:14:37.934Z">Jul 28, 2016</time><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="2 min read"></span></div></div></div></div></div></header><div class="postArticle-content js-postField js-notesSource js-trackedPost"  data-post-id="5070a42681c7" data-source="post_page" data-tracking-context="postPage"><section name="4694" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h1 name="f5a0" id="f5a0" class="graf graf--h3 graf--leading graf--title">There’s a synthesizer in your browser…</h1><p name="c832" id="c832" class="graf graf--p graf-after--h3">With the release of the Web Audio API and the Web MIDI API, building musical instruments in the browser can be relatively simple and elegant.</p><p name="f04e" id="f04e" class="graf graf--p graf-after--p">What is the Web Audio API? Here’s a quick overview from the MDN:</p><p name="7e1c" id="7e1c" class="graf graf--p graf-after--p">&quot;The Web Audio API involves handling audio operations inside an <strong class="markup--strong markup--p-strong">audio context</strong>, and has been designed to allow <strong class="markup--strong markup--p-strong">modular routing</strong>. Basic audio operations are performed with <strong class="markup--strong markup--p-strong">audio nodes</strong>, which are linked together to form an <strong class="markup--strong markup--p-strong">audio routing graph</strong>.”</p><p name="ceda" id="ceda" class="graf graf--p graf-after--p">This audio context can be treated much like an HTMLCanvas context, in so far as it is an environment you can create many different objects rules for interactions of those objects. In my project, this simply meant creating many oscillators and governing them all with a master volume.</p><p name="e886" id="e886" class="graf graf--p graf-after--p">The Web Audio API can be used to create complex audio functions and dynamic effects, but my interest was peaked by the recent release of the Web MIDI API.</p><p name="d5b1" id="d5b1" class="graf graf--p graf-after--p">MIDI is a musical technology that has been around since the early 80’s and is still the preferred protocol for electronic musical instruments. MIDI keyboards enable a user to send not only the note of the key they are pressing, but the velocity that they hit that note and special parameters for that note such as volume, vibrato, tonal modulation or panning. This makes it the primary choice for connecting hardware any major virtual instrument software.</p><p name="be1b" id="be1b" class="graf graf--p graf-after--p">The fact that MIDI is an event-driven protocol makes it a great match for JavaScript, and makes the browser a seamless environment to use this hardware.</p><p name="94db" id="94db" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Building a Synth</strong></p><p name="498e" id="498e" class="graf graf--p graf-after--p">I built a basic synthesizer using npm and the code to get started with these APIs is relatively simple.</p><p name="8fa2" id="8fa2" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">First install the web-midi-api, webaudio and octavian packages.</strong></p><p name="42ae" id="42ae" class="graf graf--p graf-after--p">Then set up a special MIDI event listener like this: navigator.requestMIDIAccess</p><p name="4b11" id="4b11" class="graf graf--p graf-after--p">Every a key is struck it will fire some raw data our way called midiAccess, that will come through as an collection of inputs. You’ll have to iterate through each of these inputs to get three important bits of data:</p><p name="5549" id="5549" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">Type:</em> 144 signifies a note-on or keypress event, whereas 128 should be treated as note off.</p><p name="90f1" id="90f1" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">Note:</em> This comes through as a piano key number</p><p name="33fa" id="33fa" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">Velocity:</em> This is a value between 1 and 127 that signifies how hard the key was struck.</p><p name="6d36" id="6d36" class="graf graf--p graf-after--p">When the you get a note-on event, you’ll need to create an oscillator.</p><p name="ec17" id="ec17" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Set up your AudioContext and create an oscillator:</strong></p><p name="4422" id="4422" class="graf graf--p graf-after--p">var context = new AudioContext();</p><p name="09a9" id="09a9" class="graf graf--p graf-after--p">masterVolume.connect(context.destination);</p><p name="108c" id="108c" class="graf graf--p graf-after--p">var masterVolume = context.createGain();</p><p name="28a9" id="28a9" class="graf graf--p graf-after--p">osc = context.createOscillator();</p><p name="50e0" id="50e0" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Then associate the MIDI event values with the oscillator:</strong></p><p name="d115" id="d115" class="graf graf--p graf-after--p">var Note = require(‘octavian’).Note;</p><p name="c63a" id="c63a" class="graf graf--p graf-after--p">frequency = Note.fromPianoKey(key).frequency;</p><p name="dd62" id="dd62" class="graf graf--p graf-after--p">osc.frequency.value = frequency;</p><p name="7a62" id="7a62" class="graf graf--p graf-after--p">masterVolume.gain.value = velocityToGain(velocity);</p><p name="a13f" id="a13f" class="graf graf--p graf-after--p">osc.connect(masterVolume);</p><p name="48c5" id="48c5" class="graf graf--p graf-after--p">Run the oscilator with: osc.start(context.currentTime);</p><p name="e3b9" id="e3b9" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">That’s it!</strong></p><p name="9a57" id="9a57" class="graf graf--p graf-after--p">The oscillator will ring out (and never stop!) at with the note that you hit on the keyboard.</p><p name="b068" id="b068" class="graf graf--p graf-after--p">To make this useful, you’ll need to figure out how to handle multiple keys being pressed at the same time bycreating many input and oscillator objects and stopping them on keyUp events.</p><p name="b2d6" id="b2d6" class="graf graf--p graf-after--p graf--trailing">Check out the code for the fully functional synthI built below. I’ve also added an oscilloscope to animate what’s really going on in the oscillator: <a href="https://github.com/patrickwhardy/web-keys" data-href="https://github.com/patrickwhardy/web-keys" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://github.com/patrickwhardy/web-keys</a></p></div></div></section></div><footer class="u-paddingTop10"><div class="container u-maxWidth740"><div class="row"><div class="col u-size12of12"></div></div><div class="row"><div class="col u-size12of12 js-postTags"><div class="u-paddingBottom10"><ul class="tags tags--postTags tags--borderless"><li><a class="link u-baseColor--link"  href="https://medium.com/tag/programming?source=post" data-action-source="post">Programming</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/electronics?source=post" data-action-source="post">Electronics</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/synthesizers?source=post" data-action-source="post">Synthesizers</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/javascript?source=post" data-action-source="post">JavaScript</a></li><li><a class="link u-baseColor--link"  href="https://medium.com/tag/api?source=post" data-action-source="post">API</a></li></ul></div></div></div><div class="row js-postActionsFooter"><div class="postActions col u-size12of12"><div class="u-floatLeft buttonSet buttonSet--withLabels"><div class="buttonSet-inner"><div class="js-actionRecommend" data-post-id="5070a42681c7" data-is-icon-29px="true" data-has-recommend-list="true" data-source="post_actions_footer"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/5070a42681c7" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"/></svg></span></span></button></div></div><div class="buttonSet-inner"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  data-action="scroll-to-responses" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"/></svg></span></button></div></div><div class="u-floatRight buttonSet buttonSet--narrow"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/></svg></span></button></div></div></div></div><div class="js-postPromotionWrapper postPromotionWrapper" data-location-id="footer_above_post_attribution"></div><div class="container u-maxWidth740 js-postAttributionFooterContainer u-paddingTop20 u-paddingBottom20 u-marginTop10 u-borderTopLightest u-xs-paddingTop10 u-xs-paddingBottom10"><div class="row js-postFooterInfo"><div class="col u-size12of12"><li class="u-block u-paddingBottom18 js-cardUser"><div class="u-marginLeft20 u-floatRight"><span class="followState js-followState buttonSet-inner" data-user-id="7d6689fb0cf9"><button class="button button--small u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/7d6689fb0cf9" data-action-source="footer_card_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="u-tableCell "><a class="link avatar u-baseColor--link"  href="https://medium.com/@patrickwhardy?source=footer_card" title="Go to the profile of Patrick Hardy" aria-label="Go to the profile of Patrick Hardy" data-action-source="footer_card" data-user-id="7d6689fb0cf9" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/60/60/0*Ub1zw_39Iy4oYVBL." class="avatar-image avatar-image--small" alt="Go to the profile of Patrick Hardy"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal"  href="https://medium.com/@patrickwhardy" property="cc:attributionName" title="Go to the profile of Patrick Hardy" aria-label="Go to the profile of Patrick Hardy" rel="author cc:attributionUrl" data-user-id="7d6689fb0cf9" dir="auto">Patrick Hardy</a></h3></div></li></div></div></div><div class="js-postFooterPlacements"></div><div class="u-padding0 u-clearfix u-backgroundGrayLightest u-print-hide supplementalPostContent js-responsesWrapper"></div><div class="supplementalPostContent js-readNext"></div><div class="supplementalPostContent js-heroPromo"></div></footer></article></main><div class="u-marginAuto u-maxWidth1000"><div class="js-postShareWidget u-foreground u-sm-hide u-transition--fadeOut300 u-fixed"><ul><li class="u-uiTextSemibold u-textAlignCenter u-textColorNormal u-fontSize12 u-textUppercase">Share</li><li class="u-textAlignCenter"><div class="js-actionRecommend" data-post-id="5070a42681c7" data-is-icon-29px="true" data-is-vertical="true" data-has-recommend-list="true" data-source="post_share_widget"><button class="button button--primary button--large button--chromeless is-touchIconFadeInPulse u-accentColor--buttonNormal button--withIcon button--withSvgIcon u-accentColor--iconLight js-actionRecommendButton"  title="Recommend to share this article with your followers and let the author know you liked it" aria-label="Recommend to share this article with your followers and let the author know you liked it" data-action="sign-in-prompt" data-sign-in-action="upvote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/5070a42681c7" data-action-source="post_share_widget"><span class="button-defaultState"><span class="svgIcon svgIcon--heart svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.215 23.716c-.348.288-.984.826-1.376 1.158a.526.526 0 0 1-.68 0c-.36-.307-.92-.78-1.22-1.03C9.22 20.734 3 15.527 3 10.734 3 7.02 5.916 4 9.5 4c1.948 0 3.77.898 5 2.434C15.73 4.898 17.552 4 19.5 4c3.584 0 6.5 3.02 6.5 6.734 0 4.9-6.125 9.96-9.785 12.982zM19.5 5.2c-1.774 0-3.423.923-4.41 2.468a.699.699 0 0 1-.59.323.706.706 0 0 1-.59-.32c-.988-1.54-2.637-2.47-4.41-2.47-2.922 0-5.3 2.49-5.3 5.54 0 4.23 6.19 9.41 9.517 12.19.217.18.566.48.783.66l.952-.79c3.496-2.88 9.348-7.72 9.348-12.05 0-3.05-2.378-5.53-5.3-5.53z"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--heartFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.5 4c-1.948 0-3.77.898-5 2.434C13.27 4.898 11.448 4 9.5 4 5.916 4 3 7.02 3 10.734c0 4.793 6.227 10 9.95 13.11.296.25.853.723 1.212 1.03.196.166.48.166.677 0 .39-.332 1.02-.87 1.37-1.158 3.66-3.022 9.79-8.08 9.79-12.982C26 7.02 23.08 4 19.5 4z" fill-rule="evenodd"/></svg></span></span></button></div></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Twitter" aria-label="Share on Twitter" data-action="share-on-twitter" data-action-source="post_share_widget"><span class="svgIcon svgIcon--twitter svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M21.967 11.8c.018 5.93-4.607 11.18-11.177 11.18-2.172 0-4.25-.62-6.047-1.76l-.268.422-.038.5.186.013.168.012c.3.02.44.032.6.046 2.06-.026 3.95-.686 5.49-1.86l1.12-.85-1.4-.048c-1.57-.055-2.92-1.08-3.36-2.51l-.48.146-.05.5c.22.03.48.05.75.08.48-.02.87-.07 1.25-.15l2.33-.49-2.32-.49c-1.68-.35-2.91-1.83-2.91-3.55 0-.05 0-.01-.01.03l-.49-.1-.25.44c.63.36 1.35.57 2.07.58l1.7.04L7.4 13c-.978-.662-1.59-1.79-1.618-3.047a4.08 4.08 0 0 1 .524-1.8l-.825.07a12.188 12.188 0 0 0 8.81 4.515l.59.033-.06-.59v-.02c-.05-.43-.06-.63-.06-.87a3.617 3.617 0 0 1 6.27-2.45l.2.21.28-.06c1.01-.22 1.94-.59 2.73-1.09l-.75-.56c-.1.36-.04.89.12 1.36.23.68.58 1.13 1.17.85l-.21-.45-.42-.27c-.52.8-1.17 1.48-1.92 2L22 11l.016.28c.013.2.014.35 0 .52v.04zm.998.038c.018-.22.017-.417 0-.66l-.498.034.284.41a8.183 8.183 0 0 0 2.2-2.267l.97-1.48-1.6.755c.17-.08.3-.02.34.03a.914.914 0 0 1-.13-.292c-.1-.297-.13-.64-.1-.766l.36-1.254-1.1.695c-.69.438-1.51.764-2.41.963l.48.15a4.574 4.574 0 0 0-3.38-1.484 4.616 4.616 0 0 0-4.61 4.613c0 .29.02.51.08.984l.01.02.5-.06.03-.5c-3.17-.18-6.1-1.7-8.08-4.15l-.48-.56-.36.64c-.39.69-.62 1.48-.65 2.28.04 1.61.81 3.04 2.06 3.88l.3-.92c-.55-.02-1.11-.17-1.6-.45l-.59-.34-.14.67c-.02.08-.02.16 0 .24-.01 2.12 1.55 4.01 3.69 4.46l.1-.49-.1-.49c-.33.07-.67.12-1.03.14-.18-.02-.43-.05-.64-.07l-.76-.09.23.73c.57 1.84 2.29 3.14 4.28 3.21l-.28-.89a8.252 8.252 0 0 1-4.85 1.66c-.12-.01-.26-.02-.56-.05l-.17-.01-.18-.01L2.53 21l1.694 1.07a12.233 12.233 0 0 0 6.58 1.917c7.156 0 12.2-5.73 12.18-12.18l-.002.04z"/></svg></span></button></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  title="Share on Facebook" aria-label="Share on Facebook" data-action="share-on-facebook" data-action-source="post_share_widget"><span class="svgIcon svgIcon--facebook svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M16.39 23.61v-5.808h1.846a.55.55 0 0 0 .546-.48l.36-2.797a.551.551 0 0 0-.547-.62H16.39V12.67c0-.67.12-.813.828-.813h1.474a.55.55 0 0 0 .55-.55V8.803a.55.55 0 0 0-.477-.545c-.436-.06-1.36-.116-2.22-.116-2.5 0-4.13 1.62-4.13 4.248v1.513H10.56a.551.551 0 0 0-.55.55v2.797c0 .304.248.55.55.55h1.855v5.76c-4.172-.96-7.215-4.7-7.215-9.1 0-5.17 4.17-9.36 9.31-9.36 5.14 0 9.31 4.19 9.31 9.36 0 4.48-3.155 8.27-7.43 9.15M14.51 4C8.76 4 4.1 8.684 4.1 14.46c0 5.162 3.75 9.523 8.778 10.32a.55.55 0 0 0 .637-.543v-6.985a.551.551 0 0 0-.55-.55H11.11v-1.697h1.855a.55.55 0 0 0 .55-.55v-2.063c0-2.02 1.136-3.148 3.03-3.148.567 0 1.156.027 1.597.06v1.453h-.924c-1.363 0-1.93.675-1.93 1.912v1.78c0 .3.247.55.55.55h2.132l-.218 1.69H15.84c-.305 0-.55.24-.55.55v7.02c0 .33.293.59.623.54 5.135-.7 9.007-5.11 9.007-10.36C24.92 8.68 20.26 4 14.51 4"/></svg></span></button></li><li class="u-textAlignCenter"><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton"  title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-in-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/5070a42681c7"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" viewBox="0 0 29 29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"/></svg></span></span></button></li></ul></div></div><div class="u-fixed u-bottom0 u-sizeFullWidth u-backgroundWhite u-boxShadowTop u-borderBox u-paddingTop10 u-paddingBottom10 u-zIndexMetabar u-xs-paddingLeft10 u-xs-paddingRight10 js-stickyFooter"><div class="u-maxWidth700 u-marginAuto u-flexCenter"><div class="u-fontSize16 u-flex1 u-flexCenter"><div class="u-flex0 u-inlineBlock u-paddingRight20 u-xs-paddingRight10"><a class="link avatar u-inline u-baseColor--link"  href="https://medium.com/@patrickwhardy" data-action="show-user-card" data-action-value="7d6689fb0cf9" data-action-type="hover" data-user-id="7d6689fb0cf9" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/40/40/0*Ub1zw_39Iy4oYVBL." class="avatar-image avatar-image--smaller" alt="Go to the profile of Patrick Hardy"></a></div><div class="u-flex1 u-inlineBlock"><div class="u-xs-hide">Never miss a story from<strong> Patrick Hardy</strong>, when you sign up for Medium. <a class="link link--accent u-accentColor--textNormal u-accentColor--textDarken u-baseColor--link"  href="https://medium.com/@Medium/personalize-your-medium-experience-with-users-publications-tags-26a41ab1ee0c#.hx4zuv3mg" data-action-source="sticky_footer">Learn more</a></div><div class="u-xs-show">Never miss a story from<strong> Patrick Hardy</strong></div></div></div><div class="u-marginLeft50 u-xs-marginAuto"><span class="followState js-followState buttonSet-inner" data-user-id="7d6689fb0cf9"><button class="button u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-uiTextSemibold u-textUppercase u-fontSize12"  data-action="sign-in-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-action-source="sticky_footer"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary is-active u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton u-uiTextSemibold u-textUppercase u-fontSize12"  data-action="sign-in-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/7d6689fb0cf9" data-action-source="sticky_footer_follow"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Get updates</span></button></span></div></div></div></div></div></div><div class="loadingBar"></div><script>// <![CDATA[
window["obvInit"] = function (opt_embedded) {window["obvInit"]["embedded"] = opt_embedded; window["obvInit"]["ready"] = true;}
// ]]></script><script>// <![CDATA[
var GLOBALS = {"audioUrl":"https://d1fcbxp97j4nb2.cloudfront.net","baseUrl":"https://medium.com","buildLabel":"28586-6143d83","currentUser":{"userId":"lo_35fdd18e05","isVerified":false,"subscriberEmail":""},"currentUserHasUnverifiedEmail":false,"isAuthenticated":false,"isCurrentUserVerified":false,"mediumTwitterScreenName":"medium","miroUrl":"https://cdn-images-1.medium.com","moduleUrls":{"base":"https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.2nXtJ8XknWJqOjh2ZNHRVw.js","notes":"https://cdn-static-1.medium.com/_/fp/gen-js/main-notes.bundle.AouowiblLn4SBKZF6cWDtA.js","posters":"https://cdn-static-1.medium.com/_/fp/gen-js/main-posters.bundle.4rYp3nph7xNXmlmak5XWxQ.js","common-async":"https://cdn-static-1.medium.com/_/fp/gen-js/main-common-async.bundle.R35emyz9xZL7YdHbIl-SvQ.js","stats":"https://cdn-static-1.medium.com/_/fp/gen-js/main-stats.bundle.XUyD-cfC9DG2nc9iq5x7GA.js","home-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-home-screens.bundle.0oM8iNH9LgWeJY00O_ao2Q.js","misc-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-misc-screens.bundle.caQfKUCZ18Wg2IbFBoaXiA.js"},"previewConfig":{"weightThreshold":1,"weightImageParagraph":0.51,"weightIframeParagraph":0.8,"weightTextParagraph":0.08,"weightEmptyParagraph":0,"weightP":0.003,"weightH":0.005,"weightBq":0.003,"minPTextLength":60,"truncateBoundaryChars":20,"detectTitle":true,"detectTitleLevThreshold":0.15},"productName":"Medium","supportsEdit":false,"termsUrl":"//medium.com/policy/9db0094a1e0f","textshotHost":"textshot.medium.com","transactionId":"1492192127281:9b25484037d6","useragent":{"browser":"python requests","family":"","os":"","version":2.2,"supportsDesktopEdit":false,"supportsInteract":false,"supportsView":true,"isMobile":false,"isTablet":false,"isNative":false,"supportsFileAPI":false,"isTier1":false,"clientVersion":"","unknownParagraphsBad":false,"clientChannel":"","supportsRealScrollEvents":false,"supportsVhUnits":false,"ruinsViewportSections":false,"supportsHtml5Video":false,"supportsMagicUnderlines":false,"isWebView":false,"isFacebookWebView":false,"supportsProgressiveMedia":false,"supportsPromotedPosts":true,"isBot":false,"isNativeIphone":false,"supportsCssVariables":false,"supportsScrollableMetabar":false},"variants":{"allow_access":true,"allow_signup":true,"allow_test_auth":"disallow","signin_services":"twitter,facebook,google,email,google-fastidv","signup_services":"twitter,facebook,google,email,google-fastidv","android_rating_prompt_recommend_threshold":5,"google_sign_in_android":true,"enable_onboarding":true,"ios_custom_miro_url":"https://cdn-images-1.medium.com","reengagement_notification_duration":3,"enable_adsnative_integration":true,"browsable_stream_config_bucket":"curated-topics","ios_small_post_preview_truncation_length":5.5,"ios_large_post_preview_truncation_length":5.5,"disable_ios_catalog_badging":true,"enable_series_creation":true,"enable_your_series_pages":true,"enable_productionized_series":true,"enable_dedicated_series_tab_api_ios":true,"enable_clap_milestone_notifications":true,"enable_series_stats_page":true,"enable_prepublish_share_settings":true,"enable_direct_auth_connect":true,"enable_post_import":true,"enable_sponsored_post_labelling":true,"enable_logged_in_follow_on_collection_post":true,"promoted_story_placement_locations":"POST_PAGE_FOOTER","show_topics":true,"enable_search_collection_by_tag_recency_filter":true,"search_collection_by_tag_filter_min_votes":10,"enable_sms_app_promo":true,"enable_export_members":true,"enable_series_card_background_creation":true,"can_see_subscription_branding":true,"enable_subscriptions_landing_page":true,"enable_partner_program_landing_page":true,"enable_hide_broken_links":true,"enable_pay_for_custom_domain":true,"enable_promos_from_dynamo":true,"enable_promos_in_placement":true,"enable_series_promo_in_email":true,"enable_sms":true,"enable_series_in_user_profiles":true,"enable_new_logged_out_bento_operation":true,"enable_topic_brief_relations":true},"xsrfToken":"","iosAppId":"828256236","supportEmail":"yourfriends@medium.com","teamName":"Team Medium","fp":{"/icons/favicon.svg":"https://cdn-static-1.medium.com/_/fp/icons/favicon.KjTfUJo7yJH_fCoUzzH3cg.svg","/icons/favicon-dev-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-dev-editor.YKKRxBO8EMvIqhyCwIiJeQ.ico","/icons/favicon-hatch-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-hatch-editor.BuEyHIqlyh2s_XEk4Rl32Q.ico","/icons/favicon-medium-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrl":"https://medium.com","imageUploadSizeMb":25,"isAuthDomainRequest":true,"algoliaApiEndpoint":"https://MQ57UUUQZ2-dsn.algolia.net","algoliaAppId":"MQ57UUUQZ2","algoliaSearchOnlyApiKey":"394474ced050e3911ae2249ecc774921","iosAppStoreUrl":"https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8","iosAppLinkBaseUrl":"medium:","algoliaIndexPrefix":"medium_","androidPlayStoreUrl":"https://play.google.com/store/apps/details?id=com.medium.reader","googleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","androidPackage":"com.medium.reader","androidPlayStoreMarketScheme":"market://details?id=com.medium.reader","googleAuthUri":"https://accounts.google.com/o/oauth2/auth","androidScheme":"medium","layoutData":{"useDynamicScripts":false,"googleAnalyticsTrackingCode":"UA-24232453-2","jsShivUrl":"https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js","useDynamicCss":false,"faviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium.TAS6uQ-Y7kcKgi0xjcYHXw.ico","faviconImageId":"1*W0nmth_X8nFKjn6BZ388UQ.png","fontSets":[{"id":1,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-base.by5Oi_VbnwEIvhnWIsuUjA.css"},{"id":4,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-lazy-base.g08Jj5TZPAiuPWj5YNUsSg.css"},{"id":6,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-latin-base.141WxxXgxGxNcfeza73H7Q.css"},{"id":7,"url":"https://cdn-static-1.medium.com/_/fp/css/fonts-lazy-latin-base.jMU532QDmysQMOINr-cr2A.css"}],"editorFaviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrlRev":"moc.muidem//:sptth","isDnt":false,"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","archiveUploadSizeMb":100,"paymentData":{"currencies":{"1":{"label":"US Dollar","external":"usd"}},"countries":{"1":{"label":"United States of America","external":"US"}},"accountTypes":{"1":{"label":"Individual","external":"individual"},"2":{"label":"Company","external":"company"}}},"previewConfig2":{"weightThreshold":1,"weightImageParagraph":0.05,"raiseImage":true,"enforceHeaderHierarchy":true,"isImageInsetRight":true},"isAmp":false,"iosScheme":"medium","isSwBoot":false,"lightstep":{"accessToken":"ce5be895bef60919541332990ac9fef2","carrier":"{\"ot-tracer-spanid\":\"280e5bf20d5d7c95\",\"ot-tracer-traceid\":\"2026efaf3f37d937\",\"ot-tracer-sampled\":\"true\"}","host":"collector-medium.lightstep.com"},"facebook":{"key":"542599432471018","secret":"c14df7146e9052a1131f3c900c1f0644","token":"542599432471018|1JqjIwxSfY9jOt_KwjWEl1R7T6I","namespace":"medium-com","scope":{"default":["public_profile","email","user_friends"],"connect":["public_profile","email","user_friends"],"login":["public_profile","email","user_friends"],"share":["public_profile","email","user_friends","publish_actions"]},"smartPublishWhitelistedPublications":["bcc38c8f6edf","f3726e2a5878","828a270689e","81c7d351c056","f30e42fd7ff8","8bf1d7d3081b","d16afa0ae7c","d8f3f6ad9c31","e74de0cedea9","15f753907972","c8c6a6b01ebd","3412b9729488","2ce4bbcf83bb","544c7006046e","7bfcdbc6b30a","a268fd916824","458a773bccd2"],"instantArticles":{"published":true,"developmentMode":false}},"mailingListArchiveUploadSizeMb":2,"availableMembershipPlans":[],"editorsPicksTopicId":"3985d2a191c5","popularOnMediumTopicId":"9d34e48ecf94","memberContentTopicId":"13d7efd82fb2","isDoNotAuth":false,"goldfinchUrl":"https://goldfinch.medium.com"}
// ]]></script><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.2nXtJ8XknWJqOjh2ZNHRVw.js" async></script><script>// <![CDATA[
window["obvInit"]({"value":{"id":"5070a42681c7","versionId":"190978faf69d","creatorId":"7d6689fb0cf9","creator":{"userId":"7d6689fb0cf9","name":"Patrick Hardy","username":"patrickwhardy","createdAt":1469681045222,"lastPostCreatedAt":1469681329952,"imageId":"0*Ub1zw_39Iy4oYVBL.","backgroundImageId":"","bio":"","twitterScreenName":"","socialStats":{"userId":"7d6689fb0cf9","usersFollowedCount":47,"usersFollowedByCount":47,"type":"SocialStats"},"social":{"userId":"lo_b109b07b4933","targetUserId":"7d6689fb0cf9","type":"Social"},"facebookAccountId":"10206908361898882","allowNotes":1,"type":"User"},"homeCollectionId":"","title":"There’s a synthesizer in your browser…","detectedLanguage":"en","latestVersion":"190978faf69d","latestPublishedVersion":"190978faf69d","hasUnpublishedEdits":false,"latestRev":585,"createdAt":1469681329952,"updatedAt":1469769277934,"acceptedAt":0,"firstPublishedAt":1469769277934,"latestPublishedAt":1469769277934,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"With the release of the Web Audio API and the Web MIDI API, building musical instruments in the browser can be relatively simple and…","bodyModel":{"paragraphs":[{"name":"f5a0","type":3,"text":"There’s a synthesizer in your browser…","markups":[]},{"name":"c832","type":1,"text":"With the release of the Web Audio API and the Web MIDI API, building musical instruments in the browser can be relatively simple and elegant.","markups":[]},{"name":"f04e","type":1,"text":"What is the Web Audio API? Here’s a quick overview from the MDN:","markups":[]},{"name":"7e1c","type":1,"text":"\"The Web Audio API involves handling audio operations inside an audio context, and has been designed to allow modular routing. Basic audio operations are performed with audio nodes, which are linked together to form an audio routing graph.”","markups":[{"type":1,"start":64,"end":77},{"type":1,"start":110,"end":125},{"type":1,"start":169,"end":180},{"type":1,"start":219,"end":238}]},{"name":"ceda","type":1,"text":"This audio context can be treated much like an HTMLCanvas context, in so far as it is an environment you can create many different objects rules for interactions of those objects. In my project, this simply meant creating many oscillators and governing them all with a master volume.","markups":[]},{"name":"e886","type":1,"text":"The Web Audio API can be used to create complex audio functions and dynamic effects, but my interest was peaked by the recent release of the Web MIDI API.","markups":[]},{"name":"d5b1","type":1,"text":"MIDI is a musical technology that has been around since the early 80’s and is still the preferred protocol for electronic musical instruments. MIDI keyboards enable a user to send not only the note of the key they are pressing, but the velocity that they hit that note and special parameters for that note such as volume, vibrato, tonal modulation or panning. This makes it the primary choice for connecting hardware any major virtual instrument software.","markups":[]},{"name":"be1b","type":1,"text":"The fact that MIDI is an event-driven protocol makes it a great match for JavaScript, and makes the browser a seamless environment to use this hardware.","markups":[]},{"name":"94db","type":1,"text":"Building a Synth","markups":[{"type":1,"start":0,"end":16}]},{"name":"498e","type":1,"text":"I built a basic synthesizer using npm and the code to get started with these APIs is relatively simple.","markups":[]},{"name":"8fa2","type":1,"text":"First install the web-midi-api, webaudio and octavian packages.","markups":[{"type":1,"start":0,"end":63}]},{"name":"42ae","type":1,"text":"Then set up a special MIDI event listener like this: navigator.requestMIDIAccess","markups":[]},{"name":"4b11","type":1,"text":"Every a key is struck it will fire some raw data our way called midiAccess, that will come through as an collection of inputs. You’ll have to iterate through each of these inputs to get three important bits of data:","markups":[]},{"name":"5549","type":1,"text":"Type: 144 signifies a note-on or keypress event, whereas 128 should be treated as note off.","markups":[{"type":2,"start":0,"end":5}]},{"name":"90f1","type":1,"text":"Note: This comes through as a piano key number","markups":[{"type":2,"start":0,"end":5}]},{"name":"33fa","type":1,"text":"Velocity: This is a value between 1 and 127 that signifies how hard the key was struck.","markups":[{"type":2,"start":0,"end":9}]},{"name":"6d36","type":1,"text":"When the you get a note-on event, you’ll need to create an oscillator.","markups":[]},{"name":"ec17","type":1,"text":"Set up your AudioContext and create an oscillator:","markups":[{"type":1,"start":0,"end":50}]},{"name":"4422","type":1,"text":"var context = new AudioContext();","markups":[]},{"name":"09a9","type":1,"text":"masterVolume.connect(context.destination);","markups":[]},{"name":"108c","type":1,"text":"var masterVolume = context.createGain();","markups":[]},{"name":"28a9","type":1,"text":"osc = context.createOscillator();","markups":[]},{"name":"50e0","type":1,"text":"Then associate the MIDI event values with the oscillator:","markups":[{"type":1,"start":0,"end":57}]},{"name":"d115","type":1,"text":"var Note = require(‘octavian’).Note;","markups":[]},{"name":"c63a","type":1,"text":"frequency = Note.fromPianoKey(key).frequency;","markups":[]},{"name":"dd62","type":1,"text":"osc.frequency.value = frequency;","markups":[]},{"name":"7a62","type":1,"text":"masterVolume.gain.value = velocityToGain(velocity);","markups":[]},{"name":"a13f","type":1,"text":"osc.connect(masterVolume);","markups":[]},{"name":"48c5","type":1,"text":"Run the oscilator with: osc.start(context.currentTime);","markups":[]},{"name":"e3b9","type":1,"text":"That’s it!","markups":[{"type":1,"start":0,"end":10}]},{"name":"9a57","type":1,"text":"The oscillator will ring out (and never stop!) at with the note that you hit on the keyboard.","markups":[]},{"name":"b068","type":1,"text":"To make this useful, you’ll need to figure out how to handle multiple keys being pressed at the same time bycreating many input and oscillator objects and stopping them on keyUp events.","markups":[]},{"name":"b2d6","type":1,"text":"Check out the code for the fully functional synthI built below. I’ve also added an oscilloscope to animate what’s really going on in the oscillator: https://github.com/patrickwhardy/web-keys","markups":[{"type":3,"start":149,"end":190,"href":"https://github.com/patrickwhardy/web-keys","title":"","rel":"nofollow","anchorType":0}]}],"sections":[{"name":"4694","startIndex":0}]},"postDisplay":{"coverless":true}},"virtuals":{"allowNotes":true,"previewImage":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"wordCount":530,"imageCount":0,"readingTime":2,"subtitle":"With the release of the Web Audio API and the Web MIDI API, building musical instruments in the browser can be relatively simple and…","usersBySocialRecommends":[],"recommends":0,"socialRecommends":[],"isBookmarked":false,"tags":[{"slug":"programming","name":"Programming","postCount":31425,"virtuals":{"isFollowing":false},"metadata":{"followerCount":38539,"postCount":31425,"coverImage":{"id":"1*mR7_k1mHMlsfc01qz-ZPiQ.png","originalWidth":8844,"originalHeight":4235}},"type":"Tag"},{"slug":"electronics","name":"Electronics","postCount":1630,"virtuals":{"isFollowing":false},"metadata":{"followerCount":313,"postCount":1630,"coverImage":{"id":"0*zsrQEOgXlx05BNBZ.jpg","originalWidth":1024,"originalHeight":567}},"type":"Tag"},{"slug":"synthesizers","name":"Synthesizers","postCount":86,"virtuals":{"isFollowing":false},"metadata":{"followerCount":49,"postCount":86,"coverImage":{"id":"1*Ih9nHs1oJ3gYTy4oon21Qw.jpeg","originalWidth":1500,"originalHeight":1000}},"type":"Tag"},{"slug":"javascript","name":"JavaScript","postCount":29412,"virtuals":{"isFollowing":false},"metadata":{"followerCount":32087,"postCount":29412,"coverImage":{"id":"1*mR7_k1mHMlsfc01qz-ZPiQ.png","originalWidth":8844,"originalHeight":4235}},"type":"Tag"},{"slug":"api","name":"API","postCount":4187,"virtuals":{"isFollowing":false},"metadata":{"followerCount":1883,"postCount":4187,"coverImage":{"id":"1*20YChSm8q5mv0DiZXPn4pQ.png","originalWidth":1042,"originalHeight":442}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":0,"links":{"entries":[],"version":"0.3","generatedAt":1472530101277},"isLockedPreviewOnly":false,"takeoverId":"","metaDescription":"","totalClapCount":0},"coverless":true,"slug":"theres-a-synthesizer-in-your-browser","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":true,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"theres-a-synthesizer-in-your-browser-5070a42681c7","previewContent":{"bodyModel":{"paragraphs":[{"name":"f5a0","type":3,"text":"There’s a synthesizer in your browser…","markups":[],"alignment":1},{"name":"c832","type":1,"text":"With the release of the Web Audio API and the Web MIDI API, building musical instruments in the browser can be relatively simple and elegant.","markups":[],"alignment":1},{"name":"f04e","type":1,"text":"What is the Web Audio API? Here’s a quick overview from the MDN:","markups":[],"alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://medium.com/@patrickwhardy/theres-a-synthesizer-in-your-browser-5070a42681c7","approvedHomeCollectionId":"","newsletterId":"","webCanonicalUrl":"https://medium.com/@patrickwhardy/theres-a-synthesizer-in-your-browser-5070a42681c7","mediumUrl":"https://medium.com/@patrickwhardy/theres-a-synthesizer-in-your-browser-5070a42681c7","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"isSponsored":false,"isRequestToPubDisabled":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"type":"Post"},"mentionedUsers":[],"collaborators":[],"membershipPlans":[],"collectionUserRelations":[],"mode":null,"references":{"User":{"7d6689fb0cf9":{"userId":"7d6689fb0cf9","name":"Patrick Hardy","username":"patrickwhardy","createdAt":1469681045222,"lastPostCreatedAt":1469681329952,"imageId":"0*Ub1zw_39Iy4oYVBL.","backgroundImageId":"","bio":"","twitterScreenName":"","socialStats":{"userId":"7d6689fb0cf9","usersFollowedCount":47,"usersFollowedByCount":47,"type":"SocialStats"},"social":{"userId":"lo_b109b07b4933","targetUserId":"7d6689fb0cf9","type":"Social"},"facebookAccountId":"10206908361898882","allowNotes":1,"type":"User"}},"Social":{"7d6689fb0cf9":{"userId":"lo_b109b07b4933","targetUserId":"7d6689fb0cf9","type":"Social"}},"SocialStats":{"7d6689fb0cf9":{"userId":"7d6689fb0cf9","usersFollowedCount":47,"usersFollowedByCount":47,"type":"SocialStats"}}}})
// ]]></script></body></html>